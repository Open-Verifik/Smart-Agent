<div class="flex flex-col max-w-lg w-full">
    <!-- Close Button -->
    <div class="flex items-center justify-end p-2">
        <button mat-icon-button (click)="close()">
            <mat-icon class="text-gray-400">close</mat-icon>
        </button>
    </div>

    <div class="flex flex-col px-8 pb-8" *transloco="let t">
        <!-- Header & Icon -->
        <div class="flex flex-col items-center text-center mb-8">
            <div
                class="flex items-center justify-center w-16 h-16 rounded-full bg-primary-50 dark:bg-primary-900/20 mb-4"
            >
                <mat-icon class="icon-size-8 text-primary-600 dark:text-primary-400"
                    >notifications_active</mat-icon
                >
            </div>
            <h1 class="text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
                {{
                    currentSubscription
                        ? t('network.alerts.header_update')
                        : t('network.alerts.header_subscribe')
                }}
            </h1>
            <p class="text-gray-500 dark:text-gray-400 mt-2">
                {{
                    t('network.alerts.subtitle', {
                        name: data.subject.method.currentTranslation,
                    })
                }}
            </p>
        </div>

        <!-- Instructions Card -->
        <div
            class="bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4 mb-8 border border-gray-100 dark:border-gray-700"
        >
            <h3 class="text-sm font-semibold text-gray-900 dark:text-white mb-2 flex items-center">
                <mat-icon class="icon-size-4 mr-2 text-primary-500">info</mat-icon>
                {{ t('network.alerts.how_it_works') }}
            </h3>
            <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-2">
                <li class="flex items-start">
                    <span class="mr-2 text-primary-500">•</span>
                    {{ t('network.alerts.instruction_1') }}
                </li>
                <li class="flex items-start">
                    <span class="mr-2 text-primary-500">•</span>
                    {{ t('network.alerts.instruction_2') }}
                </li>
                <li class="flex items-start">
                    <span class="mr-2 text-primary-500">•</span>
                    {{ t('network.alerts.instruction_3') }}
                </li>
            </ul>
        </div>

        <!-- Emails Input -->
        <div class="flex flex-col">
            <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">{{
                t('network.alerts.emails_label')
            }}</label>
            <mat-form-field class="w-full" appearance="outline" subscriptSizing="dynamic">
                <mat-chip-grid #chipGrid aria-label="Enter emails">
                    <mat-chip-row
                        *ngFor="let email of emails"
                        (removed)="remove(email)"
                        [editable]="false"
                    >
                        {{ email }}
                        <button matChipRemove aria-label="'remove ' + email">
                            <mat-icon>cancel</mat-icon>
                        </button>
                    </mat-chip-row>
                    <input
                        [placeholder]="t('network.alerts.placeholder')"
                        [matChipInputFor]="chipGrid"
                        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                        [matChipInputAddOnBlur]="true"
                        (matChipInputTokenEnd)="add($event)"
                    />
                </mat-chip-grid>
            </mat-form-field>
            <p class="text-xs text-gray-400 mt-2">{{ t('network.alerts.hint') }}</p>
        </div>

        <!-- Actions -->
        <div class="flex flex-col sm:flex-row items-center gap-3 mt-10">
            <button
                *ngIf="currentSubscription"
                class="w-full sm:w-auto"
                mat-stroked-button
                color="warn"
                (click)="delete()"
                [disabled]="loading"
            >
                <mat-icon class="icon-size-5 mr-2">delete</mat-icon>
                {{ t('network.alerts.remove') }}
            </button>
            <div class="flex-auto"></div>
            <button
                class="w-full sm:w-auto px-8 py-2.5 rounded-xl bg-primary-600 text-white hover:bg-primary-700 transition-colors disabled:opacity-50"
                mat-flat-button
                (click)="save()"
                [disabled]="loading"
            >
                <mat-spinner *ngIf="loading" diameter="20" class="mr-2"></mat-spinner>
                {{
                    currentSubscription
                        ? t('network.alerts.save_changes')
                        : t('network.alerts.enable')
                }}
            </button>
        </div>
    </div>
</div>
