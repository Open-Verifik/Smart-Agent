import{a as A}from"./chunk-CE5WN7WZ.js";import{a as R,b as $}from"./chunk-X2B33RZ7.js";import{a as N,b as O}from"./chunk-QAYTNEMP.js";import{d as P}from"./chunk-AR6BYMPL.js";import{d as V,i as F}from"./chunk-5HIRALMD.js";import"./chunk-ELGVYL4R.js";import{U as j,V as D,X as L,Z as U,_ as z}from"./chunk-RMO4OYE5.js";import{Eb as o,Fb as r,Gb as B,Kb as v,Mb as p,Nb as s,Nc as I,Oc as E,Wa as c,Wc as M,Xb as l,Yb as h,Zb as C,_b as w,ad as T,fb as k,ga as b,lb as x,mc as S,nc as y,qa as f,ra as g,sb as m}from"./chunk-QTVKNRSK.js";import"./chunk-MG3ERZGY.js";function q(e,u){e&1&&(o(0,"div",9),B(1,"mat-spinner",10),o(2,"p",11),l(3,"Loading configurations..."),r()())}function G(e,u){if(e&1){let t=v();o(0,"div",12)(1,"div",13)(2,"mat-icon",14),l(3,"layers"),r()(),o(4,"h3",15),l(5,"No configurations found"),r(),o(6,"p",16),l(7," Create your first batch configuration to start automating data processing. "),r(),o(8,"button",17),p("click",function(){f(t);let n=s();return g(n.createConfiguration())}),l(9," Create Configuration "),r()()}}function H(e,u){e&1&&(o(0,"span",37),l(1," Inactive "),r())}function K(e,u){if(e&1){let t=v();o(0,"div",20),p("click",function(){let n,a=f(t).$implicit,d=s(2);return g(d.openDashboard((n=(n=a._id)!==null&&n!==void 0?n:a.id)!==null&&n!==void 0?n:""))}),o(1,"div",21)(2,"button",22),p("click",function(n){let a,d=f(t).$implicit,_=s(2);return g(_.editConfiguration((a=(a=d._id)!==null&&a!==void 0?a:d.id)!==null&&a!==void 0?a:"",n))}),o(3,"mat-icon",23),l(4,"edit"),r()(),o(5,"button",24),p("click",function(n){let a,d=f(t).$implicit,_=s(2);return g(_.deleteConfiguration((a=(a=d._id)!==null&&a!==void 0?a:d.id)!==null&&a!==void 0?a:"",n))}),o(6,"mat-icon",23),l(7,"delete"),r()()(),o(8,"div",25)(9,"div",26)(10,"span",27),l(11),r(),o(12,"div")(13,"h3",28),l(14),r(),o(15,"div",29)(16,"span",30),l(17),S(18,"uppercase"),S(19,"uppercase"),r(),x(20,H,2,0,"span",31),r()()()(),o(21,"p",32),l(22),r(),o(23,"div",33)(24,"div")(25,"span",34),l(26,"Steps"),r(),o(27,"span",35),l(28),r()(),o(29,"div")(30,"span",34),l(31,"Strategy"),r(),o(32,"span",36),l(33),r()()()()}if(e&2){let t=u.$implicit,i=s(2);c(11),h(i.getCountryFlag(t.country)),c(3),C(" ",t.name," "),c(3),w(" ",y(18,8,t.inputFormat)," \u2192 ",y(19,10,t.outputFormat)," "),c(3),m("ngIf",!t.isActive),c(2),C(" ",t.description||"No description provided."," "),c(6),h(t.steps.length),c(5),h(t.mergeStrategy.replace("-"," "))}}function Q(e,u){if(e&1&&(o(0,"div",18),x(1,K,34,12,"div",19),r()),e&2){let t=s();c(),m("ngForOf",t.configurations())}}var J=(()=>{class e{constructor(){this._smartBatchService=b(A),this._router=b(V),this.configurations=this._smartBatchService.configurations,this.isLoading=this._smartBatchService.isLoading}ngOnInit(){this._smartBatchService.getConfigurations().subscribe({next:()=>{let t=this.configurations();console.log("[SmartBatch] configurations loaded",{count:t?.length,configs:t?.map(i=>({_id:i._id,id:i.id,name:i.name,country:i.country,countryType:typeof i.country,countryJson:JSON.stringify(i.country)}))})},error:t=>console.error("[SmartBatch] getConfigurations error",t)})}createConfiguration(){this._router.navigate(["smart-batch/create"])}deleteConfiguration(t,i){i.stopPropagation(),confirm("Are you sure you want to delete this configuration?")&&this._smartBatchService.deleteConfiguration(t).subscribe()}editConfiguration(t,i){i.stopPropagation(),this._router.navigate(["smart-batch/edit",t])}openDashboard(t){let i=`/smart-batch/${t}`;if(console.log("[SmartBatch] openDashboard called",{id:t,idType:typeof t,idLength:t?.length,targetUrl:i,currentUrl:this._router.url}),!t){console.warn("[SmartBatch] openDashboard: id is falsy, skipping navigation");return}this._router.navigateByUrl(i).then(n=>{console.log("[SmartBatch] navigateByUrl result",{success:n,targetUrl:i}),n||console.warn("[SmartBatch] navigateByUrl returned false - route may not have matched")},n=>{console.error("[SmartBatch] navigateByUrl failed",{targetUrl:i,err:n})})}getCountryFlag(t){let i={colombia:"\u{1F1E8}\u{1F1F4}",col:"\u{1F1E8}\u{1F1F4}",co:"\u{1F1E8}\u{1F1F4}","united states":"\u{1F1FA}\u{1F1F8}",usa:"\u{1F1FA}\u{1F1F8}",us:"\u{1F1FA}\u{1F1F8}",peru:"\u{1F1F5}\u{1F1EA}",pe:"\u{1F1F5}\u{1F1EA}",world:"\u{1F310}",mexico:"\u{1F1F2}\u{1F1FD}",mx:"\u{1F1F2}\u{1F1FD}",brazil:"\u{1F1E7}\u{1F1F7}",br:"\u{1F1E7}\u{1F1F7}",chile:"\u{1F1E8}\u{1F1F1}",cl:"\u{1F1E8}\u{1F1F1}",argentina:"\u{1F1E6}\u{1F1F7}",ar:"\u{1F1E6}\u{1F1F7}",ecuador:"\u{1F1EA}\u{1F1E8}",ec:"\u{1F1EA}\u{1F1E8}",venezuela:"\u{1F1FB}\u{1F1EA}",ve:"\u{1F1FB}\u{1F1EA}",bolivia:"\u{1F1E7}\u{1F1F4}",bo:"\u{1F1E7}\u{1F1F4}",uruguay:"\u{1F1FA}\u{1F1FE}",uy:"\u{1F1FA}\u{1F1FE}",paraguay:"\u{1F1F5}\u{1F1FE}",py:"\u{1F1F5}\u{1F1FE}",panama:"\u{1F1F5}\u{1F1E6}",pa:"\u{1F1F5}\u{1F1E6}","costa rica":"\u{1F1E8}\u{1F1F7}",cr:"\u{1F1E8}\u{1F1F7}",guatemala:"\u{1F1EC}\u{1F1F9}",gt:"\u{1F1EC}\u{1F1F9}",honduras:"\u{1F1ED}\u{1F1F3}",hn:"\u{1F1ED}\u{1F1F3}","el salvador":"\u{1F1F8}\u{1F1FB}",sv:"\u{1F1F8}\u{1F1FB}","dominican republic":"\u{1F1E9}\u{1F1F4}","rep\xFAblica dominicana":"\u{1F1E9}\u{1F1F4}","republica dominicana":"\u{1F1E9}\u{1F1F4}",do:"\u{1F1E9}\u{1F1F4}",canada:"\u{1F1E8}\u{1F1E6}",ca:"\u{1F1E8}\u{1F1E6}",spain:"\u{1F1EA}\u{1F1F8}",es:"\u{1F1EA}\u{1F1F8}"},n=(t||"").trim().toLowerCase(),a=i[n]??"\u{1F3F3}\uFE0F";return(!t||a==="\u{1F3F3}\uFE0F")&&console.log("[SmartBatch] getCountryFlag",{raw:t,key:n,resolved:a,hasMatch:n in i}),a}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=k({type:e,selectors:[["smart-batch"]],decls:14,vars:3,consts:[[1,"flex","flex-col","w-full","h-full","bg-[#f8fafc]","dark:bg-[#0f172a]","p-6","gap-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","tracking-tight","text-slate-900","dark:text-white"],[1,"mt-1","text-slate-500","dark:text-slate-400"],["mat-flat-button","","color","primary",1,"!rounded-lg","!px-6","!py-2",3,"click"],[1,"mr-2","icon-size-5"],["class","flex flex-col items-center justify-center flex-1",4,"ngIf"],["class","flex flex-col items-center justify-center flex-1 border-2 border-dashed border-slate-200 dark:border-slate-800 rounded-2xl p-12 text-center",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","flex-1"],["diameter","48"],[1,"mt-4","text-slate-500"],[1,"flex","flex-col","items-center","justify-center","flex-1","border-2","border-dashed","border-slate-200","dark:border-slate-800","rounded-2xl","p-12","text-center"],[1,"w-20","h-20","bg-slate-50","dark:bg-slate-900","rounded-full","flex","items-center","justify-center","mb-6"],[1,"text-slate-400","icon-size-10"],[1,"text-lg","font-medium","text-slate-900","dark:text-white"],[1,"text-slate-500","dark:text-slate-400","max-w-sm","mt-2","mb-6"],["mat-stroked-button","","color","primary",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","group relative bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6 transition-all hover:shadow-md hover:border-blue-500/50 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"group","relative","bg-white","dark:bg-slate-900","rounded-2xl","border","border-slate-200","dark:border-slate-800","p-6","transition-all","hover:shadow-md","hover:border-blue-500/50","cursor-pointer",3,"click"],[1,"absolute","top-4","right-4","opacity-0","group-hover:opacity-100","transition-opacity","flex","gap-1"],["mat-icon-button","","matTooltip","Edit",3,"click"],[1,"icon-size-5"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-center","gap-3"],[1,"text-2xl"],[1,"font-semibold","text-slate-900","dark:text-white","line-clamp-1"],[1,"flex","items-center","gap-2","mt-0.5"],[1,"text-xs","font-medium","px-2","py-0.5","rounded-full","bg-slate-100","dark:bg-slate-800","text-slate-600","dark:text-slate-400"],["class","text-xs font-medium px-2 py-0.5 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",4,"ngIf"],[1,"text-sm","text-slate-500","dark:text-slate-400","mb-6","line-clamp-2","min-h-[2.5rem]"],[1,"grid","grid-cols-2","gap-4","pt-4","border-t","border-slate-100","dark:border-slate-800"],[1,"block","text-xs","text-slate-400","font-medium","uppercase","tracking-wider"],[1,"text-lg","font-semibold","text-slate-900","dark:text-white"],[1,"text-sm","font-medium","text-slate-700","dark:text-slate-300","capitalize","truncate"],[1,"text-xs","font-medium","px-2","py-0.5","rounded-full","bg-red-100","dark:bg-red-900/30","text-red-600","dark:text-red-400"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),l(4," Smart Batch "),r(),o(5,"p",3),l(6," Manage your automated batch processing configurations. "),r()(),o(7,"button",4),p("click",function(){return n.createConfiguration()}),o(8,"mat-icon",5),l(9,"add"),r(),l(10," Create Configuration "),r()(),x(11,q,4,0,"div",6)(12,G,10,0,"div",7)(13,Q,2,1,"div",8),r()),i&2&&(c(11),m("ngIf",n.isLoading()),c(),m("ngIf",!n.isLoading()&&n.configurations().length===0),c(),m("ngIf",!n.isLoading()&&n.configurations().length>0))},dependencies:[T,I,E,M,P,F,L,D,j,z,U,O,N,$,R],encapsulation:2})}}return e})();var gt=[{path:"",component:J},{path:"create",loadComponent:()=>import("./chunk-NCEISF6E.js").then(e=>e.CreateBatchConfigComponent)},{path:"edit/:id",loadComponent:()=>import("./chunk-NCEISF6E.js").then(e=>e.CreateBatchConfigComponent)},{path:":configId",loadComponent:()=>import("./chunk-ZYL7TU65.js").then(e=>e.BatchDashboardComponent)},{path:":configId/batch/new",loadComponent:()=>import("./chunk-DEU5PZPD.js").then(e=>e.CreateBatchComponent)},{path:":configId/batch/:batchId",loadComponent:()=>import("./chunk-YXVMOBEE.js").then(e=>e.BatchProcessingComponent)},{path:":configId/report-builder",loadComponent:()=>import("./chunk-6QDTBW3X.js").then(e=>e.ReportBuilderComponent)},{path:":configId/report-builder/:templateId",loadComponent:()=>import("./chunk-6QDTBW3X.js").then(e=>e.ReportBuilderComponent)},{path:":configId/batch/:batchId/report",loadComponent:()=>import("./chunk-UNOY7P6A.js").then(e=>e.ReportViewerComponent)}];export{gt as default};
