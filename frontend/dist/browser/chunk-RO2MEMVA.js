import{a as J}from"./chunk-ABHLXW35.js";import{a as $,b as A}from"./chunk-6KW5AGH6.js";import{a as O,b as P}from"./chunk-TMGVD2CJ.js";import{d as N}from"./chunk-MHDW6SIO.js";import{d as V,i as F}from"./chunk-GXH7TAS4.js";import"./chunk-VNPDQGHT.js";import{U as j,V as D,X as L,Z as U,_ as z}from"./chunk-2HLCC7ZB.js";import{Eb as n,Fb as o,Gb as B,Kb as v,Mb as p,Nb as s,Nc as E,Oc as I,Wa as c,Wc as M,Xb as l,Yb as h,Zb as S,_b as w,ad as T,fb as k,ga as b,lb as x,mc as C,nc as y,qa as f,ra as g,sb as m}from"./chunk-TT3TB5PH.js";import"./chunk-MG3ERZGY.js";function q(r,u){r&1&&(n(0,"div",9),B(1,"mat-spinner",10),n(2,"p",11),l(3,"Loading configurations..."),o()())}function G(r,u){if(r&1){let t=v();n(0,"div",12)(1,"div",13)(2,"mat-icon",14),l(3,"layers"),o()(),n(4,"h3",15),l(5,"No configurations found"),o(),n(6,"p",16),l(7," Create your first batch configuration to start automating data processing. "),o(),n(8,"button",17),p("click",function(){f(t);let i=s();return g(i.createConfiguration())}),l(9," Create Configuration "),o()()}}function H(r,u){r&1&&(n(0,"span",37),l(1," Inactive "),o())}function K(r,u){if(r&1){let t=v();n(0,"div",20),p("click",function(){let i,a=f(t).$implicit,d=s(2);return g(d.openDashboard((i=(i=a._id)!==null&&i!==void 0?i:a.id)!==null&&i!==void 0?i:""))}),n(1,"div",21)(2,"button",22),p("click",function(i){let a,d=f(t).$implicit,_=s(2);return g(_.editConfiguration((a=(a=d._id)!==null&&a!==void 0?a:d.id)!==null&&a!==void 0?a:"",i))}),n(3,"mat-icon",23),l(4,"edit"),o()(),n(5,"button",24),p("click",function(i){let a,d=f(t).$implicit,_=s(2);return g(_.deleteConfiguration((a=(a=d._id)!==null&&a!==void 0?a:d.id)!==null&&a!==void 0?a:"",i))}),n(6,"mat-icon",23),l(7,"delete"),o()()(),n(8,"div",25)(9,"div",26)(10,"span",27),l(11),o(),n(12,"div")(13,"h3",28),l(14),o(),n(15,"div",29)(16,"span",30),l(17),C(18,"uppercase"),C(19,"uppercase"),o(),x(20,H,2,0,"span",31),o()()()(),n(21,"p",32),l(22),o(),n(23,"div",33)(24,"div")(25,"span",34),l(26,"Steps"),o(),n(27,"span",35),l(28),o()(),n(29,"div")(30,"span",34),l(31,"Strategy"),o(),n(32,"span",36),l(33),o()()()()}if(r&2){let t=u.$implicit,e=s(2);c(11),h(e.getCountryFlag(t.country)),c(3),S(" ",t.name," "),c(3),w(" ",y(18,8,t.inputFormat)," \u2192 ",y(19,10,t.outputFormat)," "),c(3),m("ngIf",!t.isActive),c(2),S(" ",t.description||"No description provided."," "),c(6),h(t.steps.length),c(5),h(t.mergeStrategy.replace("-"," "))}}function Q(r,u){if(r&1&&(n(0,"div",18),x(1,K,34,12,"div",19),o()),r&2){let t=s();c(),m("ngForOf",t.configurations())}}var R=(()=>{class r{constructor(){this._smartBatchService=b(J),this._router=b(V),this.configurations=this._smartBatchService.configurations,this.isLoading=this._smartBatchService.isLoading}ngOnInit(){this._smartBatchService.getConfigurations().subscribe({next:()=>{let t=this.configurations();console.log("[SmartBatch] configurations loaded",{count:t?.length,configs:t?.map(e=>({_id:e._id,id:e.id,name:e.name,country:e.country,countryType:typeof e.country,countryJson:JSON.stringify(e.country)}))})},error:t=>console.error("[SmartBatch] getConfigurations error",t)})}createConfiguration(){this._router.navigate(["smart-batch/create"])}deleteConfiguration(t,e){e.stopPropagation(),confirm("Are you sure you want to delete this configuration?")&&this._smartBatchService.deleteConfiguration(t).subscribe()}editConfiguration(t,e){e.stopPropagation(),this._router.navigate(["smart-batch/edit",t])}openDashboard(t){let e=`/smart-batch/${t}`;if(console.log("[SmartBatch] openDashboard called",{id:t,idType:typeof t,idLength:t?.length,targetUrl:e,currentUrl:this._router.url}),!t){console.warn("[SmartBatch] openDashboard: id is falsy, skipping navigation");return}this._router.navigateByUrl(e).then(i=>{console.log("[SmartBatch] navigateByUrl result",{success:i,targetUrl:e}),i||console.warn("[SmartBatch] navigateByUrl returned false - route may not have matched")},i=>{console.error("[SmartBatch] navigateByUrl failed",{targetUrl:e,err:i})})}getCountryFlag(t){let e={colombia:"\u{1F1E8}\u{1F1F4}",col:"\u{1F1E8}\u{1F1F4}",co:"\u{1F1E8}\u{1F1F4}","united states":"\u{1F1FA}\u{1F1F8}",usa:"\u{1F1FA}\u{1F1F8}",us:"\u{1F1FA}\u{1F1F8}",peru:"\u{1F1F5}\u{1F1EA}",pe:"\u{1F1F5}\u{1F1EA}",world:"\u{1F310}",mexico:"\u{1F1F2}\u{1F1FD}",mx:"\u{1F1F2}\u{1F1FD}",brazil:"\u{1F1E7}\u{1F1F7}",br:"\u{1F1E7}\u{1F1F7}",chile:"\u{1F1E8}\u{1F1F1}",cl:"\u{1F1E8}\u{1F1F1}",argentina:"\u{1F1E6}\u{1F1F7}",ar:"\u{1F1E6}\u{1F1F7}",ecuador:"\u{1F1EA}\u{1F1E8}",ec:"\u{1F1EA}\u{1F1E8}",venezuela:"\u{1F1FB}\u{1F1EA}",ve:"\u{1F1FB}\u{1F1EA}",bolivia:"\u{1F1E7}\u{1F1F4}",bo:"\u{1F1E7}\u{1F1F4}",uruguay:"\u{1F1FA}\u{1F1FE}",uy:"\u{1F1FA}\u{1F1FE}",paraguay:"\u{1F1F5}\u{1F1FE}",py:"\u{1F1F5}\u{1F1FE}",panama:"\u{1F1F5}\u{1F1E6}",pa:"\u{1F1F5}\u{1F1E6}","costa rica":"\u{1F1E8}\u{1F1F7}",cr:"\u{1F1E8}\u{1F1F7}",guatemala:"\u{1F1EC}\u{1F1F9}",gt:"\u{1F1EC}\u{1F1F9}",honduras:"\u{1F1ED}\u{1F1F3}",hn:"\u{1F1ED}\u{1F1F3}","el salvador":"\u{1F1F8}\u{1F1FB}",sv:"\u{1F1F8}\u{1F1FB}","dominican republic":"\u{1F1E9}\u{1F1F4}","rep\xFAblica dominicana":"\u{1F1E9}\u{1F1F4}","republica dominicana":"\u{1F1E9}\u{1F1F4}",do:"\u{1F1E9}\u{1F1F4}",canada:"\u{1F1E8}\u{1F1E6}",ca:"\u{1F1E8}\u{1F1E6}",spain:"\u{1F1EA}\u{1F1F8}",es:"\u{1F1EA}\u{1F1F8}"},i=(t||"").trim().toLowerCase(),a=e[i]??"\u{1F3F3}\uFE0F";return(!t||a==="\u{1F3F3}\uFE0F")&&console.log("[SmartBatch] getCountryFlag",{raw:t,key:i,resolved:a,hasMatch:i in e}),a}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=k({type:r,selectors:[["smart-batch"]],decls:14,vars:3,consts:[[1,"flex","flex-col","w-full","h-full","bg-[#f8fafc]","dark:bg-[#0f172a]","p-6","gap-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","tracking-tight","text-slate-900","dark:text-white"],[1,"mt-1","text-slate-500","dark:text-slate-400"],["mat-flat-button","","color","primary",1,"!rounded-lg","!px-6","!py-2",3,"click"],[1,"mr-2","icon-size-5"],["class","flex flex-col items-center justify-center flex-1",4,"ngIf"],["class","flex flex-col items-center justify-center flex-1 border-2 border-dashed border-slate-200 dark:border-slate-800 rounded-2xl p-12 text-center",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","flex-1"],["diameter","48"],[1,"mt-4","text-slate-500"],[1,"flex","flex-col","items-center","justify-center","flex-1","border-2","border-dashed","border-slate-200","dark:border-slate-800","rounded-2xl","p-12","text-center"],[1,"w-20","h-20","bg-slate-50","dark:bg-slate-900","rounded-full","flex","items-center","justify-center","mb-6"],[1,"text-slate-400","icon-size-10"],[1,"text-lg","font-medium","text-slate-900","dark:text-white"],[1,"text-slate-500","dark:text-slate-400","max-w-sm","mt-2","mb-6"],["mat-stroked-button","","color","primary",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","group relative bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6 transition-all hover:shadow-md hover:border-blue-500/50 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"group","relative","bg-white","dark:bg-slate-900","rounded-2xl","border","border-slate-200","dark:border-slate-800","p-6","transition-all","hover:shadow-md","hover:border-blue-500/50","cursor-pointer",3,"click"],[1,"absolute","top-4","right-4","opacity-0","group-hover:opacity-100","transition-opacity","flex","gap-1"],["mat-icon-button","","matTooltip","Edit",3,"click"],[1,"icon-size-5"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-center","gap-3"],[1,"text-2xl"],[1,"font-semibold","text-slate-900","dark:text-white","line-clamp-1"],[1,"flex","items-center","gap-2","mt-0.5"],[1,"text-xs","font-medium","px-2","py-0.5","rounded-full","bg-slate-100","dark:bg-slate-800","text-slate-600","dark:text-slate-400"],["class","text-xs font-medium px-2 py-0.5 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",4,"ngIf"],[1,"text-sm","text-slate-500","dark:text-slate-400","mb-6","line-clamp-2","min-h-[2.5rem]"],[1,"grid","grid-cols-2","gap-4","pt-4","border-t","border-slate-100","dark:border-slate-800"],[1,"block","text-xs","text-slate-400","font-medium","uppercase","tracking-wider"],[1,"text-lg","font-semibold","text-slate-900","dark:text-white"],[1,"text-sm","font-medium","text-slate-700","dark:text-slate-300","capitalize","truncate"],[1,"text-xs","font-medium","px-2","py-0.5","rounded-full","bg-red-100","dark:bg-red-900/30","text-red-600","dark:text-red-400"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),l(4," Smart Batch "),o(),n(5,"p",3),l(6," Manage your automated batch processing configurations. "),o()(),n(7,"button",4),p("click",function(){return i.createConfiguration()}),n(8,"mat-icon",5),l(9,"add"),o(),l(10," Create Configuration "),o()(),x(11,q,4,0,"div",6)(12,G,10,0,"div",7)(13,Q,2,1,"div",8),o()),e&2&&(c(11),m("ngIf",i.isLoading()),c(),m("ngIf",!i.isLoading()&&i.configurations().length===0),c(),m("ngIf",!i.isLoading()&&i.configurations().length>0))},dependencies:[T,E,I,M,N,F,L,D,j,z,U,P,O,A,$],encapsulation:2})}}return r})();var gt=[{path:"",component:R},{path:"create",loadComponent:()=>import("./chunk-67E7UEAC.js").then(r=>r.CreateBatchConfigComponent)},{path:"edit/:id",loadComponent:()=>import("./chunk-67E7UEAC.js").then(r=>r.CreateBatchConfigComponent)},{path:":configId",loadComponent:()=>import("./chunk-H55LW56P.js").then(r=>r.BatchDashboardComponent)},{path:":configId/batch/new",loadComponent:()=>import("./chunk-V3LIAS6A.js").then(r=>r.CreateBatchComponent)}];export{gt as default};
