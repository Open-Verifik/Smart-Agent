import{Ga as l,Z as i,aa as o,fa as m,id as h,nd as p,q as a}from"./chunk-IQHBJK6X.js";var C=(()=>{class s{constructor(t){this._httpClient=t,this.templates=l([]),this.reports=l([]),this.isLoading=l(!1)}getTemplates(t){let e={};return t&&(e={batchConfiguration:t}),this._httpClient.get(`${p.apiUrl}/v2/smart-report-templates`,{params:e}).pipe(a(r=>r.data),i(r=>this.templates.set(r)))}getTemplate(t){return this._httpClient.get(`${p.apiUrl}/v2/smart-report-templates/${t}`).pipe(a(e=>e.data))}createTemplate(t){return this._httpClient.post(`${p.apiUrl}/v2/smart-report-templates`,t).pipe(a(e=>e.data),i(e=>{this.templates.update(r=>[e,...r])}))}updateTemplate(t,e){return this._httpClient.put(`${p.apiUrl}/v2/smart-report-templates/${t}`,e).pipe(a(r=>r.data),i(r=>{this.templates.update(d=>d.map(n=>n._id===t?r:n))}))}deleteTemplate(t){return this._httpClient.delete(`${p.apiUrl}/v2/smart-report-templates/${t}`).pipe(i(()=>{this.templates.update(e=>e.filter(r=>r._id!==t))}))}sendTemplateSample(t,e){return this._httpClient.post(`${p.apiUrl}/v2/smart-report-templates/${t}/send-sample`,e)}getReports(t){let e={};return t&&(e={smartBatch:t}),this._httpClient.get(`${p.apiUrl}/v2/smart-reports`,{params:e}).pipe(a(r=>r.data),i(r=>this.reports.set(r)))}getReport(t){return this._httpClient.get(`${p.apiUrl}/v2/smart-reports/${t}`).pipe(a(e=>e.data))}createReport(t){return this._httpClient.post(`${p.apiUrl}/v2/smart-reports`,t).pipe(a(e=>e.data),i(e=>{this.reports.update(r=>[e,...r])}))}generateReport(t,e){let r={};return e?.engine&&(r.engine=e.engine),e?.rowIndex!=null&&(r.rowIndex=e.rowIndex),this._httpClient.post(`${p.apiUrl}/v2/smart-reports/${t}/generate`,Object.keys(r).length?r:{})}sendReportEmail(t,e){return this._httpClient.post(`${p.apiUrl}/v2/smart-reports/${t}/send-email`,e)}getReportDownloadUrl(t){return`${p.apiUrl}/v2/smart-reports/${t}/download`}downloadReport(t){return this._httpClient.get(`${p.apiUrl}/v2/smart-reports/${t}/download`,{responseType:"blob"})}static{this.\u0275fac=function(e){return new(e||s)(m(h))}}static{this.\u0275prov=o({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{C as a};
