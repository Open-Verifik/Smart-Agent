var c=class{static isTokenExpired(e,t){if(!e||e===""||e.trim()===""||e.split(".").length!==3)return!0;let r=null;try{r=this._getTokenExpirationDate(e)}catch(n){return console.warn("Failed to decode token:",n),!0}return t=t||0,r===null?!1:!(r.valueOf()>new Date().valueOf()+t*1e3)}static _b64decode(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="";if(e=String(e).replace(/=+$/,""),e.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let n=0,a,o,i=0;o=e.charAt(i++);~o&&(a=n%4?a*64+o:o,n++%4)?r+=String.fromCharCode(255&a>>(-2*n&6)):0)o=t.indexOf(o);return r}static _b64DecodeUnicode(e){return decodeURIComponent(Array.prototype.map.call(this._b64decode(e),t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join(""))}static _urlBase64Decode(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:{t+="==";break}case 3:{t+="=";break}default:throw Error("Illegal base64url string!")}return this._b64DecodeUnicode(t)}static _decodeToken(e){if(!e)return null;let t=e.split(".");if(t.length!==3)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");let r=this._urlBase64Decode(t[1]);if(!r)throw new Error("Cannot decode the token.");return JSON.parse(r)}static _getTokenExpirationDate(e){let t=this._decodeToken(e);if(!t.hasOwnProperty("exp"))return null;let r=new Date(0);return r.setUTCSeconds(t.exp),r}};export{c as a};
