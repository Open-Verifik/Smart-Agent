import{a as $e,b as Ue,d as Oe}from"./chunk-FNUVZNAH.js";import"./chunk-NJIOGT5G.js";import"./chunk-3RK6DDJD.js";import{b as _e}from"./chunk-FTR6VSJR.js";import"./chunk-R7IQK6BA.js";import"./chunk-PPR6B3WP.js";import"./chunk-6NNMKUVI.js";import"./chunk-ONKRC3DQ.js";import"./chunk-SQD76WQA.js";import"./chunk-63QA6JG3.js";import{a as Z,b as G}from"./chunk-7U2G2KZB.js";import{b as He}from"./chunk-PYZHX3FX.js";import{a as ne,b as ae,c as re,e as oe,f as R}from"./chunk-GPCJZ5RP.js";import{c as L,d as j}from"./chunk-O3FTPSYR.js";import{e as Le,i as je}from"./chunk-46LJSX56.js";import"./chunk-UXIZKI5R.js";import{A as le,I as pe,J as fe,M as me,o as Ne,p as de,u as se,y as ce}from"./chunk-7QY3DY6J.js";import"./chunk-U3XHEUVP.js";import{a as U}from"./chunk-DGHNMBSS.js";import{X as V,Z as P,_ as F}from"./chunk-P6URDTDE.js";import{Aa as be,Bc as he,D as z,Eb as t,Fb as i,Ga as M,Gb as _,Hb as H,Ib as N,Kb as w,L as I,Mb as h,Mc as Te,Nb as u,Nc as W,Oc as T,Pc as Be,Qc as Re,Rc as Ve,Sa as ee,Uc as Pe,Vc as te,Wa as r,Xb as o,Yb as f,Z as D,Zb as b,Zc as Fe,_b as ze,aa as J,ac as O,ad as B,bc as Y,cc as q,fa as Q,fb as A,fc as Me,ga as k,hc as De,id as ie,l as Se,lb as x,m as S,mc as s,nc as c,oc as Ae,qa as v,ra as y,sa as X,sb as p,tb as Ee,ub as $,w as Ie}from"./chunk-EDXCCCUI.js";import{a as ke,b as we}from"./chunk-MG3ERZGY.js";var ue=(()=>{class a{constructor(e){this._httpClient=e,this.cards=M([]),this.balance=M(null),this.autoRechargeConfig=M(null),this.loading=M(!1),this.error=M(null),this.apiUrl=U.apiUrl,this._userService=k($e),this._userService.user$.subscribe(d=>{d&&this.updateBalanceFromUser(d)})}updateBalanceFromUser(e){try{let d=Number(e.credits)||0,n=Math.round(d*100)/100,l={credits:Math.round(d*100)/100,totalCredits:n};this.balance.set(l)}catch(d){console.error("Error updating balance from user:",d)}}getCards(e="stripe"){this.loading.set(!0),this.error.set(null);let d=localStorage.getItem("accessToken"),n=d?{Authorization:`Bearer ${d}`}:{},l={"populates[]":"client",where_gatewayProvider:e};return this._httpClient.get(`${this.apiUrl}/v2/credit-cards`,{headers:n,params:l}).pipe(D(g=>{this.cards.set(g.data||[])}),z(g=>(console.error("Error fetching cards:",g),this.error.set("Failed to load payment cards"),S(()=>g))),I(()=>{this.loading.set(!1)}))}refreshBalance(){this.getBalance().subscribe()}getBalance(){this.loading.set(!0),this.error.set(null);try{let e=localStorage.getItem("verifik_account")||localStorage.getItem("user"),d=e?JSON.parse(e):null;if(d){let n=Number(d.credits)||0,l=Math.round(n*100)/100,g={credits:Math.round(n*100)/100,totalCredits:l};this.balance.set(g)}else this.balance.set({credits:0,totalCredits:0})}catch(e){console.error("Error parsing user data:",e),this.error.set("Failed to load credit balance"),this.balance.set({credits:0,totalCredits:0})}finally{this.loading.set(!1)}return Se({data:this.balance()})}setDefaultCard(e){this.loading.set(!0),this.error.set(null);let d=localStorage.getItem("accessToken"),n=d?{Authorization:`Bearer ${d}`}:{};return this._httpClient.put(`${this.apiUrl}/v2/credit-cards/${e}/default`,{},{headers:n}).pipe(D(l=>{this.cards.set(l.data||[])}),z(l=>(console.error("Error setting default card:",l),this.error.set("Failed to set default card"),S(()=>l))),I(()=>{this.loading.set(!1)}))}deleteCard(e){this.loading.set(!0),this.error.set(null);let d=localStorage.getItem("accessToken"),n=d?{Authorization:`Bearer ${d}`}:{};return this._httpClient.delete(`${this.apiUrl}/v2/credit-cards/${e}`,{headers:n}).pipe(D(()=>{this.cards.update(l=>l.filter(g=>g._id!==e))}),z(l=>(console.error("Error deleting card:",l),this.error.set("Failed to delete card"),S(()=>l))),I(()=>{this.loading.set(!1)}))}getAutoRechargeConfig(){this.loading.set(!0),this.error.set(null);let e=localStorage.getItem("accessToken"),d=e?{Authorization:`Bearer ${e}`}:{};return this._httpClient.get(`${this.apiUrl}/v2/client-settings?findOne=true`,{headers:d}).pipe(D(n=>{this.autoRechargeConfig.set(n.data?.autoCharge||null)}),z(n=>(console.error("Error fetching auto-recharge config:",n),this.error.set("Failed to load auto-recharge settings"),S(()=>n))),I(()=>{this.loading.set(!1)}))}updateAutoRechargeConfig(e){this.loading.set(!0),this.error.set(null);let d=localStorage.getItem("accessToken"),n=d?{Authorization:`Bearer ${d}`}:{},l=localStorage.getItem("verifik_account")||localStorage.getItem("user"),g;try{if(g=(l&&l!=="undefined"&&l!=="null"?JSON.parse(l):null)?._id,!g)throw new Error("User ID not found")}catch(C){return console.error("Error parsing user data:",C),this.error.set("Failed to get user information"),this.loading.set(!1),S(()=>new Error("User ID not found"))}return this._httpClient.post(`${this.apiUrl}/v2/client-settings`,{client:g,autoCharge:e},{headers:n}).pipe(D(C=>{this.autoRechargeConfig.set(C.data?.autoCharge||null)}),z(C=>(console.error("Error updating auto-recharge config:",C),this.error.set("Failed to update auto-recharge settings"),S(()=>C))),I(()=>{this.loading.set(!1)}))}static{this.\u0275fac=function(d){return new(d||a)(Q(ie))}}static{this.\u0275prov=J({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();function Xe(a,m){if(a&1&&(t(0,"div",19)(1,"mat-icon"),o(2,"error_outline"),i(),t(3,"p"),o(4),i()()),a&2){let e=u();r(4),f(e.error)}}function et(a,m){a&1&&(t(0,"span",48),X(),t(1,"svg",49),_(2,"path",50),i()())}function tt(a,m){a&1&&(t(0,"span",51),X(),t(1,"svg",49),_(2,"circle",52)(3,"circle",53)(4,"path",54),i()())}function it(a,m){a&1&&(t(0,"span",55),X(),t(1,"svg",49),_(2,"rect",56)(3,"path",57),i()())}function nt(a,m){a&1&&(t(0,"mat-icon",58),o(1,"credit_card"),i())}function at(a,m){a&1&&(t(0,"span",59),o(1),s(2,"transloco"),i()),a&2&&(r(),f(c(2,1,"addCredits.autoRecharge.dialog.default")))}function rt(a,m){if(a&1&&(t(0,"div",37)(1,"div",38),H(2,39),x(3,et,3,0,"span",40)(4,tt,5,0,"span",41)(5,it,4,0,"span",42)(6,nt,2,0,"mat-icon",43),N(),i(),t(7,"div",44)(8,"span",45),o(9),i(),t(10,"span",46),o(11),s(12,"titlecase"),i()(),x(13,at,3,3,"span",47),i()),a&2){let e=u().$implicit;r(2),p("ngSwitch",e.brand==null?null:e.brand.toLowerCase()),r(),p("ngSwitchCase","visa"),r(),p("ngSwitchCase","mastercard"),r(),p("ngSwitchCase","amex"),r(4),b("\u2022\u2022\u2022\u2022 ",e.lastFour,""),r(2),f(c(12,7,e.brand)),r(2),p("ngIf",e.isDefault)}}function ot(a,m){if(a&1&&(H(0),x(1,rt,14,9,"div",36),N()),a&2){let e=m.$implicit,d=u(4);r(),p("ngIf",e._id===d.selectedCardId)}}function dt(a,m){if(a&1&&(t(0,"div",34),x(1,ot,2,1,"ng-container",35),i()),a&2){let e=u(3);r(),p("ngForOf",e.data.cards)}}function st(a,m){if(a&1&&(t(0,"div",31)(1,"label",32),o(2),s(3,"transloco"),i(),x(4,dt,2,1,"div",33),i()),a&2){let e=u(2);r(2),f(c(3,2,"addCredits.autoRecharge.dialog.paymentMethod")),r(2),p("ngIf",e.selectedCardId)}}function ct(a,m){if(a&1){let e=w();t(0,"div",20)(1,"div",21)(2,"div",22)(3,"label",23),o(4),s(5,"transloco"),i(),t(6,"div",24)(7,"span",25),o(8,"$"),i(),t(9,"input",26),q("ngModelChange",function(n){v(e);let l=u();return Y(l.minThreshold,n)||(l.minThreshold=n),y(n)}),i(),t(10,"span",27),o(11,"USD"),i()(),t(12,"p",28),o(13),s(14,"transloco"),i()(),t(15,"div",22)(16,"label",23),o(17),s(18,"transloco"),i(),t(19,"div",24)(20,"span",25),o(21,"$"),i(),t(22,"input",29),q("ngModelChange",function(n){v(e);let l=u();return Y(l.minRecharge,n)||(l.minRecharge=n),y(n)}),i(),t(23,"span",27),o(24,"USD"),i()(),t(25,"p",28),o(26),s(27,"transloco"),i()()(),x(28,st,5,4,"div",30),i()}if(a&2){let e=u();r(4),f(c(5,7,"addCredits.autoRecharge.dialog.balanceThreshold")),r(5),O("ngModel",e.minThreshold),r(4),f(c(14,9,"addCredits.autoRecharge.dialog.balanceThresholdHint")),r(4),f(c(18,11,"addCredits.autoRecharge.dialog.rechargeAmount")),r(5),O("ngModel",e.minRecharge),r(4),f(c(27,13,"addCredits.autoRecharge.dialog.rechargeAmountHint")),r(2),p("ngIf",(e.data==null?null:e.data.cards)&&e.data.cards.length>0)}}function lt(a,m){a&1&&_(0,"mat-spinner",60)}function pt(a,m){a&1&&(t(0,"span"),o(1,"Save Settings"),i())}var qe=(()=>{class a{constructor(){this._dialogRef=k(ne),this._creditsService=k(ue),this.data=k(ae),this.enabled=!1,this.minThreshold=10,this.minRecharge=20,this.loading=!1,this.error=null}ngOnInit(){this.data?.config&&(this.enabled=this.data.config.hasAutoCharge||!1,this.minThreshold=this.data.config.minThreshold||10,this.minRecharge=this.data.config.minRecharge||20,this.selectedCardId=this.data.config.cardId),this.data?.cards?.length&&(this.data.cards.sort((e,d)=>(Number(d.isDefault)||0)-(Number(e.isDefault)||0)),this.selectedCardId||(this.selectedCardId=this.data.cards[0]._id))}selectCard(e){this.loading||(this.selectedCardId=e)}close(){this._dialogRef.close()}save(){if(this.enabled&&!this.selectedCardId){this.error="Please select a payment method for auto-recharge";return}if(this.enabled){if(this.minRecharge<20||this.minRecharge>2e3){this.error="Recharge amount must be between $20 and $2000";return}if(this.minThreshold<10||this.minThreshold>1990){this.error="Threshold amount must be between $10 and $1990";return}}this.loading=!0,this.error=null;let e={hasAutoCharge:this.enabled,minThreshold:this.minThreshold,minRecharge:this.minRecharge,cardId:this.enabled?this.selectedCardId:void 0};this._creditsService.updateAutoRechargeConfig(e).subscribe({next:()=>{this.loading=!1,this._dialogRef.close("success")},error:d=>{this.loading=!1,this.error=d.error?.message||"Failed to save auto-recharge settings"}})}static{this.\u0275fac=function(d){return new(d||a)}}static{this.\u0275cmp=A({type:a,selectors:[["app-auto-recharge-settings"]],decls:28,vars:21,consts:[[1,"auto-recharge-dialog"],[1,"dialog-header"],[1,"dialog-title"],[1,"dialog-subtitle"],[1,"p-2"],["class","error-message",4,"ngIf"],[1,"enable-card"],[1,"enable-info"],[1,"enable-title"],[1,"enable-desc"],[1,"switch"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"slider"],["class","settings-group",4,"ngIf"],[1,"dialog-actions"],["type","button",1,"cancel-button",3,"click","disabled"],["type","button",1,"save-button",3,"click","disabled"],["diameter","20",4,"ngIf"],[4,"ngIf"],[1,"error-message"],[1,"settings-group"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-8"],[1,"input-container"],[1,"input-label"],[1,"premium-input-wrapper"],[1,"input-prefix"],["type","number","placeholder","10","min","10","max","1990",3,"ngModelChange","ngModel"],[1,"input-suffix"],[1,"input-hint"],["type","number","placeholder","20","min","20","max","2000",3,"ngModelChange","ngModel"],["class","section",4,"ngIf"],[1,"section"],[1,"section-label"],["class","card-display",4,"ngIf"],[1,"card-display"],[4,"ngFor","ngForOf"],["class","selected-card",4,"ngIf"],[1,"selected-card"],[1,"card-icon-wrapper"],[3,"ngSwitch"],["class","card-brand-icon visa",4,"ngSwitchCase"],["class","card-brand-icon mastercard",4,"ngSwitchCase"],["class","card-brand-icon amex",4,"ngSwitchCase"],["class","card-brand-mat-icon",4,"ngSwitchDefault"],[1,"card-details"],[1,"card-number"],[1,"card-brand-name"],["class","default-badge",4,"ngIf"],[1,"card-brand-icon","visa"],["viewBox","0 0 48 48","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M18.8 32H15.1L17.4 17.5H21.1L18.8 32ZM32.5 17.7C31.7 17.3 30.5 17 29.2 17C24.9 17 21.8 19.3 21.8 22.5C21.8 24.9 24 26.3 25.7 27.1C27.4 27.9 28 28.5 28 29.3C28 30.6 26.5 31.1 25.2 31.1C24 31.1 23 30.8 22.1 30.4L21.7 30.2L21.3 32.7C22 33 23.4 33.3 24.8 33.4C29.4 33.4 32.4 31.1 32.4 27.6C32.4 21.9 24.5 21.6 24.5 19.4C24.5 18.7 25.1 18 26.5 17.8C27.2 17.7 28.6 17.6 30.1 18.2L30.6 18.4L31 16L32.5 17.7ZM42.5 17.5H39C38.1 17.5 37.4 18 37 18.8L31.5 32H35.3L36 29.8H40.7L41.2 32H44.6L42.5 17.5ZM37.2 26.8L39.2 21.1L40.2 26.8H37.2ZM13.8 17.5L10.1 27.4L8.7 18.4L8.3 17.5H4L4.1 17.8L7.6 32H11.5L17.4 17.5H13.8Z","fill","#1A1F71"],[1,"card-brand-icon","mastercard"],["cx","18","cy","24","r","12","fill","#EB001B","fill-opacity","0.8"],["cx","30","cy","24","r","12","fill","#F79E1B","fill-opacity","0.8"],["d","M24 16.5C21.6 18.5 20.2 21.3 20.2 24.5C20.2 27.7 21.6 30.5 24 32.5C26.4 30.5 27.8 27.7 27.8 24.5C27.8 21.3 26.4 18.5 24 16.5Z","fill","#FF5F00"],[1,"card-brand-icon","amex"],["width","48","height","32","rx","4","fill","#006FCF"],["d","M12 24L10 18H8L12 24ZM12 24L14 30H16L12 24ZM30 18H24V30H30V18ZM28 28H26V20H28V28ZM38 18H32V30H38V18ZM36 28H34V20H36V28ZM22 18H16V30H22V18ZM20 28H18V20H20V28Z","fill","white"],[1,"card-brand-mat-icon"],[1,"default-badge"],["diameter","20"]],template:function(d,n){d&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),o(3),s(4,"transloco"),i(),t(5,"p",3),o(6),s(7,"transloco"),i()(),t(8,"mat-dialog-content",4),x(9,Xe,5,1,"div",5),t(10,"div",6)(11,"div",7)(12,"h3",8),o(13),s(14,"transloco"),i(),t(15,"p",9),o(16),s(17,"transloco"),i()(),t(18,"label",10)(19,"input",11),q("ngModelChange",function(g){return Y(n.enabled,g)||(n.enabled=g),g}),i(),_(20,"span",12),i()(),x(21,ct,29,15,"div",13),i(),t(22,"div",14)(23,"button",15),h("click",function(){return n.close()}),o(24," Cancel "),i(),t(25,"button",16),h("click",function(){return n.save()}),x(26,lt,1,0,"mat-spinner",17)(27,pt,2,0,"span",18),i()()()),d&2&&(r(3),f(c(4,13,"addCredits.autoRecharge.dialog.title")),r(3),f(c(7,15,"addCredits.autoRecharge.dialog.subtitle")),r(3),p("ngIf",n.error),r(),$("active",n.enabled),r(3),f(c(14,17,"addCredits.autoRecharge.dialog.enable")),r(3),f(c(17,19,"addCredits.autoRecharge.dialog.enableDesc")),r(3),O("ngModel",n.enabled),r(2),p("ngIf",n.enabled),r(2),p("disabled",n.loading),r(2),p("disabled",n.loading),r(),p("ngIf",n.loading),r(),p("ngIf",!n.loading))},dependencies:[B,W,T,Be,Re,Ve,te,me,de,le,Ne,se,fe,pe,ce,R,oe,V,F,P,j,L,G,Z],styles:[`.auto-recharge-dialog{padding:12px;background:#fff;border-radius:20px;width:100%;max-width:680px;margin:0 auto}:host-context(.dark) .auto-recharge-dialog{background:#1e293b}.dialog-header{text-align:left;margin-bottom:40px}.dialog-title{font-size:28px;font-weight:800;color:#0f172a;margin-bottom:8px;letter-spacing:-.02em}:host-context(.dark) .dialog-title{color:#fff}.dialog-subtitle{font-size:15px;color:#475569}:host-context(.dark) .dialog-subtitle{color:#ffffffb3}.enable-card{display:flex;align-items:center;justify-content:space-between;padding:24px;background:#f8fafc;border:1px solid #e2e8f0;border-radius:16px;margin-bottom:32px;transition:all .2s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .enable-card{background:#1e293b80;border-color:#ffffff14}.enable-card.active{border-color:#6366f14d;background:#6366f10a}.enable-info .enable-title{font-size:16px;font-weight:700;color:#0f172a;margin-bottom:4px}:host-context(.dark) .enable-info .enable-title{color:#fff}.enable-info .enable-desc{font-size:14px;color:#475569}.switch{position:relative;display:inline-block;width:48px;height:24px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;inset:0;background-color:#cbd5e1;transition:all .2s cubic-bezier(.4,0,.2,1);border-radius:24px}:host-context(.dark) .slider{background-color:#475569}.slider:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:all .2s cubic-bezier(.4,0,.2,1);border-radius:50%}input:checked+.slider{background:linear-gradient(135deg,#6366f1,#8b5cf6,#a855f7)}input:checked+.slider:before{transform:translate(24px)}.settings-group{animation:slideDown .3s ease-out}@keyframes slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.input-container{display:flex;flex-direction:column;gap:8px}.input-label{font-size:14px;font-weight:600;color:#0f172a}:host-context(.dark) .input-label{color:#fff}.premium-input-wrapper{display:flex;align-items:center;background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:0 16px;transition:all .2s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .premium-input-wrapper{background:#0f172a;border-color:#ffffff14}.premium-input-wrapper:focus-within{border-color:#8b5cf6;box-shadow:0 0 0 4px #8b5cf61a}.premium-input-wrapper .input-prefix{font-size:16px;font-weight:600;color:#94a3b8;margin-right:2px}.premium-input-wrapper input{flex:1;padding:14px 0;background:transparent;border:none;outline:none;font-size:16px;font-weight:600;color:#0f172a}:host-context(.dark) .premium-input-wrapper input{color:#fff}.premium-input-wrapper .input-suffix{font-size:13px;font-weight:700;color:#94a3b8}.section-label{display:block;font-size:14px;font-weight:700;color:#0f172a;margin-bottom:16px;margin-top:32px}:host-context(.dark) .section-label{color:#fff}.card-display{display:block}.selected-card{display:flex;align-items:center;gap:16px;padding:16px 20px;background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;width:100%;transition:all .2s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .selected-card{background:#1e293b4d;border-color:#ffffff14}.card-icon-wrapper{width:44px;height:28px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:4px;border:1px solid #e2e8f0;overflow:hidden}.card-icon-wrapper svg{width:100%;height:100%;object-fit:contain;max-width:24px;max-height:24px}.card-icon-wrapper mat-icon{font-size:20px;width:20px;height:20px;color:#475569}.card-details{flex:1}.card-number{display:block;font-size:15px;font-weight:600}.card-brand-name{font-size:13px;color:#475569}.default-badge{font-size:11px;font-weight:700;color:#10b981;background:#10b9811a;padding:4px 8px;border-radius:6px;text-transform:uppercase}.dialog-actions{display:flex;gap:16px;margin-top:40px}.cancel-button{flex:1;padding:14px;background:transparent;border:1px solid #e2e8f0;border-radius:10px;color:#475569;font-size:15px;font-weight:600}.save-button{flex:2;padding:14px;background:linear-gradient(135deg,#6366f1,#8b5cf6,#a855f7);border:none;border-radius:10px;color:#fff;font-size:15px;font-weight:700;display:flex;align-items:center;justify-content:center;gap:8px}.error-message{display:flex;align-items:center;gap:12px;padding:16px;background:#ef44440d;border:1px solid rgba(239,68,68,.1);border-radius:12px;margin-bottom:24px;color:#ef4444}
`],encapsulation:2})}}return a})();var ft=(a,m)=>({"is-default":a,"is-expired":m});function mt(a,m){a&1&&(t(0,"span",24),_(1,"span",25),o(2," Default "),i())}function ut(a,m){a&1&&(t(0,"span",26)(1,"mat-icon",27),o(2,"warning"),i(),o(3," Expired "),i())}function gt(a,m){if(a&1){let e=w();t(0,"button",28),h("click",function(){v(e);let n=u();return y(n.onSetDefault())}),t(1,"mat-icon"),o(2,"check_circle"),i(),t(3,"span"),o(4),s(5,"transloco"),i()()}a&2&&(r(4),f(c(5,1,"addCredits.paymentMethods.setDefault")))}function xt(a,m){a&1&&(t(0,"div",29)(1,"mat-icon"),o(2,"verified"),i(),t(3,"span"),o(4),s(5,"transloco"),i()()),a&2&&(r(4),f(c(5,1,"addCredits.paymentMethods.cardDefault")))}function bt(a,m){a&1&&_(0,"div",30)}var We=(()=>{class a{constructor(){this.isDefault=!1,this.setDefault=new be,this.delete=new be,this._dialog=k(re)}getCardLogo(e){return{visa:"https://cdn.verifik.co/assets/billing-svg/VisaLogo.svg",mastercard:"https://cdn.verifik.co/assets/billing-svg/MasterCardLogo.svg",amex:"https://cdn.verifik.co/assets/billing-svg/AmericanExpressLogo.svg"}[e.toLowerCase()]||""}isExpired(e){let d=_e.now(),n=_e.fromFormat(e,"yyyy-MM");return d>n}onSetDefault(){!this.isDefault&&!this.isExpired(this.card.expires_at)&&this.setDefault.emit(this.card._id)}onDelete(){confirm("Are you sure you want to delete this payment card?")&&this.delete.emit(this.card._id)}static{this.\u0275fac=function(d){return new(d||a)}}static{this.\u0275cmp=A({type:a,selectors:[["app-payment-card"]],inputs:{card:"card",isDefault:"isDefault"},outputs:{setDefault:"setDefault",delete:"delete"},decls:42,vars:26,consts:[[1,"payment-card-modern",3,"ngClass"],[1,"card-inner"],[1,"card-header"],[1,"brand-section"],[1,"brand-logo-wrapper"],[1,"brand-logo",3,"src","alt"],[1,"brand-name"],[1,"status-tags"],["class","status-tag default-tag",4,"ngIf"],["class","status-tag expired-tag",4,"ngIf"],[1,"card-number-section"],[1,"card-number"],[1,"number-dots"],[1,"number-last"],[1,"card-details"],[1,"detail-item","cardholder"],[1,"detail-label"],[1,"detail-value"],[1,"detail-item","expires"],[1,"card-actions"],["class","action-button set-default-button",3,"click",4,"ngIf"],["class","default-message",4,"ngIf"],[1,"action-button","delete-button",3,"click","disabled"],["class","card-glow",4,"ngIf"],[1,"status-tag","default-tag"],[1,"tag-dot"],[1,"status-tag","expired-tag"],[1,"tag-icon"],[1,"action-button","set-default-button",3,"click"],[1,"default-message"],[1,"card-glow"]],template:function(d,n){d&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),_(5,"img",5),i(),t(6,"span",6),o(7),s(8,"titlecase"),i()(),t(9,"div",7),x(10,mt,3,0,"span",8)(11,ut,4,0,"span",9),i()(),t(12,"div",10)(13,"div",11)(14,"span",12),o(15,"\u2022\u2022\u2022\u2022"),i(),t(16,"span",12),o(17,"\u2022\u2022\u2022\u2022"),i(),t(18,"span",12),o(19,"\u2022\u2022\u2022\u2022"),i(),t(20,"span",13),o(21),i()()(),t(22,"div",14)(23,"div",15)(24,"span",16),o(25),s(26,"transloco"),i(),t(27,"span",17),o(28),i()(),t(29,"div",18)(30,"span",16),o(31),s(32,"transloco"),i(),t(33,"span",17),o(34),i()()(),t(35,"div",19),x(36,gt,6,3,"button",20)(37,xt,6,3,"div",21),t(38,"button",22),h("click",function(){return n.onDelete()}),t(39,"mat-icon"),o(40,"delete_outline"),i()()()(),x(41,bt,1,0,"div",23),i()),d&2&&(p("ngClass",De(23,ft,n.isDefault&&!n.isExpired(n.card.expires_at),n.isExpired(n.card.expires_at))),r(5),p("src",n.getCardLogo(n.card.brand),ee)("alt",n.card.brand),r(2),f(c(8,17,n.card.brand)),r(3),p("ngIf",n.isDefault&&!n.isExpired(n.card.expires_at)),r(),p("ngIf",n.isExpired(n.card.expires_at)),r(10),f(n.card.lastFour),r(4),f(c(26,19,"addCredits.paymentMethods.cardholder")),r(3),f(n.card.name),r(3),f(c(32,21,"addCredits.paymentMethods.expires")),r(3),f(n.card.expires_at),r(2),p("ngIf",!n.isDefault&&!n.isExpired(n.card.expires_at)),r(),p("ngIf",n.isDefault&&!n.isExpired(n.card.expires_at)),r(),$("disabled",n.isDefault),p("disabled",n.isDefault),r(3),p("ngIf",n.isDefault&&!n.isExpired(n.card.expires_at)))},dependencies:[B,Te,T,te,V,F,P,He,R,j,L],styles:[`.payment-card-modern{position:relative;transition:all .3s cubic-bezier(.4,0,.2,1)}.payment-card-modern:hover{transform:translateY(-2px)}.payment-card-modern:hover .card-inner{border-color:#6366f133;box-shadow:0 8px 24px #0000000f}:host-context(.dark) .payment-card-modern:hover .card-inner{border-color:#ffffff26;box-shadow:0 8px 24px #00000040}.payment-card-modern.is-default .card-inner{border-color:#6366f14d;background:linear-gradient(135deg,#6366f108,#8b5cf603);box-shadow:0 0 0 1px #6366f11a,0 4px 12px #6366f10d}:host-context(.dark) .payment-card-modern.is-default .card-inner{border-color:#8b5cf666;background:linear-gradient(135deg,#8b5cf61a,#6366f10d);box-shadow:0 0 0 1px #8b5cf61a,0 4px 12px #0003}.payment-card-modern.is-default:hover .card-inner{border-color:#6366f180}:host-context(.dark) .payment-card-modern.is-default:hover .card-inner{border-color:#8b5cf699}.payment-card-modern.is-expired .card-inner{border-color:#ef444440;background:linear-gradient(135deg,rgba(239,68,68,.04),transparent)}:host-context(.dark) .payment-card-modern.is-expired .card-inner{border-color:#ef44444d;background:linear-gradient(135deg,#ef444414,#1e293b99)}.payment-card-modern.is-expired .card-number .number-last{color:#ef4444}.card-inner{background:#fff;border:1px solid #e2e8f0;border-radius:16px;padding:24px;position:relative;z-index:1;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 1px 3px #0000000a}:host-context(.dark) .card-inner{background:#1e293b99;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-color:#ffffff14;box-shadow:none}.card-glow{position:absolute;inset:-2px;background:linear-gradient(135deg,#6366f1,#8b5cf6,#a855f7);border-radius:18px;opacity:.08;filter:blur(20px);z-index:0;transition:all .3s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .card-glow{opacity:.15}.payment-card-modern:hover .card-glow{opacity:.12;filter:blur(25px)}:host-context(.dark) .payment-card-modern:hover .card-glow{opacity:.25}.card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}.brand-section{display:flex;align-items:center;gap:12px}.brand-logo-wrapper{width:48px;height:32px;display:flex;align-items:center;justify-content:center;background:#fff;border:1px solid rgba(0,0,0,.05);box-shadow:0 2px 4px #00000005;border-radius:8px;padding:6px 10px;flex-shrink:0}:host-context(.dark) .brand-logo-wrapper{background:#ffffff0d;border-color:#ffffff1a;box-shadow:none}.brand-logo{height:20px;width:auto;max-width:100%;object-fit:contain;display:block;opacity:1!important}.brand-logo[src=""],.brand-logo:not([src]){display:none}.brand-name{font-size:15px;font-weight:600;color:#0f172a}:host-context(.dark) .brand-name{color:#fff}.status-tags{display:flex;gap:8px}.status-tag{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:100px;font-size:12px;font-weight:600}.status-tag.default-tag{background:#6366f11a;color:#8b5cf6}:host-context(.dark) .status-tag.default-tag{background:#8b5cf626}.status-tag.expired-tag{background:#ef44441a;color:#ef4444}:host-context(.dark) .status-tag.expired-tag{background:#ef444426}.status-tag.expired-tag .tag-icon{font-size:14px;width:14px;height:14px}.tag-dot{width:6px;height:6px;border-radius:50%;background:#8b5cf6;box-shadow:0 0 8px #6366f199}.card-number-section{margin-bottom:24px}.card-number{display:flex;align-items:center;gap:12px;font-family:IBM Plex Mono,SF Mono,Menlo,monospace;font-size:20px;letter-spacing:3px;font-weight:500}.number-dots{color:#94a3b8;font-weight:500}:host-context(.dark) .number-dots{color:#fff6}.number-last{color:#0f172a;font-weight:700}:host-context(.dark) .number-last{color:#fff}.card-details{display:grid;grid-template-columns:1fr auto;gap:24px;padding:20px 0;margin-bottom:0}:host-context(.dark) .card-details{border-top-color:#ffffff14;border-bottom-color:#ffffff14}.detail-item{display:flex;flex-direction:column;gap:4px}.detail-label{font-size:11px;font-weight:500;color:#94a3b8;text-transform:uppercase;letter-spacing:.05em}:host-context(.dark) .detail-label{color:#fff6}.detail-value{font-size:14px;font-weight:600;color:#0f172a}:host-context(.dark) .detail-value{color:#fff}.cardholder .detail-value{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.card-actions{display:flex;align-items:center;justify-content:space-between;gap:12px}.action-button{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;background:transparent;border:1px solid #e2e8f0;border-radius:10px;font-size:13px;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .action-button{border-color:#ffffff14}.action-button mat-icon{font-size:18px;width:18px;height:18px}.set-default-button{color:#0f172a;flex:1}:host-context(.dark) .set-default-button{color:#fff}.set-default-button:hover{background:#6366f114;border-color:#6366f14d;color:#8b5cf6}.set-default-button:hover mat-icon{color:#8b5cf6}.default-message{display:flex;align-items:center;gap:8px;font-size:13px;color:#10b981;flex:1}.default-message mat-icon{font-size:18px;width:18px;height:18px;color:#10b981}.delete-button{color:#94a3b8;padding:10px;min-width:40px;justify-content:center}:host-context(.dark) .delete-button{color:#fff6}.delete-button:hover:not(.disabled){background:#ef444414;border-color:#ef44444d;color:#ef4444}.delete-button:hover:not(.disabled) mat-icon{color:#ef4444}.delete-button.disabled{opacity:.3;cursor:not-allowed;pointer-events:none}@media (max-width: 480px){.card-inner{padding:20px}.card-number{font-size:16px;gap:8px}.card-details{grid-template-columns:1fr 1fr;gap:16px}.action-button{padding:8px 12px;font-size:12px}.set-default-button span{display:none}.set-default-button{flex:0;padding:8px 10px;min-width:40px;justify-content:center}}
`],encapsulation:2})}}return a})();var ge=(()=>{class a{constructor(e){this._httpClient=e,this.loading=M(!1),this.error=M(null),this.apiUrl=U.apiUrl}createStripeCard(){this.loading.set(!0),this.error.set(null);let e=localStorage.getItem("accessToken"),d=e?{Authorization:`Bearer ${e}`}:{};return this._httpClient.post(`${this.apiUrl}/v2/credit-cards/stripe`,{method:"createCheckoutSession",paymentGateway:"stripe"},{headers:d}).pipe(D(n=>{n.data?.url&&(window.location.href=n.data.url)}),z(n=>(console.error("Error creating Stripe checkout session:",n),this.error.set("Failed to initialize payment form"),S(()=>n))),I(()=>{this.loading.set(!1)}))}purchaseCredits(e){this.loading.set(!0),this.error.set(null);let d=localStorage.getItem("accessToken"),n=d?{Authorization:`Bearer ${d}`}:{},l={amount:e.amount,cardId:e.cardId,currency:e.currency||"USD",origin:e.origin||"smart_agent"};return this._httpClient.post(`${this.apiUrl}/v2/credits/purchase`,l,{headers:n}).pipe(z(g=>(console.error("Error purchasing credits:",g),this.error.set(g.error?.message||"Failed to purchase credits"),S(()=>g))),I(()=>{this.loading.set(!1)}))}resumeKYC(){this.loading.set(!0);let e=localStorage.getItem("accessToken"),d=e?{Authorization:`Bearer ${e}`}:{};return this._httpClient.post(`${this.apiUrl}/v2/app-registrations/resume-kyc`,{},{headers:d}).pipe(I(()=>{this.loading.set(!1)}))}static{this.\u0275fac=function(d){return new(d||a)(Q(ie))}}static{this.\u0275prov=J({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();function ht(a,m){if(a&1&&(t(0,"div",21)(1,"mat-icon"),o(2,"error_outline"),i(),t(3,"p"),o(4),i()()),a&2){let e=u(2);r(4),f(e.error)}}function _t(a,m){if(a&1){let e=w();t(0,"button",22),h("click",function(){let n=v(e).$implicit,l=u(2);return y(l.selectPresetAmount(n))}),t(1,"span",23),o(2),i()()}if(a&2){let e=m.$implicit,d=u(2);$("selected",d.selectedAmount===e&&!d.isCustomAmount),p("disabled",d.loading),r(2),b("$",e,"")}}function vt(a,m){if(a&1){let e=w();t(0,"div",24)(1,"span",25),o(2,"$"),i(),t(3,"input",26),q("ngModelChange",function(n){v(e);let l=u(2);return Y(l.customAmountValue,n)||(l.customAmountValue=n),y(n)}),h("ngModelChange",function(n){v(e);let l=u(2);return y(l.onCustomAmountChange(n))}),i()()}if(a&2){let e=u(2);r(3),O("ngModel",e.customAmountValue),p("disabled",e.loading)}}function yt(a,m){a&1&&(t(0,"span",35),o(1),s(2,"transloco"),i()),a&2&&(r(),f(c(2,1,"addCredits.paymentMethods.cardDefault")))}function Ct(a,m){if(a&1&&(t(0,"div",27)(1,"label",9),o(2),s(3,"transloco"),i(),t(4,"div",28)(5,"div",29)(6,"div",30),_(7,"img",31),i(),t(8,"div",32)(9,"span",33),o(10),i()(),x(11,yt,3,3,"span",34),i()()()),a&2){let e=u(2);r(2),f(c(3,5,"addCredits.purchaseDialog.paymentMethod")),r(5),p("src",e.getCardLogo(e.data.card.brand),ee)("alt",e.data.card.brand),r(3),b("\u2022\u2022\u2022\u2022 ",e.data.card.lastFour,""),r(),p("ngIf",e.data.card.isDefault)}}function kt(a,m){a&1&&_(0,"mat-spinner",36)}function wt(a,m){if(a&1&&(H(0),t(1,"span"),o(2),s(3,"transloco"),i(),t(4,"span",37),o(5),i(),N()),a&2){let e=u(2);r(2),f(c(3,2,"chat.payment.payBtn")),r(3),b("$",e.selectedAmount,"")}}function St(a,m){a&1&&(t(0,"span"),o(1),s(2,"transloco"),i()),a&2&&(r(),f(c(2,1,"addCredits.purchaseDialog.purchasing")))}function It(a,m){if(a&1){let e=w();H(0),t(1,"div",3)(2,"h2",4),o(3),s(4,"transloco"),i(),t(5,"p",5),o(6),s(7,"transloco"),i()(),t(8,"mat-dialog-content",6),x(9,ht,5,1,"div",7),t(10,"div",8)(11,"label",9),o(12),s(13,"transloco"),i(),t(14,"div",10),x(15,_t,3,4,"button",11),i(),t(16,"div",12)(17,"button",13),h("click",function(){v(e);let n=u();return y(n.toggleCustomAmount())}),t(18,"mat-icon"),o(19,"edit"),i(),t(20,"span"),o(21),s(22,"transloco"),i()(),x(23,vt,4,2,"div",14),i(),t(24,"p",15),o(25),s(26,"transloco"),s(27,"transloco"),i()(),x(28,Ct,12,7,"div",16),i(),t(29,"div",17)(30,"button",18),h("click",function(){v(e);let n=u();return y(n.close())}),o(31),s(32,"transloco"),i(),t(33,"button",19),h("click",function(){v(e);let n=u();return y(n.purchase())}),x(34,kt,1,0,"mat-spinner",20)(35,wt,6,4,"ng-container",1)(36,St,3,3,"span",1),i()(),N()}if(a&2){let e=u();r(3),f(c(4,19,"addCredits.purchaseDialog.title")),r(3),f(c(7,21,"addCredits.hero.subtitle")),r(3),p("ngIf",e.error),r(3),f(c(13,23,"addCredits.purchaseDialog.selectAmount")),r(3),p("ngForOf",e.creditAmounts),r(2),$("active",e.isCustomAmount),p("disabled",e.loading),r(4),f(c(22,25,"addCredits.purchaseDialog.customAmount")),r(2),p("ngIf",e.isCustomAmount),r(2),ze(" ",c(26,27,"addCredits.purchaseDialog.minimum")," \u2022 ",c(27,29,"addCredits.purchaseDialog.maximum")," $2,000 "),r(3),p("ngIf",e.data==null?null:e.data.card),r(2),p("disabled",e.loading),r(),b(" ",c(32,31,"addCredits.purchaseDialog.cancel")," "),r(2),p("disabled",e.loading||!e.selectedCardId||!e.isValidAmount()),r(),p("ngIf",e.loading),r(),p("ngIf",!e.loading),r(),p("ngIf",e.loading)}}function Et(a,m){a&1&&_(0,"mat-spinner",47)}function zt(a,m){a&1&&(t(0,"span"),o(1),s(2,"transloco"),i()),a&2&&(r(),f(c(2,1,"addCredits.purchaseDialog.kyc.startKyc")))}function Mt(a,m){if(a&1){let e=w();t(0,"div",38)(1,"div",39)(2,"mat-icon",40),o(3,"verified_user"),i()(),t(4,"div",41)(5,"h3",42),o(6),s(7,"transloco"),i(),t(8,"p",43),o(9),s(10,"transloco"),i(),t(11,"button",44),h("click",function(){v(e);let n=u();return y(n.startKyc())}),x(12,Et,1,0,"mat-spinner",45)(13,zt,3,3,"span",1),i(),t(14,"button",46),h("click",function(){v(e);let n=u();return y(n.close())}),o(15," Close "),i()()()}if(a&2){let e=u();r(6),f(c(7,6,"addCredits.purchaseDialog.kyc.title")),r(3),b(" ",c(10,8,"addCredits.purchaseDialog.kyc.description")," "),r(2),p("disabled",e.loading),r(),p("ngIf",e.loading),r(),p("ngIf",!e.loading),r(),p("disabled",e.loading)}}var Ze=(()=>{class a{constructor(){this._dialogRef=k(ne),this._paymentService=k(ge),this.data=k(ae),this.selectedAmount=100,this.loading=!1,this.error=null,this.isCustomAmount=!1,this.customAmountValue=null,this.creditAmounts=[20,50,100,250,500,1e3],this.kycRequired=!1}ngOnInit(){this.data?.card&&(this.selectedCardId=this.data.card._id)}selectPresetAmount(e){this.isCustomAmount=!1,this.customAmountValue=null,this.selectedAmount=e}toggleCustomAmount(){this.isCustomAmount=!this.isCustomAmount,this.isCustomAmount&&(this.customAmountValue=this.selectedAmount>=20?this.selectedAmount:20,this.selectedAmount=this.customAmountValue)}onCustomAmountChange(e){this.customAmountValue=e,this.selectedAmount=e||0}isValidAmount(){return this.selectedAmount>=20&&this.selectedAmount<=2e3}close(){this._dialogRef.close()}startKyc(){this.loading=!0,this._paymentService.resumeKYC().subscribe({next:e=>{if(this.loading=!1,e.data?.path&&U.kycBaseUrl){let d=`${U.kycBaseUrl}${e.data.path}`;window.open(d,"_blank"),this._dialogRef.close()}},error:e=>{this.loading=!1,this.error="Failed to start KYC verification. Please contact support."}})}getCardLogo(e){return{visa:"https://cdn.verifik.co/assets/billing-svg/VisaLogo.svg",mastercard:"https://cdn.verifik.co/assets/billing-svg/MasterCardLogo.svg",amex:"https://cdn.verifik.co/assets/billing-svg/AmericanExpressLogo.svg"}[e?.toLowerCase()]||""}purchase(){if(!this.selectedCardId){this.error="Please select a payment method";return}if(!this.isValidAmount()){this.error="Amount must be between $20 and $2,000";return}this.loading=!0,this.error=null,this._paymentService.purchaseCredits({amount:this.selectedAmount,cardId:this.selectedCardId,currency:"USD",origin:"smart_agent"}).subscribe({next:e=>{this.loading=!1,e.data?.status==="pending"?(this.error="Payment is pending verification. Credits will be added once payment is confirmed.",setTimeout(()=>{this._dialogRef.close("success")},2e3)):this._dialogRef.close("success")},error:e=>{this.loading=!1,e.error?.code==="client_cannot_recharge_needs_kyc"||e.error?.message?.includes("kyc")?(this.kycRequired=!0,this.error=null):this.error=e.error?.message||"Failed to purchase credits"}})}static{this.\u0275fac=function(d){return new(d||a)}}static{this.\u0275cmp=A({type:a,selectors:[["app-purchase-credits-dialog"]],decls:3,vars:2,consts:[[1,"purchase-credits-dialog"],[4,"ngIf"],["class","kyc-state-wrapper",4,"ngIf"],[1,"dialog-header"],[1,"dialog-title"],[1,"dialog-subtitle"],[1,"p-0"],["class","error-message",4,"ngIf"],[1,"section"],[1,"section-label"],[1,"amount-grid"],["type","button","class","amount-button",3,"selected","disabled","click",4,"ngFor","ngForOf"],[1,"custom-amount-wrapper"],["type","button",1,"custom-toggle",3,"click","disabled"],["class","custom-input-container",4,"ngIf"],[1,"amount-hint"],["class","p-1",4,"ngIf"],[1,"dialog-actions"],["type","button",1,"cancel-button",3,"click","disabled"],["type","button",1,"purchase-button",3,"click","disabled"],["diameter","20",4,"ngIf"],[1,"error-message"],["type","button",1,"amount-button",3,"click","disabled"],[1,"amount-value"],[1,"custom-input-container"],[1,"currency-symbol"],["type","number","placeholder","20","min","20","max","2000",1,"custom-input",3,"ngModelChange","ngModel","disabled"],[1,"p-1"],[1,"payment-summary"],[1,"card-option","selected","read-only"],[1,"card-icon-wrapper"],[1,"brand-logo",3,"src","alt"],[1,"card-details"],[1,"card-number"],["class","default-badge",4,"ngIf"],[1,"default-badge"],["diameter","20"],[1,"button-amount"],[1,"kyc-state-wrapper"],[1,"kyc-icon-wrapper"],[1,"kyc-icon"],[1,"kyc-content"],[1,"kyc-title"],[1,"kyc-description"],[1,"start-kyc-button",3,"click","disabled"],["diameter","24",4,"ngIf"],[1,"cancel-button","kyc-cancel",3,"click","disabled"],["diameter","24"]],template:function(d,n){d&1&&(t(0,"div",0),x(1,It,37,33,"ng-container",1)(2,Mt,16,10,"div",2),i()),d&2&&(r(),p("ngIf",!n.kycRequired),r(),p("ngIf",n.kycRequired))},dependencies:[B,W,T,me,de,le,se,fe,pe,ce,R,oe,V,F,P,j,L,G,Z],styles:[`.purchase-credits-dialog{padding:12px;background:#fff;border-radius:20px;width:100%;max-width:680px;margin:0 auto}:host-context(.dark) .purchase-credits-dialog{background:#1e293b}.dialog-header{text-align:left;margin-bottom:40px}.dialog-title{font-size:28px;font-weight:800;color:#0f172a;margin-bottom:8px;letter-spacing:-.02em}:host-context(.dark) .dialog-title{color:#fff}.dialog-subtitle{font-size:15px;color:#475569}:host-context(.dark) .dialog-subtitle{color:#ffffffb3}.section{margin-bottom:32px}.section-label{display:block;font-size:14px;font-weight:700;color:#0f172a;margin-bottom:16px;text-transform:none;letter-spacing:normal}:host-context(.dark) .section-label{color:#fff}.amount-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:12px;margin-bottom:16px}.amount-button{display:flex;align-items:center;justify-content:center;padding:16px;background:transparent;border:1px solid #e2e8f0;border-radius:12px;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .amount-button{border-color:#ffffff14}.amount-button:hover:not(:disabled):not(.selected){background:#6366f10a;border-color:#6366f133}.amount-button.selected{border-color:#8b5cf6;background:#6366f10f;box-shadow:0 0 0 2px #8b5cf61a}:host-context(.dark) .amount-button.selected{background:#6366f11f;box-shadow:0 0 0 2px #8b5cf633}.amount-button.selected .amount-value{color:#8b5cf6;font-weight:700}.amount-button:disabled{opacity:.5;cursor:not-allowed}.amount-button .amount-value{font-size:18px;font-weight:600;color:#0f172a}:host-context(.dark) .amount-button .amount-value{color:#fff}.custom-toggle{display:inline-flex;align-items:center;gap:8px;background:transparent;border:none;color:#8b5cf6;font-size:14px;font-weight:600;padding:0;cursor:pointer;margin-bottom:12px}.custom-toggle mat-icon{font-size:18px;width:18px;height:18px}.custom-input-container{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;margin-top:8px}:host-context(.dark) .custom-input-container{background:#1e293b80;border-color:#ffffff14}.custom-input-container .currency-symbol{font-size:20px;font-weight:700;color:#475569}.custom-input-container .custom-input{flex:1;background:transparent;border:none;outline:none;font-size:20px;font-weight:700;color:#0f172a}:host-context(.dark) .custom-input-container .custom-input{color:#fff}.amount-hint{font-size:12px;color:#94a3b8;margin-top:8px}.cards-selection{display:grid;grid-template-columns:1fr;gap:12px}.card-option{display:flex;align-items:center;gap:16px;padding:16px 20px;background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;cursor:pointer;text-align:left;transition:all .2s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .card-option{background:#1e293b4d;border-color:#ffffff14}.card-option:hover:not(:disabled):not(.selected){border-color:#6366f133;background:#6366f105}.card-option.selected{border-color:#8b5cf6;background:#6366f10a;box-shadow:0 0 0 1px #8b5cf6}:host-context(.dark) .card-option.selected{background:#6366f114}.card-icon-wrapper{width:48px;height:32px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:4px;border:1px solid #e2e8f0;flex-shrink:0;padding:4px;box-sizing:border-box}:host-context(.dark) .card-icon-wrapper{background:#0f172a;border-color:#ffffff1a}.card-icon-wrapper .card-brand-icon{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.card-icon-wrapper .card-brand-icon svg{width:100%;height:100%;object-fit:contain}.card-icon-wrapper .brand-logo{height:20px;width:auto;max-width:100%;object-fit:contain;display:block}.card-icon-wrapper .card-brand-mat-icon{font-size:24px;width:24px;height:24px;color:#475569}.card-details{flex:1}.card-number{display:block;font-size:15px;font-weight:600;color:#0f172a}:host-context(.dark) .card-number{color:#fff}.card-brand-name{font-size:13px;color:#475569}.default-badge{font-size:11px;font-weight:700;color:#10b981;background:#10b9811a;padding:4px 8px;border-radius:6px;text-transform:uppercase;letter-spacing:.02em}.payment-summary .card-option.read-only{cursor:default;background:#f8fafc;border-color:#8b5cf6;box-shadow:0 0 0 1px #8b5cf6}:host-context(.dark) .payment-summary .card-option.read-only{background:#8b5cf61a}.payment-summary .card-option.read-only:hover{background:#f8fafc;border-color:#8b5cf6}:host-context(.dark) .payment-summary .card-option.read-only:hover{background:#8b5cf61a}.dialog-actions{display:flex;gap:16px;margin-top:40px}.cancel-button{flex:1;padding:14px;background:transparent;border:1px solid #e2e8f0;border-radius:10px;color:#475569;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .cancel-button{border-color:#ffffff14}.cancel-button:hover{background:#00000005}.purchase-button{flex:1.5;padding:14px;background:linear-gradient(135deg,#6366f1,#8b5cf6,#a855f7);border:none;border-radius:10px;color:#fff;font-size:15px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .2s cubic-bezier(.4,0,.2,1)}.purchase-button:hover:not(:disabled){opacity:.9;transform:translateY(-1px);box-shadow:0 4px 12px #6366f140}.purchase-button:disabled{opacity:.5;cursor:not-allowed}.button-amount{background:#fff3;padding:2px 8px;border-radius:4px}.error-message{display:flex;align-items:center;gap:12px;padding:16px;background:#ef44440d;border:1px solid rgba(239,68,68,.1);border-radius:12px;margin-bottom:24px;color:#ef4444}.error-message mat-icon{font-size:20px;width:20px;height:20px}.error-message p{font-size:14px;margin:0;font-weight:500}.kyc-state-wrapper{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:32px 16px;animation:fadeIn .3s ease-in-out}.kyc-icon-wrapper{width:96px;height:96px;background:#8b5cf61a;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:24px;box-shadow:0 0 0 12px #8b5cf608}:host-context(.dark) .kyc-icon-wrapper{background:#8b5cf626;box-shadow:0 0 0 12px #8b5cf60d}.kyc-icon{font-size:48px;width:48px;height:48px;color:#8b5cf6}.kyc-content{max-width:400px}.kyc-title{font-size:24px;font-weight:800;color:#0f172a;margin-bottom:12px;letter-spacing:-.02em}:host-context(.dark) .kyc-title{color:#fff}.kyc-description{font-size:15px;line-height:1.6;color:#475569;margin-bottom:32px}:host-context(.dark) .kyc-description{color:#ffffffb3}.start-kyc-button{width:100%;padding:16px;background:linear-gradient(135deg,#05f,#04c);border:none;border-radius:12px;color:#fff;font-size:16px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;margin-bottom:16px;box-shadow:0 4px 12px #0055ff4d;transition:all .2s cubic-bezier(.4,0,.2,1)}.start-kyc-button:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #05f6}.start-kyc-button:disabled{opacity:.7;cursor:not-allowed}.kyc-cancel{background:transparent;border:none;color:#475569;font-weight:600;font-size:14px;cursor:pointer;padding:8px}:host-context(.dark) .kyc-cancel{color:#ffffffb3}.kyc-cancel:hover{text-decoration:underline}@keyframes fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}
`],encapsulation:2})}}return a})();var Dt=()=>["/subscription-plans"];function At(a,m){a&1&&(t(0,"div",56)(1,"div",57),_(2,"mat-spinner",58),i(),t(3,"p",59),o(4),s(5,"transloco"),i()()),a&2&&(r(4),b(" ",c(5,1,"addCredits.paymentMethods.manage"),"... "))}function Tt(a,m){if(a&1){let e=w();t(0,"div",60)(1,"mat-icon",61),o(2,"error_outline"),i(),t(3,"p",62),o(4),i(),t(5,"button",63),h("click",function(){v(e);let n=u();return y(n.loadData())}),t(6,"mat-icon"),o(7,"refresh"),i(),o(8),s(9,"transloco"),i()()}if(a&2){let e=u();r(4),f(e.error()),r(4),b(" ",c(9,2,"settings.profile.save_error")," ")}}function Bt(a,m){if(a&1){let e=w();t(0,"div",64)(1,"div",65)(2,"div",66)(3,"mat-icon",67),o(4,"credit_card_off"),i()()(),t(5,"h3",68),o(6),s(7,"transloco"),i(),t(8,"p",69),o(9),s(10,"transloco"),i(),t(11,"button",70),h("click",function(){v(e);let n=u();return y(n.openAddCardDialog())}),t(12,"mat-icon"),o(13,"add"),i(),t(14,"span"),o(15),s(16,"transloco"),i()()()}a&2&&(r(6),f(c(7,3,"addCredits.noCards")),r(3),f(c(10,5,"addCredits.noCardsDesc")),r(6),f(c(16,7,"addCredits.addCard")))}function Rt(a,m){if(a&1){let e=w();t(0,"app-payment-card",73),h("setDefault",function(n){v(e);let l=u(2);return y(l.onCardSetDefault(n))})("delete",function(n){v(e);let l=u(2);return y(l.onCardDeleted(n))}),i()}if(a&2){let e=m.$implicit,d=m.index;Ee("animation-delay",d*100+"ms"),p("card",e)("isDefault",e.isDefault)}}function Vt(a,m){if(a&1&&(t(0,"div",71),x(1,Rt,1,4,"app-payment-card",72),i()),a&2){let e=u();r(),p("ngForOf",e.cards())}}function Pt(a,m){if(a&1&&(t(0,"div",74)(1,"div",75),_(2,"span",76),o(3),s(4,"transloco"),i(),t(5,"div",77)(6,"div",78)(7,"span",79),o(8),s(9,"transloco"),i(),t(10,"span",80),o(11),i()(),t(12,"div",78)(13,"span",79),o(14),s(15,"transloco"),i(),t(16,"span",80),o(17),i()()()()),a&2){let e,d,n=u();r(3),b(" ",c(4,5,"addCredits.autoRecharge.status.active")," "),r(5),f(c(9,7,"addCredits.autoRecharge.dialog.balanceThreshold")),r(3),b("",(e=n.autoRechargeConfig())==null?null:e.minThreshold," credits"),r(3),f(c(15,9,"addCredits.autoRecharge.dialog.rechargeAmount")),r(3),b("",(d=n.autoRechargeConfig())==null?null:d.minRecharge," credits")}}function Ft(a,m){a&1&&(t(0,"div",81)(1,"div",82),_(2,"span",76),o(3),s(4,"transloco"),i(),t(5,"p",83),o(6),s(7,"transloco"),i()()),a&2&&(r(3),b(" ",c(4,2,"addCredits.autoRecharge.status.inactive")," "),r(3),b(" ",c(7,4,"addCredits.autoRecharge.description")," "))}var Ge=(()=>{class a{constructor(){this._creditsService=k(ue),this._paymentService=k(ge),this._dialog=k(re),this._authService=k(Ue),this.cards=this._creditsService.cards,this.balance=this._creditsService.balance,this.autoRechargeConfig=this._creditsService.autoRechargeConfig,this.loading=this._creditsService.loading,this.error=this._creditsService.error,this.hasCards=he(()=>this.cards().length>0),this.defaultCard=he(()=>this.cards().find(e=>e.isDefault))}ngOnInit(){if(!!!localStorage.getItem("accessToken")){this.openAuthModal();return}this.loadData()}loadData(){Ie({cards:this._creditsService.getCards(),balance:this._creditsService.getBalance(),autoRecharge:this._creditsService.getAutoRechargeConfig()}).subscribe({next:()=>{this.cleanupExpiredCards()},error:e=>{console.error("Failed to load data:",e)}})}cleanupExpiredCards(){let e=this.cards(),d=this.autoRechargeConfig();if(e.length===0)return;let n=e.filter(l=>this.isCardExpired(l.expires_at));n.length!==0&&n.forEach(l=>{this._creditsService.deleteCard(l._id).subscribe({next:()=>{let g=this.cards();if(l.isDefault&&g.length>0){let C=g[0];this._creditsService.setDefaultCard(C._id).subscribe({next:()=>{console.log(`Set new default card: ${C.lastFour}`)},error:E=>console.error("Failed to set new default card:",E)})}if(d?.cardId===l._id){let C=we(ke({},d),{hasAutoCharge:!1,cardId:void 0});this._creditsService.updateAutoRechargeConfig(C).subscribe({next:()=>{console.log("Disabled auto-recharge due to expired card")},error:E=>console.error("Failed to disable auto-recharge:",E)})}},error:g=>{console.error(`Failed to delete expired card ${l.lastFour}:`,g)}})})}isCardExpired(e){if(!e)return!1;try{let d,n;if(e.includes("/")){let E=e.split("/").map(xe=>parseInt(xe.trim(),10));d=E[0],n=E[1]}else if(e.includes("-")){let E=e.split("-").map(xe=>parseInt(xe.trim(),10));n=E[0],d=E[1]}else return console.warn("Unknown expiration date format:",e),!1;if(!d||!n)return!1;let l=new Date,g=l.getFullYear(),C=l.getMonth()+1;return n<g||n===g&&d<C}catch(d){return console.error("Error parsing card expiration date:",d),!1}}openAuthModal(){this._dialog.open(Oe,{panelClass:"auth-modal-dialog",width:"400px",maxWidth:"100vw",disableClose:!0})}onCardDeleted(e){this._creditsService.deleteCard(e).subscribe({next:()=>{},error:d=>{console.error("Failed to delete card:",d)}})}onCardSetDefault(e){this._creditsService.setDefaultCard(e).subscribe({next:()=>{},error:d=>{console.error("Failed to set default card:",d)}})}openAddCardDialog(){this._paymentService.createStripeCard().subscribe({next:()=>{},error:e=>{console.error("Failed to create Stripe checkout session:",e)}})}openPurchaseCreditsDialog(){let e=this.cards();if(e.length===0){this.openAddCardDialog();return}let d=this.defaultCard()||e[0];this._dialog.open(Ze,{width:"500px",maxWidth:"90vw",data:{card:d}}).afterClosed().subscribe(l=>{l==="success"&&this._authService.refreshSession().subscribe(()=>{this._creditsService.getBalance().subscribe()})})}openAutoRechargeSettings(){this._dialog.open(qe,{width:"600px",maxWidth:"90vw",data:{config:this.autoRechargeConfig(),cards:this.cards()}}).afterClosed().subscribe(d=>{d==="success"&&this._creditsService.getAutoRechargeConfig().subscribe()})}static{this.\u0275fac=function(d){return new(d||a)}}static{this.\u0275cmp=A({type:a,selectors:[["add-credits"]],decls:125,vars:74,consts:[[1,"add-credits-container"],[1,"bg-pattern"],[1,"content-wrapper"],[1,"hero-section"],[1,"hero-content"],[1,"hero-text"],[1,"badge"],[1,"badge-icon"],[1,"hero-title"],[1,"hero-subtitle"],[1,"balance-card"],[1,"balance-card-glow"],[1,"balance-card-content"],[1,"balance-header"],[1,"balance-icon-wrapper"],[1,"balance-icon"],[1,"balance-label"],[1,"balance-amount"],[1,"amount-value"],[1,"amount-currency"],[1,"balance-action"],[1,"primary-cta-button",3,"click","disabled"],[1,"main-grid"],[1,"payment-section"],[1,"section-card"],[1,"section-header"],[1,"section-title-wrapper"],[1,"section-icon"],[1,"section-title"],[1,"section-subtitle"],[1,"add-card-button",3,"click","disabled"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","cards-list",4,"ngIf"],[1,"sidebar"],[1,"sidebar-card","auto-recharge-card"],[1,"sidebar-card-header"],[1,"sidebar-card-icon","auto-recharge-icon"],[1,"sidebar-card-title"],[1,"sidebar-card-subtitle"],["class","auto-recharge-active",4,"ngIf"],["class","auto-recharge-inactive",4,"ngIf"],[1,"sidebar-action-button",3,"click","disabled"],[1,"sidebar-card","pricing-card"],[1,"pricing-header"],[1,"pricing-icon"],[1,"pricing-content"],[1,"pricing-text"],[1,"pricing-tiers"],[1,"tier"],[1,"tier-amount"],[1,"tier-label"],[1,"tier","popular"],[1,"tier-badge"],[1,"sidebar-action-button","mt-4",3,"routerLink"],[1,"loading-state"],[1,"loading-spinner"],["diameter","48"],[1,"loading-text"],[1,"error-state"],[1,"error-icon"],[1,"error-text"],[1,"retry-button",3,"click"],[1,"empty-state"],[1,"empty-illustration"],[1,"empty-card-visual"],[1,"empty-icon"],[1,"empty-title"],[1,"empty-subtitle"],[1,"primary-cta-button",3,"click"],[1,"cards-list"],["class","card-item",3,"card","isDefault","animation-delay","setDefault","delete",4,"ngFor","ngForOf"],[1,"card-item",3,"setDefault","delete","card","isDefault"],[1,"auto-recharge-active"],[1,"status-badge","active"],[1,"status-dot"],[1,"config-details"],[1,"config-item"],[1,"config-label"],[1,"config-value"],[1,"auto-recharge-inactive"],[1,"status-badge","inactive"],[1,"inactive-text"]],template:function(d,n){if(d&1&&(t(0,"div",0),_(1,"div",1),t(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6)(7,"mat-icon",7),o(8,"bolt"),i(),o(9),s(10,"transloco"),i(),t(11,"h1",8),o(12),s(13,"transloco"),i(),t(14,"p",9),o(15),s(16,"transloco"),i()(),t(17,"div",10),_(18,"div",11),t(19,"div",12)(20,"div",13)(21,"div",14)(22,"mat-icon",15),o(23,"account_balance_wallet"),i()(),t(24,"span",16),o(25),s(26,"transloco"),i()(),t(27,"div",17)(28,"span",18),o(29),s(30,"number"),i(),t(31,"span",19),o(32),s(33,"transloco"),s(34,"lowercase"),i()(),t(35,"div",20)(36,"button",21),h("click",function(){return n.openPurchaseCreditsDialog()}),t(37,"span"),o(38),s(39,"transloco"),i()()()()()()(),t(40,"div",22)(41,"div",23)(42,"div",24)(43,"div",25)(44,"div",26)(45,"div",27)(46,"mat-icon"),o(47,"credit_card"),i()(),t(48,"div")(49,"h2",28),o(50),s(51,"transloco"),i(),t(52,"p",29),o(53),s(54,"transloco"),i()()(),t(55,"button",30),h("click",function(){return n.openAddCardDialog()}),t(56,"mat-icon"),o(57,"add"),i(),t(58,"span"),o(59),s(60,"transloco"),i()()(),x(61,At,6,3,"div",31)(62,Tt,10,4,"div",32)(63,Bt,17,9,"div",33)(64,Vt,2,1,"div",34),i()(),t(65,"div",35)(66,"div",36)(67,"div",37)(68,"div",38)(69,"mat-icon"),o(70,"autorenew"),i()(),t(71,"div")(72,"h3",39),o(73),s(74,"transloco"),i(),t(75,"p",40),o(76),s(77,"transloco"),i()()(),x(78,Pt,18,11,"div",41)(79,Ft,8,6,"div",42),t(80,"button",43),h("click",function(){return n.openAutoRechargeSettings()}),t(81,"mat-icon"),o(82,"settings"),i(),t(83,"span"),o(84),s(85,"transloco"),i()()(),t(86,"div",44)(87,"div",45)(88,"mat-icon",46),o(89,"verified"),i(),t(90,"span"),o(91),s(92,"transloco"),i()(),t(93,"div",47)(94,"p",48),o(95),s(96,"transloco"),i(),t(97,"div",49)(98,"div",50)(99,"span",51),o(100,"$99"),i(),t(101,"span",52),o(102),s(103,"transloco"),i()(),t(104,"div",53)(105,"span",54),o(106),s(107,"transloco"),i(),t(108,"span",51),o(109,"$249"),i(),t(110,"span",52),o(111),s(112,"transloco"),i()(),t(113,"div",50)(114,"span",51),o(115,"$499"),i(),t(116,"span",52),o(117),s(118,"transloco"),i()()(),t(119,"button",55)(120,"span"),o(121),s(122,"transloco"),i(),t(123,"mat-icon"),o(124,"arrow_forward"),i()()()()()()()()),d&2){let l,g,C;r(9),b(" ",c(10,30,"addCredits.hero.badge")," "),r(3),f(c(13,32,"addCredits.hero.title")),r(3),b(" ",c(16,34,"addCredits.hero.subtitle")," "),r(10),f(c(26,36,"addCredits.availableCredits")),r(4),f(Ae(30,38,((l=n.balance())==null?null:l.totalCredits)||0,"1.2-2")),r(3),f(c(34,43,c(33,41,"userMenu.credits"))),r(4),p("disabled",n.loading()),r(2),f(c(39,45,"addCredits.purchaseCredits")),r(12),b(" ",c(51,47,"addCredits.paymentMethods.title")," "),r(3),b(" ",c(54,49,"addCredits.paymentMethods.manage")," "),r(2),p("disabled",n.loading()),r(4),f(c(60,51,"addCredits.addCard")),r(2),p("ngIf",n.loading()),r(),p("ngIf",n.error()&&!n.loading()),r(),p("ngIf",!n.loading()&&!n.error()&&!n.hasCards()),r(),p("ngIf",!n.loading()&&!n.error()&&n.hasCards()),r(9),b(" ",c(74,53,"addCredits.autoRecharge.title")," "),r(3),b(" ",c(77,55,"addCredits.autoRecharge.subtitle")," "),r(2),p("ngIf",(g=n.autoRechargeConfig())==null?null:g.hasAutoCharge),r(),p("ngIf",!((C=n.autoRechargeConfig())!=null&&C.hasAutoCharge)),r(),p("disabled",n.loading()),r(4),f(c(85,57,"addCredits.autoRecharge.configure")),r(7),f(c(92,59,"addCredits.subscriptionPlans.title")),r(4),b(" ",c(96,61,"addCredits.subscriptionPlans.description")," "),r(7),f(c(103,63,"addCredits.subscriptionPlans.basic")),r(4),f(c(107,65,"addCredits.subscriptionPlans.bestValue")),r(5),f(c(112,67,"addCredits.subscriptionPlans.plus")),r(6),f(c(118,69,"addCredits.subscriptionPlans.business")),r(2),p("routerLink",Me(73,Dt)),r(2),f(c(122,71,"addCredits.subscriptionPlans.viewAllPlans"))}},dependencies:[B,W,T,Pe,Fe,j,L,V,F,P,R,G,Z,We,je,Le],styles:[`.add-credits-container{width:100%!important;min-height:100vh;background:#f8fafc;position:relative;overflow:hidden}:host-context(.dark) .add-credits-container{background:#0f172a}.bg-pattern{position:absolute;inset:0;background-image:radial-gradient(circle at 20% 20%,rgba(99,102,241,.05) 0%,transparent 50%),radial-gradient(circle at 80% 80%,rgba(139,92,246,.05) 0%,transparent 50%);pointer-events:none}:host-context(.dark) .bg-pattern{background-image:radial-gradient(circle at 20% 20%,rgba(99,102,241,.15) 0%,transparent 50%),radial-gradient(circle at 80% 80%,rgba(139,92,246,.15) 0%,transparent 50%)}.content-wrapper{position:relative;z-index:1;width:100%;padding:40px 24px}@media (min-width: 768px){.content-wrapper{padding:48px}}@media (min-width: 1280px){.content-wrapper{padding:48px 64px}}.hero-section{margin-bottom:48px}.hero-content{display:grid;grid-template-columns:1fr;gap:40px;align-items:center}@media (min-width: 1024px){.hero-content{grid-template-columns:1fr 400px;gap:60px}}.hero-text .badge{display:inline-flex;align-items:center;gap:8px;padding:8px 16px;background:linear-gradient(135deg,#6366f11a,#8b5cf61a);border:1px solid rgba(99,102,241,.2);border-radius:100px;color:#8b5cf6;font-size:14px;font-weight:600;margin-bottom:24px;transition:all .3s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .hero-text .badge{background:linear-gradient(135deg,#6366f133,#8b5cf633);border-color:#8b5cf64d}.hero-text .badge .badge-icon{font-size:18px;width:18px;height:18px}.hero-text .hero-title{font-size:36px;font-weight:800;color:#0f172a;margin-bottom:16px;line-height:1.2}:host-context(.dark) .hero-text .hero-title{background:linear-gradient(135deg,#fff,#fffc);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}@media (min-width: 768px){.hero-text .hero-title{font-size:48px}}.hero-text .hero-subtitle{font-size:18px;color:#475569;line-height:1.7;max-width:500px}:host-context(.dark) .hero-text .hero-subtitle{color:#ffffffb3}.balance-card{position:relative;background:#fff;border:1px solid #e2e8f0;border-radius:20px;box-shadow:0 1px 3px #0000000d,0 4px 12px #00000008;padding:32px;transition:all .3s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .balance-card{background:#1e293bcc;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.08);border-radius:20px}.balance-card:hover{transform:translateY(-4px);box-shadow:0 12px 40px #6366f126}:host-context(.dark) .balance-card:hover{box-shadow:0 12px 40px #0006}.balance-card-glow{position:absolute;inset:-1px;background:linear-gradient(135deg,#6366f1,#8b5cf6,#a855f7);border-radius:21px;opacity:0;z-index:-1;transition:all .3s cubic-bezier(.4,0,.2,1)}.balance-card:hover .balance-card-glow{opacity:.15;filter:blur(20px)}:host-context(.dark) .balance-card:hover .balance-card-glow{opacity:.25}.balance-card-content{position:relative}.balance-header{display:flex;align-items:center;gap:12px;margin-bottom:24px}.balance-icon-wrapper{width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#6366f1,#8b5cf6,#a855f7);border-radius:14px;box-shadow:0 8px 32px #8b5cf64d}.balance-icon{color:#fff;font-size:24px;width:24px;height:24px}.balance-label{font-size:14px;font-weight:600;color:#94a3b8;text-transform:uppercase;letter-spacing:.05em}:host-context(.dark) .balance-label{color:#fff6}.balance-amount{margin-bottom:28px}.amount-value{font-size:48px;font-weight:800;color:#0f172a;display:block;line-height:1;margin-bottom:8px}:host-context(.dark) .amount-value{background:linear-gradient(135deg,#fff,#ffffffd9);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.amount-currency{font-size:16px;color:#94a3b8;font-weight:500}:host-context(.dark) .amount-currency{color:#fff6}.balance-action{width:100%}.primary-cta-button{display:inline-flex;align-items:center;justify-content:center;gap:10px;width:100%;padding:16px 32px;background:linear-gradient(135deg,#6366f1,#8b5cf6,#a855f7);border:none;border-radius:14px;color:#fff;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.primary-cta-button:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.2) 0%,transparent 50%);opacity:0;transition:all .3s cubic-bezier(.4,0,.2,1)}.primary-cta-button:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 24px #6366f159}.primary-cta-button:hover:not(:disabled):before{opacity:1}.primary-cta-button:active:not(:disabled){transform:translateY(0)}.primary-cta-button:disabled{opacity:.5;cursor:not-allowed}.primary-cta-button mat-icon{font-size:20px;width:20px;height:20px}.stats-bar{display:flex;flex-direction:column;gap:20px;background:#fff;border:1px solid #e2e8f0;border-radius:20px;box-shadow:0 1px 3px #0000000d,0 4px 12px #00000008;padding:24px 32px;margin-bottom:48px}:host-context(.dark) .stats-bar{background:#1e293bcc;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.08);border-radius:20px}@media (min-width: 768px){.stats-bar{flex-direction:row;align-items:center;justify-content:center;gap:0}}.stat-item{display:flex;align-items:center;gap:16px;padding:0 24px}.stat-divider{display:none;width:1px;height:40px;background:#e2e8f0}:host-context(.dark) .stat-divider{background:#ffffff14}@media (min-width: 768px){.stat-divider{display:block}}.stat-icon{width:44px;height:44px;display:flex;align-items:center;justify-content:center;background:#6366f11a;border-radius:12px}:host-context(.dark) .stat-icon{background:#6366f133}.stat-icon mat-icon{color:#8b5cf6;font-size:22px;width:22px;height:22px}.stat-content{display:flex;flex-direction:column}.stat-value{font-size:16px;font-weight:700;color:#0f172a}:host-context(.dark) .stat-value{color:#fff}.stat-label{font-size:13px;color:#94a3b8}:host-context(.dark) .stat-label{color:#fff6}.main-grid{display:grid;grid-template-columns:1fr;gap:32px}@media (min-width: 1024px){.main-grid{grid-template-columns:1fr 380px}}.section-card{background:#fff;border:1px solid #e2e8f0;border-radius:20px;box-shadow:0 1px 3px #0000000d,0 4px 12px #00000008;padding:32px;transition:all .3s cubic-bezier(.4,0,.2,1);min-height:400px}:host-context(.dark) .section-card{background:#1e293bcc;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.08);border-radius:20px}.section-header{display:flex;flex-direction:column;gap:20px;margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid #e2e8f0}:host-context(.dark) .section-header{border-bottom-color:#ffffff14}@media (min-width: 768px){.section-header{flex-direction:row;align-items:center;justify-content:space-between}}.section-title-wrapper{display:flex;align-items:center;gap:16px}.section-icon{width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#3b82f6,#6366f1);border-radius:14px;box-shadow:0 8px 32px #3b82f64d}.section-icon mat-icon{color:#fff;font-size:24px;width:24px;height:24px}.section-title{font-size:22px;font-weight:700;color:#0f172a;margin-bottom:4px}:host-context(.dark) .section-title{color:#fff}.section-subtitle{font-size:14px;color:#94a3b8}:host-context(.dark) .section-subtitle{color:#fff6}.add-card-button{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;background:transparent;border:1px solid #e2e8f0;border-radius:12px;color:#0f172a;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .add-card-button{border-color:#ffffff14;color:#fff}.add-card-button:hover:not(:disabled){background:#6366f114;border-color:#6366f14d;color:#8b5cf6;transform:translateY(-1px)}.add-card-button:disabled{opacity:.5;cursor:not-allowed}.add-card-button mat-icon{font-size:18px;width:18px;height:18px}.loading-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.loading-spinner{margin-bottom:20px}.loading-spinner ::ng-deep .mat-mdc-progress-spinner{--mdc-circular-progress-active-indicator-color: #8b5cf6}.loading-text{font-size:14px;color:#94a3b8}:host-context(.dark) .loading-text{color:#fff6}.error-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.error-icon{font-size:48px;width:48px;height:48px;color:#ef4444;margin-bottom:16px}.error-text{font-size:14px;color:#475569;margin-bottom:20px}:host-context(.dark) .error-text{color:#ffffffb3}.retry-button{display:inline-flex;align-items:center;gap:8px;padding:12px 20px;background:#ef444414;border:1px solid rgba(239,68,68,.2);border-radius:10px;color:#ef4444;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1)}.retry-button:hover{background:#ef444426;border-color:#ef44444d}.retry-button mat-icon{font-size:18px;width:18px;height:18px}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-illustration{margin-bottom:24px}.empty-card-visual{width:100px;height:100px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#6366f114,#8b5cf614);border:2px dashed rgba(99,102,241,.3);border-radius:24px;animation:pulse 2s ease-in-out infinite}:host-context(.dark) .empty-card-visual{background:linear-gradient(135deg,#6366f126,#8b5cf626);border-color:#8b5cf666}@keyframes pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(.98)}}.empty-icon{font-size:40px;width:40px;height:40px;color:#94a3b8}:host-context(.dark) .empty-icon{color:#fff6}.empty-title{font-size:18px;font-weight:600;color:#0f172a;margin-bottom:8px}:host-context(.dark) .empty-title{color:#fff}.empty-subtitle{font-size:14px;color:#94a3b8;margin-bottom:24px;max-width:280px}:host-context(.dark) .empty-subtitle{color:#fff6}.cards-list{display:flex;flex-direction:column;gap:16px}.card-item{display:block;animation:slideInUp .4s ease-out forwards;animation-fill-mode:both}@keyframes slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.sidebar{display:flex;flex-direction:column;gap:24px}.sidebar-card{background:#fff;border:1px solid #e2e8f0;border-radius:20px;box-shadow:0 1px 3px #0000000d,0 4px 12px #00000008;padding:24px;transition:all .3s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .sidebar-card{background:#1e293bcc;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.08);border-radius:20px}.sidebar-card:hover{transform:translateY(-2px);box-shadow:0 8px 24px #00000014}:host-context(.dark) .sidebar-card:hover{box-shadow:0 8px 24px #0000004d}.sidebar-card-header{display:flex;align-items:center;gap:16px;margin-bottom:20px}.sidebar-card-icon{width:44px;height:44px;display:flex;align-items:center;justify-content:center;border-radius:12px}.sidebar-card-icon mat-icon{font-size:22px;width:22px;height:22px;color:#fff}.sidebar-card-icon.auto-recharge-icon{background:linear-gradient(135deg,#10b981,#059669);box-shadow:0 4px 16px #10b9814d}.sidebar-card-icon.quick-actions-icon{background:linear-gradient(135deg,#f59e0b,#f97316);box-shadow:0 4px 16px #f59e0b4d}.sidebar-card-title{font-size:18px;font-weight:700;color:#0f172a;margin-bottom:4px}:host-context(.dark) .sidebar-card-title{color:#fff}.sidebar-card-subtitle{font-size:13px;color:#94a3b8}:host-context(.dark) .sidebar-card-subtitle{color:#fff6}.status-badge{display:inline-flex;align-items:center;gap:8px;padding:6px 14px;border-radius:100px;font-size:13px;font-weight:600;margin-bottom:16px}.status-badge.active{background:#10b9811a;color:#10b981}:host-context(.dark) .status-badge.active{background:#10b98126}.status-badge.inactive{background:#94a3b81a;color:#94a3b8}:host-context(.dark) .status-badge.inactive{background:#ffffff14;color:#fff6}.status-dot{width:8px;height:8px;border-radius:50%}.active .status-dot{background:#10b981;box-shadow:0 0 8px #10b98199}.inactive .status-dot{background:#94a3b8}:host-context(.dark) .inactive .status-dot{background:#fff6}.config-details{background:#10b9810f;border-radius:12px;padding:16px;margin-bottom:20px}:host-context(.dark) .config-details{background:#10b9811a}.config-item{display:flex;justify-content:space-between;align-items:center;padding:8px 0}.config-item:not(:last-child){border-bottom:1px solid rgba(16,185,129,.1)}:host-context(.dark) .config-item:not(:last-child){border-bottom-color:#10b98126}.config-label{font-size:13px;color:#475569}:host-context(.dark) .config-label{color:#ffffffb3}.config-value{font-size:14px;font-weight:600;color:#10b981}.auto-recharge-inactive{margin-bottom:20px}.inactive-text{font-size:14px;color:#94a3b8;line-height:1.5}:host-context(.dark) .inactive-text{color:#fff6}.sidebar-action-button{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;padding:12px 20px;background:#6366f10f;border:1px solid rgba(99,102,241,.15);border-radius:12px;color:#8b5cf6;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .sidebar-action-button{background:#6366f11a;border-color:#6366f133}.sidebar-action-button:hover:not(:disabled){background:#6366f11f;border-color:#6366f14d;transform:translateY(-1px)}.sidebar-action-button:disabled{opacity:.5;cursor:not-allowed}.sidebar-action-button mat-icon{font-size:18px;width:18px;height:18px}.quick-actions-list{display:flex;flex-direction:column;gap:8px}.quick-action-item{display:flex;align-items:center;gap:14px;width:100%;padding:14px 16px;background:#00000005;border:1px solid transparent;border-radius:12px;color:#0f172a;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);text-align:left}:host-context(.dark) .quick-action-item{background:#ffffff08;color:#fff}.quick-action-item:hover:not(:disabled){background:#6366f10f;border-color:#6366f126}:host-context(.dark) .quick-action-item:hover:not(:disabled){background:#ffffff14;border-color:#ffffff14}.quick-action-item:hover:not(:disabled) .action-arrow{transform:translate(4px);opacity:1}.quick-action-item:disabled{opacity:.4;cursor:not-allowed}.quick-action-item span{flex:1}.quick-action-item .action-arrow{font-size:18px;width:18px;height:18px;color:#94a3b8;opacity:.5;transition:all .3s cubic-bezier(.4,0,.2,1)}:host-context(.dark) .quick-action-item .action-arrow{color:#fff6}.quick-action-icon{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:10px}.quick-action-icon mat-icon{font-size:18px;width:18px;height:18px;color:#fff}.quick-action-icon.buy-icon{background:linear-gradient(135deg,#6366f1,#8b5cf6,#a855f7)}.quick-action-icon.card-icon{background:linear-gradient(135deg,#3b82f6,#6366f1)}.quick-action-icon.refresh-icon{background:linear-gradient(135deg,#06b6d4,#0891b2)}.pricing-card{background:linear-gradient(135deg,#6366f10d,#8b5cf60d);border-color:#6366f126}:host-context(.dark) .pricing-card{background:linear-gradient(135deg,#6366f11a,#8b5cf61a);border-color:#8b5cf633}.pricing-header{display:flex;align-items:center;gap:10px;margin-bottom:16px}.pricing-header .pricing-icon{font-size:20px;width:20px;height:20px;color:#8b5cf6}.pricing-header span{font-size:14px;font-weight:600;color:#8b5cf6}.pricing-content .pricing-text{font-size:14px;color:#475569;line-height:1.6;margin-bottom:20px}:host-context(.dark) .pricing-content .pricing-text{color:#ffffffb3}.pricing-content .pricing-text strong{color:#0f172a}:host-context(.dark) .pricing-content .pricing-text strong{color:#fff}.pricing-tiers{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}.tier{display:flex;flex-direction:column;align-items:center;padding:16px 8px;background:#00000005;border:1px solid transparent;border-radius:12px;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative}:host-context(.dark) .tier{background:#ffffff08}.tier:hover{background:#6366f10f;border-color:#6366f126}:host-context(.dark) .tier:hover{background:#ffffff0f;border-color:#ffffff14}.tier.popular{background:linear-gradient(135deg,#6366f11a,#8b5cf61a);border-color:#6366f140}:host-context(.dark) .tier.popular{background:linear-gradient(135deg,#6366f126,#8b5cf626);border-color:#8b5cf64d}.tier .tier-badge{position:absolute;top:-8px;left:50%;transform:translate(-50%);padding:2px 8px;background:linear-gradient(135deg,#6366f1,#8b5cf6,#a855f7);border-radius:100px;font-size:9px;font-weight:700;color:#fff;text-transform:uppercase;letter-spacing:.05em;white-space:nowrap}.tier .tier-amount{font-size:16px;font-weight:700;color:#0f172a;margin-bottom:4px}:host-context(.dark) .tier .tier-amount{color:#fff}.tier .tier-label{font-size:11px;color:#94a3b8}:host-context(.dark) .tier .tier-label{color:#fff6}.add-credits-container mat-icon{display:flex;align-items:center;justify-content:center}
`],encapsulation:2})}}return a})();var tn=[{path:"",component:Ge}];export{tn as default};
