import{Ga as p,Z as r,aa as h,fa as l,kd as u,pd as i}from"./chunk-BMVGBJ55.js";var $=(()=>{class s{constructor(t){this._httpClient=t,this.configurations=p([]),this.isLoading=p(!1)}getConfigurations(){return this.isLoading.set(!0),this._httpClient.get(`${i.apiUrl}/v2/batch-configurations`).pipe(r(t=>{this.configurations.set(t.data),this.isLoading.set(!1)}))}getAvailableFeatures(t){typeof t<"u"&&t===null&&(t="");let e={};return t&&(e={country:t}),this._httpClient.get(`${i.apiUrl}/v2/app-features/my-list`,{params:e}).pipe(r(a=>console.log("Features loaded",a)))}createConfiguration(t){return this._httpClient.post(`${i.apiUrl}/v2/batch-configurations`,t).pipe(r(e=>{this.configurations.update(a=>[e.data,...a])}))}deleteConfiguration(t){return this._httpClient.delete(`${i.apiUrl}/v2/batch-configurations/${t}`).pipe(r(()=>{this.configurations.update(e=>e.filter(a=>a._id!==t))}))}getConfiguration(t){return this._httpClient.get(`${i.apiUrl}/v2/batch-configurations/${t}`,{params:{populates:"steps.appFeature"}})}updateConfiguration(t,e){return this._httpClient.put(`${i.apiUrl}/v2/batch-configurations/${t}`,e).pipe(r(a=>{this.configurations.update(n=>n.map(o=>o._id===t?a.data:o))}))}getSmartBatches(t,e="-createdAt"){return this._httpClient.get(`${i.apiUrl}/v2/smart-batches`,{params:{batchConfiguration:t,sort:e}})}createSmartBatch(t){return this._httpClient.post(`${i.apiUrl}/v2/smart-batches`,t)}getSmartBatch(t){return this._httpClient.get(`${i.apiUrl}/v2/smart-batches/${t}`,{params:{populates:"batchConfiguration"}})}updateSmartBatch(t,e){return this._httpClient.put(`${i.apiUrl}/v2/smart-batches/${t}`,e)}getSmartBatchStats(t){return this._httpClient.get(`${i.apiUrl}/v2/smart-batches/stats/${t}`)}executeFeatureRequest(t,e="GET",a={}){let n=t.startsWith("http")?t:`${i.apiUrl}/${t.replace(/^\//,"")}`;return e.toUpperCase()==="GET"?this._httpClient.get(n,{params:a}):this._httpClient.post(n,a)}updateBatchRow(t,e,a){return this._httpClient.put(`${i.apiUrl}/v2/smart-batches/${t}/rows/${e}`,a)}static{this.\u0275fac=function(e){return new(e||s)(l(u))}}static{this.\u0275prov=h({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{$ as a};
