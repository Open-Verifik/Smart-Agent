import{c as se,d as me}from"./chunk-IEVXMBCH.js";import{a as q,b as G,f as L}from"./chunk-UVXKGKGK.js";import{a as te,c as M,d as F}from"./chunk-YTRC6VXI.js";import{d as Z,e as H,f as J,l as X,m as K}from"./chunk-CTJ3YQQD.js";import{B as ce,c as ie,h as ne,i as oe,m as re,r as ae,s as le,z as pe}from"./chunk-QWR6CIPV.js";import{U as Q,V as Y,X as ee,Z as E,_ as I}from"./chunk-KMUH6FME.js";import{Bb as $,Cb as k,Da as x,Db as R,Eb as o,Fb as r,Ga as A,Gb as h,Kb as O,Mb as b,Nb as s,Sa as P,Wa as i,Xb as c,Yb as v,Zb as y,aa as N,cd as T,fb as S,ga as w,gc as U,hc as W,lb as g,oc as u,pc as f,qa as z,qc as V,ra as B,sb as C,tb as d,ub as j,zb as m}from"./chunk-BMVGBJ55.js";var Qe=(()=>{class t{constructor(){this._pendingPreviewData=A(null)}setPendingPreviewData(e){this._pendingPreviewData.set(e)}consumePendingPreviewData(){let e=this._pendingPreviewData();return this._pendingPreviewData.set(null),e}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var _e=()=>[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],ge=t=>({path:t}),ve=(t,l)=>l.id,ye=(t,l)=>l.key;function Ce(t,l){if(t&1&&(o(0,"span",11),c(1),r()),t&2){let e=s(3);d("opacity",e.watermarkOpacity()),i(),v(e.watermarkText())}}function he(t,l){if(t&1&&h(0,"img",12),t&2){let e=s(3);d("opacity",e.watermarkOpacity()),C("src",e.logoUrl(),P)}}function be(t,l){if(t&1&&(o(0,"div",7),g(1,Ce,2,3,"span",9)(2,he,1,3,"img",10),r()),t&2){let e=s(2);i(),m(e.watermarkType()==="text"?1:e.watermarkType()==="logo"&&e.logoUrl()?2:-1)}}function we(t,l){if(t&1&&(o(0,"span",16),c(1),r()),t&2){let e=s(4);d("opacity",e.watermarkOpacity()),i(),v(e.watermarkText())}}function Pe(t,l){if(t&1&&h(0,"img",17),t&2){let e=s(4);d("opacity",e.watermarkOpacity()),C("src",e.logoUrl(),P)}}function Se(t,l){if(t&1&&(o(0,"div",13),g(1,we,2,3,"span",14)(2,Pe,1,3,"img",15),r()),t&2){let e=s(3);i(),m(e.watermarkType()==="text"?1:e.watermarkType()==="logo"&&e.logoUrl()?2:-1)}}function ke(t,l){t&1&&(o(0,"div",8),k(1,Se,3,1,"div",13,$),r()),t&2&&(i(),R(U(0,_e)))}function Re(t,l){if(t&1&&g(0,be,3,1,"div",7)(1,ke,3,1,"div",8),t&2){let e=s();m(e.watermarkPattern()==="single"?0:1)}}function Te(t,l){if(t&1&&(o(0,"div",18),c(1," Page 1 of 1 "),r()),t&2){let e=s();d("text-align",e.pageNumberPosition()==="top-left"?"left":e.pageNumberPosition()==="top-right"?"right":"center")}}function Ee(t,l){if(t&1&&(o(0,"div",3),h(1,"img",19),r()),t&2){let e=s();i(),C("src",e.logoUrl(),P)}}function Ie(t,l){t&1&&(o(0,"div",4)(1,"mat-icon",20),c(2,"description"),r(),o(3,"p",21),c(4),u(5,"transloco"),r()()),t&2&&(i(4),v(f(5,1,"smartReport.noSectionsToPreview")))}function Me(t,l){if(t&1&&(o(0,"div",26)(1,"h2",29),c(2),u(3,"transloco"),r()()),t&2){let e=s().$implicit,n=s();d("text-align",(e.style==null?null:e.style.textAlign)||"left"),i(),d("font-size",(e.style==null?null:e.style.fontSize)||22,"px")("font-weight",(e.style==null?null:e.style.fontWeight)||"bold")("color",(e.style==null?null:e.style.color)||n.primaryColor()),i(),y(" ",e.staticContent||e.label||f(3,9,"smartReport.untitled")," ")}}function Fe(t,l){if(t&1&&(o(0,"div",24)(1,"p",30),c(2),u(3,"transloco"),r()()),t&2){let e=s().$implicit;i(),d("font-size",(e.style==null?null:e.style.fontSize)||12,"px")("font-weight",(e.style==null?null:e.style.fontWeight)||"normal")("text-align",(e.style==null?null:e.style.textAlign)||"left")("color",(e.style==null?null:e.style.color)||"#374151"),i(),y(" ",e.staticContent||f(3,9,"smartReport.textContent")," ")}}function je(t,l){if(t&1&&(o(0,"div",31)(1,"span",32),c(2),u(3,"transloco"),r(),o(4,"span",33),c(5),r()()),t&2){let e=s().$implicit,n=s();d("text-align",(e.style==null?null:e.style.textAlign)||"left"),i(),d("font-size",(e.style==null?null:e.style.fontSize)||12,"px"),i(),v(e.label||f(3,10,"smartReport.field")),i(2),d("font-size",(e.style==null?null:e.style.fontSize)||12,"px")("color",(e.style==null?null:e.style.color)||"#111827"),i(),v(n.resolveDataPath(e.dataPath)||"\u2014")}}function De(t,l){if(t&1&&(o(0,"h4",37),c(1),r()),t&2){let e=s(2).$implicit,n=s();d("color",n.primaryColor()),i(),y(" ",e.label," ")}}function Ne(t,l){if(t&1&&(o(0,"tr",36)(1,"td",38),c(2),r(),o(3,"td",39),c(4),r()()),t&2){let e=l.$implicit;i(2),v(e.key),i(2),y(" ",e.value," ")}}function ze(t,l){if(t&1&&(o(0,"tr")(1,"td",40),c(2),u(3,"transloco"),r()()),t&2){let e=s(2).$implicit;i(2),y(" ",V(3,1,"smartReport.noDataAtPath",W(4,ge,e.dataPath))," ")}}function Be(t,l){if(t&1&&(o(0,"div",26),g(1,De,2,3,"h4",34),o(2,"table",35)(3,"tbody"),k(4,Ne,5,2,"tr",36,ye),g(6,ze,4,6,"tr"),r()()()),t&2){let e=s().$implicit,n=s();i(),m(e.label?1:-1),i(3),R(n.resolveTableData(e.dataPath)),i(2),m(n.resolveTableData(e.dataPath).length===0?6:-1)}}function Ae(t,l){if(t&1&&(h(0,"img",41),u(1,"transloco")),t&2){let e=s(2).$implicit;C("src",e.staticContent,P)("alt",e.label||f(1,2,"smartReport.image"))}}function $e(t,l){t&1&&(o(0,"div",42)(1,"mat-icon",43),c(2,"image"),r()())}function Oe(t,l){if(t&1&&(o(0,"div",26),g(1,Ae,2,4,"img",41)(2,$e,3,0,"div",42),r()),t&2){let e=s().$implicit;d("text-align",(e.style==null?null:e.style.textAlign)||"center"),i(),m(e.staticContent?1:2)}}function Ue(t,l){if(t&1&&h(0,"hr",44),t&2){let e=s().$implicit;d("border-color",(e.style==null?null:e.style.color)||"#E5E7EB")}}function We(t,l){if(t&1&&h(0,"div"),t&2){let e=s().$implicit;d("height",(e.style==null?null:e.style.padding)||16,"px")}}function Ve(t,l){if(t&1){let e=O();o(0,"div",22),b("click",function(){let a=z(e).$implicit,p=s();return B(p.clickable()&&p.sectionClick()?p.sectionClick()(a):null)}),g(1,Me,4,11,"div",23)(2,Fe,4,11,"div",24)(3,je,6,12,"div",25)(4,Be,7,2,"div",26)(5,Oe,3,3,"div",23)(6,Ue,1,2,"hr",27)(7,We,1,2,"div",28),r()}if(t&2){let e=l.$implicit,n=s();j("cursor-pointer",n.clickable())("ring-2",n.clickable()&&n.selectedSectionId()===e.id)("ring-indigo-400",n.clickable()&&n.selectedSectionId()===e.id)("rounded-md",n.clickable()&&n.selectedSectionId()===e.id),i(),m(e.type==="header"?1:-1),i(),m(e.type==="text"?2:-1),i(),m(e.type==="field"?3:-1),i(),m(e.type==="table"?4:-1),i(),m(e.type==="image"?5:-1),i(),m(e.type==="divider"?6:-1),i(),m(e.type==="spacer"?7:-1)}}function qe(t,l){if(t&1&&(o(0,"div",45)(1,"p",47),c(2),r()()),t&2){let e=s(2);i(2),y(" ",e.legend()," ")}}function Ge(t,l){if(t&1&&(o(0,"div",48),c(1," Page 1 of 1 "),r()),t&2){let e=s(2);d("text-align",e.pageNumberPosition()==="bottom-left"?"left":e.pageNumberPosition()==="bottom-right"?"right":"center"),j("border-t",!e.legend())("border-gray-200",!e.legend())("pt-3",!e.legend())}}function Le(t,l){if(t&1&&(o(0,"div",6),g(1,qe,3,1,"div",45)(2,Ge,2,8,"div",46),r()),t&2){let e=s();i(),m(e.legend()?1:-1),i(),m(e.showPageNumbers()&&e.pageNumberPosition().startsWith("bottom")?2:-1)}}var rt=(()=>{class t{constructor(){this.template=x.required(),this.previewData=x.required(),this.primaryColor=x("#4F46E5"),this.orientation=x("portrait"),this.clickable=x(!1),this.selectedSectionId=x(null),this.sectionClick=x(null),this.logoUrl=x(null),this.legend=x(""),this.showPageNumbers=x(!1),this.pageNumberPosition=x("bottom-center"),this.watermarkEnabled=x(!1),this.watermarkType=x("text"),this.watermarkText=x("CONFIDENTIAL"),this.watermarkOpacity=x(.08),this.watermarkPattern=x("single")}resolveDataPath(e){if(!e)return"";let n=this.previewData(),a=e.split("."),p=n;for(let _ of a){if(p==null||typeof p!="object")return"";p=p[_]}return p==null?"":typeof p=="object"?JSON.stringify(p):String(p)}resolveTableData(e){if(!e)return[];let n=this.previewData(),a=e.split("."),p=n;for(let _ of a){if(p==null||typeof p!="object")return[];p=p[_]}return p==null||typeof p!="object"?[]:Object.entries(p).map(([_,D])=>({key:this._humanize(_),value:D!=null?String(D):""}))}_humanize(e){return e.replace(/([A-Z])/g," $1").replace(/_/g," ").replace(/^./,n=>n.toUpperCase()).trim()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=S({type:t,selectors:[["report-preview"]],inputs:{template:[1,"template"],previewData:[1,"previewData"],primaryColor:[1,"primaryColor"],orientation:[1,"orientation"],clickable:[1,"clickable"],selectedSectionId:[1,"selectedSectionId"],sectionClick:[1,"sectionClick"],logoUrl:[1,"logoUrl"],legend:[1,"legend"],showPageNumbers:[1,"showPageNumbers"],pageNumberPosition:[1,"pageNumberPosition"],watermarkEnabled:[1,"watermarkEnabled"],watermarkType:[1,"watermarkType"],watermarkText:[1,"watermarkText"],watermarkOpacity:[1,"watermarkOpacity"],watermarkPattern:[1,"watermarkPattern"]},decls:9,vars:9,consts:[[1,"bg-white","rounded-lg","shadow-lg","mx-auto","overflow-hidden","flex","flex-col","relative",2,"border","1px solid #e5e7eb"],[1,"px-8","pt-4","text-[10px]","text-gray-400",3,"text-align"],[1,"p-8","sm:p-10","lg:p-12","flex-1"],[1,"mb-6"],[1,"flex","flex-col","items-center","justify-center","h-64","text-gray-300"],[1,"transition-all","duration-200",3,"cursor-pointer","ring-2","ring-indigo-400","rounded-md"],[1,"px-8","sm:px-10","lg:px-12","pb-6","mt-auto"],[1,"absolute","inset-0","flex","items-center","justify-center","pointer-events-none","z-10","overflow-hidden"],[1,"absolute","inset-0","pointer-events-none","z-10","overflow-hidden",2,"display","grid","grid-template-columns","repeat(3, 1fr)","grid-template-rows","repeat(5, 1fr)","gap","0"],[1,"text-gray-500","font-bold","select-none","whitespace-nowrap",2,"font-size","72px","transform","rotate(-35deg)","letter-spacing","8px",3,"opacity"],["alt","Watermark",1,"select-none","max-w-[60%]","max-h-[40%]","object-contain",2,"transform","rotate(-15deg)",3,"src","opacity"],[1,"text-gray-500","font-bold","select-none","whitespace-nowrap",2,"font-size","72px","transform","rotate(-35deg)","letter-spacing","8px"],["alt","Watermark",1,"select-none","max-w-[60%]","max-h-[40%]","object-contain",2,"transform","rotate(-15deg)",3,"src"],[1,"flex","items-center","justify-center"],[1,"text-gray-500","font-bold","select-none","whitespace-nowrap",2,"font-size","18px","transform","rotate(-35deg)","letter-spacing","3px",3,"opacity"],["alt","",1,"select-none","w-16","h-16","object-contain",2,"transform","rotate(-15deg)",3,"src","opacity"],[1,"text-gray-500","font-bold","select-none","whitespace-nowrap",2,"font-size","18px","transform","rotate(-35deg)","letter-spacing","3px"],["alt","",1,"select-none","w-16","h-16","object-contain",2,"transform","rotate(-15deg)",3,"src"],[1,"px-8","pt-4","text-[10px]","text-gray-400"],["alt","Logo",1,"h-10","max-w-[180px]","object-contain",3,"src"],[1,"!text-5xl","!w-14","!h-14","mb-3"],[1,"text-sm"],[1,"transition-all","duration-200",3,"click"],[1,"mb-4",3,"text-align"],[1,"mb-3"],[1,"flex","gap-3","py-2.5","border-b","border-gray-100",3,"text-align"],[1,"mb-4"],[1,"my-4",2,"border-width","1px",3,"border-color"],[3,"height"],[1,"leading-tight"],[1,"leading-relaxed","whitespace-pre-wrap"],[1,"flex","gap-3","py-2.5","border-b","border-gray-100"],[1,"text-gray-500","min-w-[140px]","shrink-0"],[1,"text-gray-900","font-medium"],[1,"text-xs","font-semibold","text-gray-500","uppercase","tracking-wide","mb-2",3,"color"],[1,"w-full","text-sm"],[1,"border-b","border-gray-100"],[1,"text-xs","font-semibold","text-gray-500","uppercase","tracking-wide","mb-2"],[1,"py-2","pr-4","text-gray-500","w-1/3"],[1,"py-2","text-gray-900","font-medium"],["colspan","2",1,"py-4","text-center","text-gray-300","text-xs"],[1,"max-h-32","inline-block","rounded",2,"max-width","100%",3,"src","alt"],[1,"inline-flex","items-center","justify-center","w-48","h-24","bg-gray-100","rounded-lg","text-gray-300"],[1,"!text-3xl"],[1,"my-4",2,"border-width","1px"],[1,"border-t","border-gray-200","pt-3","mb-2"],[1,"text-[10px]","text-gray-400",3,"border-t","border-gray-200","pt-3","text-align"],[1,"text-[10px]","text-gray-400","leading-relaxed","whitespace-pre-wrap"],[1,"text-[10px]","text-gray-400"]],template:function(n,a){if(n&1&&(o(0,"div",0),g(1,Re,2,1)(2,Te,2,2,"div",1),o(3,"div",2),g(4,Ee,2,1,"div",3)(5,Ie,6,3,"div",4),k(6,Ve,8,15,"div",5,ve),r(),g(8,Le,3,2,"div",6),r()),n&2){let p;d("max-width",a.orientation()==="landscape"?"297mm":"210mm")("min-height",a.orientation()==="landscape"?"210mm":"297mm"),i(),m(a.watermarkEnabled()?1:-1),i(),m(a.showPageNumbers()&&a.pageNumberPosition().startsWith("top")?2:-1),i(2),m(a.logoUrl()?4:-1),i(),m(((p=a.template().sections)==null?null:p.length)===0?5:-1),i(),R(a.template().sections),i(2),m(a.legend()||a.showPageNumbers()&&a.pageNumberPosition().startsWith("bottom")?8:-1)}},dependencies:[T,I,E,F,M],encapsulation:2})}}return t})();function Ze(t,l){t&1&&(o(0,"mat-error"),c(1),u(2,"transloco"),r()),t&2&&(i(),v(f(2,1,"smartReport.atLeastOneRecipient")))}function He(t,l){t&1&&(o(0,"mat-error"),c(1),u(2,"transloco"),r()),t&2&&(i(),v(f(2,1,"smartReport.enterValidEmails")))}var ue=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;function Je(t){let l=(t.value||"").trim();if(!l)return{required:!0};let e=l.split(",").map(a=>a.trim()).filter(a=>!!a);if(e.length===0)return{required:!0};let n=e.filter(a=>!ue.test(a));return n.length>0?{invalidEmails:{value:n}}:null}var ht=(()=>{class t{get isSample(){return this._data?.isSample!==!1}get subjectPlaceholder(){return this.isSample?this._transloco.translate("smartReport.subjectOptionalPlaceholder"):this._transloco.translate("smartReport.reportBatchPlaceholder")}constructor(){this._dialogRef=w(q),this._fb=w(pe),this._data=w(G,{optional:!0}),this._transloco=w(te);let e=this._data?.defaultSubject||(this._data?.isSample===!1?this._transloco.translate("smartReport.reportBatchPlaceholder"):this._transloco.translate("smartReport.subjectOptionalPlaceholder"));this.form=this._fb.group({recipients:["",[Je]],subject:[e,[]]})}onCancel(){this._dialogRef.close()}onSubmit(){let e=this.form.get("recipients");if(this.form.invalid||!e)return;let n=(e.value||"").split(",").map(_=>_.trim()).filter(_=>!!_),a=n.filter(_=>ue.test(_));if(a.length===0){e.setErrors(n.length===0?{required:!0}:{invalidEmails:{value:n}}),e.markAsTouched();return}let p={recipients:a,subject:this.form.get("subject")?.value?.trim()||void 0};this._dialogRef.close(p)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=S({type:t,selectors:[["send-sample-modal"]],decls:43,vars:29,consts:[[1,"flex","flex-col","w-full","max-w-lg"],[1,"px-6","pt-6","pb-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],[1,"w-12","h-12","rounded-xl","bg-gradient-to-br","from-indigo-500","to-purple-600","flex","items-center","justify-center","shadow-lg","shadow-indigo-500/25"],[1,"!w-6","!h-6","text-white","icon-size-6"],[1,"text-lg","font-bold","text-slate-900","dark:text-white"],[1,"text-sm","text-slate-500","dark:text-slate-400"],["mat-icon-button","",1,"!-mr-2",3,"click"],[1,"px-6","pb-6","space-y-4",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","recipients","rows","3",3,"placeholder"],["matInput","","formControlName","subject",3,"placeholder"],[1,"flex","gap-3","pt-2","justify-end","border-t","border-slate-200","dark:border-slate-700"],["mat-button","","type","button",1,"!text-slate-600",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"!rounded-xl","!bg-indigo-600","!text-white",3,"disabled"],[1,"!w-4","!h-4","mr-1"]],template:function(n,a){if(n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon",5),c(6,"send"),r()(),o(7,"div")(8,"h2",6),c(9),u(10,"transloco"),r(),o(11,"p",7),c(12),u(13,"transloco"),r()()(),o(14,"button",8),b("click",function(){return a.onCancel()}),o(15,"mat-icon"),c(16,"close"),r()()()(),o(17,"form",9),b("ngSubmit",function(){return a.onSubmit()}),o(18,"mat-form-field",10)(19,"mat-label"),c(20),u(21,"transloco"),r(),h(22,"textarea",11),u(23,"transloco"),o(24,"mat-hint"),c(25),u(26,"transloco"),r(),g(27,Ze,3,3,"mat-error")(28,He,3,3,"mat-error"),r(),o(29,"mat-form-field",10)(30,"mat-label"),c(31),u(32,"transloco"),r(),h(33,"input",12),r(),o(34,"div",13)(35,"button",14),b("click",function(){return a.onCancel()}),c(36),u(37,"transloco"),r(),o(38,"button",15)(39,"mat-icon",16),c(40,"send"),r(),c(41),u(42,"transloco"),r()()()()),n&2){let p,_;i(9),y(" ",f(10,13,a.isSample?"smartReport.sendSampleReport":"smartReport.sendReport")," "),i(3),y(" ",f(13,15,"smartReport.enterRecipientsAndSubject")," "),i(5),C("formGroup",a.form),i(3),v(f(21,17,"smartReport.recipientEmails")),i(2),C("placeholder",f(23,19,"smartReport.recipientsPlaceholder")),i(3),v(f(26,21,"smartReport.separateEmailsWithCommas")),i(2),m((p=a.form.get("recipients"))!=null&&p.hasError("required")&&((p=a.form.get("recipients"))!=null&&p.touched)?27:-1),i(),m((_=a.form.get("recipients"))!=null&&_.hasError("invalidEmails")&&((_=a.form.get("recipients"))!=null&&_.touched)?28:-1),i(3),v(f(32,23,"smartReport.subjectOptional")),i(2),C("placeholder",a.subjectPlaceholder),i(3),y(" ",f(37,25,"smartReport.cancel")," "),i(2),C("disabled",a.form.invalid||a.form.pending),i(3),y(" ",f(42,27,a.isSample?"smartReport.sendSample":"smartReport.sendReport")," ")}},dependencies:[T,ce,re,ie,ne,oe,ae,le,L,ee,Y,Q,I,E,K,X,Z,J,H,me,se,F,M],styles:["[_nghost-%COMP%]{display:block}"]})}}return t})();export{Qe as a,rt as b,ht as c};
