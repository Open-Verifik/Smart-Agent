import{b as hi}from"./chunk-SKXSK7GX.js";import"./chunk-7V66VJRF.js";import{a as ii}from"./chunk-SB3LRQOP.js";import"./chunk-NJIOGT5G.js";import"./chunk-3RK6DDJD.js";import{a as pt}from"./chunk-STGHSSWS.js";import"./chunk-3NHKQZ4H.js";import"./chunk-FSN63N44.js";import"./chunk-XRBOLGPP.js";import"./chunk-LLQ6WMTJ.js";import{a as mi}from"./chunk-QD66ZOCP.js";import"./chunk-B3RXEAUW.js";import"./chunk-SJCCPM3Q.js";import"./chunk-IEVXMBCH.js";import{a as ui,b as pi}from"./chunk-MVXXFAEU.js";import{a as Oe,b as De,c as ni,h as ge}from"./chunk-BJAZCYPM.js";import{a as li,b as ci}from"./chunk-53WRULVM.js";import{c as ce,d as de}from"./chunk-YTRC6VXI.js";import"./chunk-QIQIZ3Q6.js";import"./chunk-DHV22PVR.js";import"./chunk-CTJ3YQQD.js";import"./chunk-ZAUDAUJV.js";import{A as qe,a as di,c as ut,h as Le,l as Ne}from"./chunk-QWR6CIPV.js";import"./chunk-MVN6OMHF.js";import{E as Ut,N as jt,O as ri,R as oi,S as ai,U as si,V as $e,X as be,Z as se,_ as le,l as ei,n as ti}from"./chunk-KMUH6FME.js";import{$ as En,$c as dt,Aa as zt,Ab as ct,Ac as me,Ba as Rn,Bb as $t,Bc as qt,Cb as re,Db as oe,Ea as Ot,Eb as c,Fb as d,Ga as M,Gb as $,Hb as Ce,Ib as ve,Ka as Vn,Kb as N,Mb as w,Nb as f,Oa as Fn,Ob as Nn,Pb as qn,Qb as Un,Qc as Qn,Ra as zn,Rb as Ke,Sa as ee,Sb as Fe,Tb as ze,Wa as u,Wb as jn,Xb as p,Yb as F,Za as On,Zb as b,Zc as Kn,_a as U,_b as Hn,_c as Xn,ba as An,bc as ye,bd as Zn,cc as Ie,cd as ae,da as Ft,dc as Se,fb as K,fc as Gn,ga as q,gb as Dn,gc as Wn,hb as $n,ib as Ln,kd as Jn,lb as I,oc as x,od as Yn,pc as _,pd as H,qa as C,qc as te,ra as v,rb as Dt,rc as Lt,sb as E,ub as j,wa as Pn,xa as Bn,yc as Nt,zb as y}from"./chunk-BMVGBJ55.js";import{a as D,b as Y,e as R,g as jr,i as L}from"./chunk-66YHNWRR.js";var gi=R((qs,fi)=>{fi.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var xe=R(Te=>{var Ht,Hr=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Te.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Te.getSymbolTotalCodewords=function(t){return Hr[t]};Te.getBCHDigit=function(i){let t=0;for(;i!==0;)t++,i>>>=1;return t};Te.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Ht=t};Te.isKanjiModeEnabled=function(){return typeof Ht<"u"};Te.toSJIS=function(t){return Ht(t)}});var mt=R(X=>{X.L={bit:1};X.M={bit:0};X.Q={bit:3};X.H={bit:2};function Gr(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return X.L;case"m":case"medium":return X.M;case"q":case"quartile":return X.Q;case"h":case"high":return X.H;default:throw new Error("Unknown EC Level: "+i)}}X.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4};X.from=function(t,e){if(X.isValid(t))return t;try{return Gr(t)}catch{return e}}});var _i=R((Hs,xi)=>{function bi(){this.buffer=[],this.length=0}bi.prototype={get:function(i){let t=Math.floor(i/8);return(this.buffer[t]>>>7-i%8&1)===1},put:function(i,t){for(let e=0;e<t;e++)this.putBit((i>>>t-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),i&&(this.buffer[t]|=128>>>this.length%8),this.length++}};xi.exports=bi});var wi=R((Gs,ki)=>{function Xe(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}Xe.prototype.set=function(i,t,e,r){let n=i*this.size+t;this.data[n]=e,r&&(this.reservedBit[n]=!0)};Xe.prototype.get=function(i,t){return this.data[i*this.size+t]};Xe.prototype.xor=function(i,t,e){this.data[i*this.size+t]^=e};Xe.prototype.isReserved=function(i,t){return this.reservedBit[i*this.size+t]};ki.exports=Xe});var Ci=R(ht=>{var Wr=xe().getSymbolSize;ht.getRowColCoords=function(t){if(t===1)return[];let e=Math.floor(t/7)+2,r=Wr(t),n=r===145?26:Math.ceil((r-13)/(2*e-2))*2,o=[r-7];for(let a=1;a<e-1;a++)o[a]=o[a-1]-n;return o.push(6),o.reverse()};ht.getPositions=function(t){let e=[],r=ht.getRowColCoords(t),n=r.length;for(let o=0;o<n;o++)for(let a=0;a<n;a++)o===0&&a===0||o===0&&a===n-1||o===n-1&&a===0||e.push([r[o],r[a]]);return e}});var Ii=R(yi=>{var Qr=xe().getSymbolSize,vi=7;yi.getPositions=function(t){let e=Qr(t);return[[0,0],[e-vi,0],[0,e-vi]]}});var Si=R(V=>{V.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Me={N1:3,N2:3,N3:40,N4:10};V.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7};V.from=function(t){return V.isValid(t)?parseInt(t,10):void 0};V.getPenaltyN1=function(t){let e=t.size,r=0,n=0,o=0,a=null,l=null;for(let s=0;s<e;s++){n=o=0,a=l=null;for(let h=0;h<e;h++){let m=t.get(s,h);m===a?n++:(n>=5&&(r+=Me.N1+(n-5)),a=m,n=1),m=t.get(h,s),m===l?o++:(o>=5&&(r+=Me.N1+(o-5)),l=m,o=1)}n>=5&&(r+=Me.N1+(n-5)),o>=5&&(r+=Me.N1+(o-5))}return r};V.getPenaltyN2=function(t){let e=t.size,r=0;for(let n=0;n<e-1;n++)for(let o=0;o<e-1;o++){let a=t.get(n,o)+t.get(n,o+1)+t.get(n+1,o)+t.get(n+1,o+1);(a===4||a===0)&&r++}return r*Me.N2};V.getPenaltyN3=function(t){let e=t.size,r=0,n=0,o=0;for(let a=0;a<e;a++){n=o=0;for(let l=0;l<e;l++)n=n<<1&2047|t.get(a,l),l>=10&&(n===1488||n===93)&&r++,o=o<<1&2047|t.get(l,a),l>=10&&(o===1488||o===93)&&r++}return r*Me.N3};V.getPenaltyN4=function(t){let e=0,r=t.data.length;for(let o=0;o<r;o++)e+=t.data[o];return Math.abs(Math.ceil(e*100/r/5)-10)*Me.N4};function Kr(i,t,e){switch(i){case V.Patterns.PATTERN000:return(t+e)%2===0;case V.Patterns.PATTERN001:return t%2===0;case V.Patterns.PATTERN010:return e%3===0;case V.Patterns.PATTERN011:return(t+e)%3===0;case V.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(e/3))%2===0;case V.Patterns.PATTERN101:return t*e%2+t*e%3===0;case V.Patterns.PATTERN110:return(t*e%2+t*e%3)%2===0;case V.Patterns.PATTERN111:return(t*e%3+(t+e)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}V.applyMask=function(t,e){let r=e.size;for(let n=0;n<r;n++)for(let o=0;o<r;o++)e.isReserved(o,n)||e.xor(o,n,Kr(t,o,n))};V.getBestMask=function(t,e){let r=Object.keys(V.Patterns).length,n=0,o=1/0;for(let a=0;a<r;a++){e(a),V.applyMask(a,t);let l=V.getPenaltyN1(t)+V.getPenaltyN2(t)+V.getPenaltyN3(t)+V.getPenaltyN4(t);V.applyMask(a,t),l<o&&(o=l,n=a)}return n}});var Wt=R(Gt=>{var _e=mt(),ft=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],gt=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Gt.getBlocksCount=function(t,e){switch(e){case _e.L:return ft[(t-1)*4+0];case _e.M:return ft[(t-1)*4+1];case _e.Q:return ft[(t-1)*4+2];case _e.H:return ft[(t-1)*4+3];default:return}};Gt.getTotalCodewordsCount=function(t,e){switch(e){case _e.L:return gt[(t-1)*4+0];case _e.M:return gt[(t-1)*4+1];case _e.Q:return gt[(t-1)*4+2];case _e.H:return gt[(t-1)*4+3];default:return}}});var Ti=R(xt=>{var Ze=new Uint8Array(512),bt=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)Ze[e]=t,bt[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)Ze[e]=Ze[e-255]})();xt.log=function(t){if(t<1)throw new Error("log("+t+")");return bt[t]};xt.exp=function(t){return Ze[t]};xt.mul=function(t,e){return t===0||e===0?0:Ze[bt[t]+bt[e]]}});var Mi=R(Je=>{var Qt=Ti();Je.mul=function(t,e){let r=new Uint8Array(t.length+e.length-1);for(let n=0;n<t.length;n++)for(let o=0;o<e.length;o++)r[n+o]^=Qt.mul(t[n],e[o]);return r};Je.mod=function(t,e){let r=new Uint8Array(t);for(;r.length-e.length>=0;){let n=r[0];for(let a=0;a<e.length;a++)r[a]^=Qt.mul(e[a],n);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};Je.generateECPolynomial=function(t){let e=new Uint8Array([1]);for(let r=0;r<t;r++)e=Je.mul(e,new Uint8Array([1,Qt.exp(r)]));return e}});var Pi=R((Ys,Ai)=>{var Ei=Mi();function Kt(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}Kt.prototype.initialize=function(t){this.degree=t,this.genPoly=Ei.generateECPolynomial(this.degree)};Kt.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");let e=new Uint8Array(t.length+this.degree);e.set(t);let r=Ei.mod(e,this.genPoly),n=this.degree-r.length;if(n>0){let o=new Uint8Array(this.degree);return o.set(r,n),o}return r};Ai.exports=Kt});var Xt=R(Bi=>{Bi.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}});var Zt=R(he=>{var Ri="[0-9]+",Xr="[A-Z $%*+\\-./:]+",Ye="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ye=Ye.replace(/u/g,"\\u");var Zr="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ye+`)(?:.|[\r
]))+`;he.KANJI=new RegExp(Ye,"g");he.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");he.BYTE=new RegExp(Zr,"g");he.NUMERIC=new RegExp(Ri,"g");he.ALPHANUMERIC=new RegExp(Xr,"g");var Jr=new RegExp("^"+Ye+"$"),Yr=new RegExp("^"+Ri+"$"),eo=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");he.testKanji=function(t){return Jr.test(t)};he.testNumeric=function(t){return Yr.test(t)};he.testAlphanumeric=function(t){return eo.test(t)}});var ke=R(O=>{var to=Xt(),Jt=Zt();O.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};O.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};O.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};O.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};O.MIXED={bit:-1};O.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!to.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]};O.getBestModeForData=function(t){return Jt.testNumeric(t)?O.NUMERIC:Jt.testAlphanumeric(t)?O.ALPHANUMERIC:Jt.testKanji(t)?O.KANJI:O.BYTE};O.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")};O.isValid=function(t){return t&&t.bit&&t.ccBits};function no(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return O.NUMERIC;case"alphanumeric":return O.ALPHANUMERIC;case"kanji":return O.KANJI;case"byte":return O.BYTE;default:throw new Error("Unknown mode: "+i)}}O.from=function(t,e){if(O.isValid(t))return t;try{return no(t)}catch{return e}}});var Di=R(Ee=>{var _t=xe(),io=Wt(),Vi=mt(),we=ke(),Yt=Xt(),zi=7973,Fi=_t.getBCHDigit(zi);function ro(i,t,e){for(let r=1;r<=40;r++)if(t<=Ee.getCapacity(r,e,i))return r}function Oi(i,t){return we.getCharCountIndicator(i,t)+4}function oo(i,t){let e=0;return i.forEach(function(r){let n=Oi(r.mode,t);e+=n+r.getBitsLength()}),e}function ao(i,t){for(let e=1;e<=40;e++)if(oo(i,e)<=Ee.getCapacity(e,t,we.MIXED))return e}Ee.from=function(t,e){return Yt.isValid(t)?parseInt(t,10):e};Ee.getCapacity=function(t,e,r){if(!Yt.isValid(t))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=we.BYTE);let n=_t.getSymbolTotalCodewords(t),o=io.getTotalCodewordsCount(t,e),a=(n-o)*8;if(r===we.MIXED)return a;let l=a-Oi(r,t);switch(r){case we.NUMERIC:return Math.floor(l/10*3);case we.ALPHANUMERIC:return Math.floor(l/11*2);case we.KANJI:return Math.floor(l/13);case we.BYTE:default:return Math.floor(l/8)}};Ee.getBestVersionForData=function(t,e){let r,n=Vi.from(e,Vi.M);if(Array.isArray(t)){if(t.length>1)return ao(t,n);if(t.length===0)return 1;r=t[0]}else r=t;return ro(r.mode,r.getLength(),n)};Ee.getEncodedBits=function(t){if(!Yt.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;for(;_t.getBCHDigit(e)-Fi>=0;)e^=zi<<_t.getBCHDigit(e)-Fi;return t<<12|e}});var qi=R(Ni=>{var en=xe(),Li=1335,so=21522,$i=en.getBCHDigit(Li);Ni.getEncodedBits=function(t,e){let r=t.bit<<3|e,n=r<<10;for(;en.getBCHDigit(n)-$i>=0;)n^=Li<<en.getBCHDigit(n)-$i;return(r<<10|n)^so}});var ji=R((ol,Ui)=>{var lo=ke();function Ue(i){this.mode=lo.NUMERIC,this.data=i.toString()}Ue.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Ue.prototype.getLength=function(){return this.data.length};Ue.prototype.getBitsLength=function(){return Ue.getBitsLength(this.data.length)};Ue.prototype.write=function(t){let e,r,n;for(e=0;e+3<=this.data.length;e+=3)r=this.data.substr(e,3),n=parseInt(r,10),t.put(n,10);let o=this.data.length-e;o>0&&(r=this.data.substr(e),n=parseInt(r,10),t.put(n,o*3+1))};Ui.exports=Ue});var Gi=R((al,Hi)=>{var co=ke(),tn=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function je(i){this.mode=co.ALPHANUMERIC,this.data=i}je.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};je.prototype.getLength=function(){return this.data.length};je.prototype.getBitsLength=function(){return je.getBitsLength(this.data.length)};je.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let r=tn.indexOf(this.data[e])*45;r+=tn.indexOf(this.data[e+1]),t.put(r,11)}this.data.length%2&&t.put(tn.indexOf(this.data[e]),6)};Hi.exports=je});var Qi=R((sl,Wi)=>{var uo=ke();function He(i){this.mode=uo.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}He.getBitsLength=function(t){return t*8};He.prototype.getLength=function(){return this.data.length};He.prototype.getBitsLength=function(){return He.getBitsLength(this.data.length)};He.prototype.write=function(i){for(let t=0,e=this.data.length;t<e;t++)i.put(this.data[t],8)};Wi.exports=He});var Xi=R((ll,Ki)=>{var po=ke(),mo=xe();function Ge(i){this.mode=po.KANJI,this.data=i}Ge.getBitsLength=function(t){return t*13};Ge.prototype.getLength=function(){return this.data.length};Ge.prototype.getBitsLength=function(){return Ge.getBitsLength(this.data.length)};Ge.prototype.write=function(i){let t;for(t=0;t<this.data.length;t++){let e=mo.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),i.put(e,13)}};Ki.exports=Ge});var Zi=R((cl,nn)=>{"use strict";var et={single_source_shortest_paths:function(i,t,e){var r={},n={};n[t]=0;var o=et.PriorityQueue.make();o.push(t,0);for(var a,l,s,h,m,k,g,S,T;!o.empty();){a=o.pop(),l=a.value,h=a.cost,m=i[l]||{};for(s in m)m.hasOwnProperty(s)&&(k=m[s],g=h+k,S=n[s],T=typeof n[s]>"u",(T||S>g)&&(n[s]=g,o.push(s,g),r[s]=l))}if(typeof e<"u"&&typeof n[e]>"u"){var z=["Could not find a path from ",t," to ",e,"."].join("");throw new Error(z)}return r},extract_shortest_path_from_predecessor_list:function(i,t){for(var e=[],r=t,n;r;)e.push(r),n=i[r],r=i[r];return e.reverse(),e},find_path:function(i,t,e){var r=et.single_source_shortest_paths(i,t,e);return et.extract_shortest_path_from_predecessor_list(r,e)},PriorityQueue:{make:function(i){var t=et.PriorityQueue,e={},r;i=i||{};for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e.queue=[],e.sorter=i.sorter||t.default_sorter,e},default_sorter:function(i,t){return i.cost-t.cost},push:function(i,t){var e={value:i,cost:t};this.queue.push(e),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof nn<"u"&&(nn.exports=et)});var or=R(We=>{var P=ke(),er=ji(),tr=Gi(),nr=Qi(),ir=Xi(),tt=Zt(),kt=xe(),ho=Zi();function Ji(i){return unescape(encodeURIComponent(i)).length}function nt(i,t,e){let r=[],n;for(;(n=i.exec(e))!==null;)r.push({data:n[0],index:n.index,mode:t,length:n[0].length});return r}function rr(i){let t=nt(tt.NUMERIC,P.NUMERIC,i),e=nt(tt.ALPHANUMERIC,P.ALPHANUMERIC,i),r,n;return kt.isKanjiModeEnabled()?(r=nt(tt.BYTE,P.BYTE,i),n=nt(tt.KANJI,P.KANJI,i)):(r=nt(tt.BYTE_KANJI,P.BYTE,i),n=[]),t.concat(e,r,n).sort(function(a,l){return a.index-l.index}).map(function(a){return{data:a.data,mode:a.mode,length:a.length}})}function rn(i,t){switch(t){case P.NUMERIC:return er.getBitsLength(i);case P.ALPHANUMERIC:return tr.getBitsLength(i);case P.KANJI:return ir.getBitsLength(i);case P.BYTE:return nr.getBitsLength(i)}}function fo(i){return i.reduce(function(t,e){let r=t.length-1>=0?t[t.length-1]:null;return r&&r.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)},[])}function go(i){let t=[];for(let e=0;e<i.length;e++){let r=i[e];switch(r.mode){case P.NUMERIC:t.push([r,{data:r.data,mode:P.ALPHANUMERIC,length:r.length},{data:r.data,mode:P.BYTE,length:r.length}]);break;case P.ALPHANUMERIC:t.push([r,{data:r.data,mode:P.BYTE,length:r.length}]);break;case P.KANJI:t.push([r,{data:r.data,mode:P.BYTE,length:Ji(r.data)}]);break;case P.BYTE:t.push([{data:r.data,mode:P.BYTE,length:Ji(r.data)}])}}return t}function bo(i,t){let e={},r={start:{}},n=["start"];for(let o=0;o<i.length;o++){let a=i[o],l=[];for(let s=0;s<a.length;s++){let h=a[s],m=""+o+s;l.push(m),e[m]={node:h,lastCount:0},r[m]={};for(let k=0;k<n.length;k++){let g=n[k];e[g]&&e[g].node.mode===h.mode?(r[g][m]=rn(e[g].lastCount+h.length,h.mode)-rn(e[g].lastCount,h.mode),e[g].lastCount+=h.length):(e[g]&&(e[g].lastCount=h.length),r[g][m]=rn(h.length,h.mode)+4+P.getCharCountIndicator(h.mode,t))}}n=l}for(let o=0;o<n.length;o++)r[n[o]].end=0;return{map:r,table:e}}function Yi(i,t){let e,r=P.getBestModeForData(i);if(e=P.from(t,r),e!==P.BYTE&&e.bit<r.bit)throw new Error('"'+i+'" cannot be encoded with mode '+P.toString(e)+`.
 Suggested mode is: `+P.toString(r));switch(e===P.KANJI&&!kt.isKanjiModeEnabled()&&(e=P.BYTE),e){case P.NUMERIC:return new er(i);case P.ALPHANUMERIC:return new tr(i);case P.KANJI:return new ir(i);case P.BYTE:return new nr(i)}}We.fromArray=function(t){return t.reduce(function(e,r){return typeof r=="string"?e.push(Yi(r,null)):r.data&&e.push(Yi(r.data,r.mode)),e},[])};We.fromString=function(t,e){let r=rr(t,kt.isKanjiModeEnabled()),n=go(r),o=bo(n,e),a=ho.find_path(o.map,"start","end"),l=[];for(let s=1;s<a.length-1;s++)l.push(o.table[a[s]].node);return We.fromArray(fo(l))};We.rawSplit=function(t){return We.fromArray(rr(t,kt.isKanjiModeEnabled()))}});var sr=R(ar=>{var Ct=xe(),on=mt(),xo=_i(),_o=wi(),ko=Ci(),wo=Ii(),ln=Si(),cn=Wt(),Co=Pi(),wt=Di(),vo=qi(),yo=ke(),an=or();function Io(i,t){let e=i.size,r=wo.getPositions(t);for(let n=0;n<r.length;n++){let o=r[n][0],a=r[n][1];for(let l=-1;l<=7;l++)if(!(o+l<=-1||e<=o+l))for(let s=-1;s<=7;s++)a+s<=-1||e<=a+s||(l>=0&&l<=6&&(s===0||s===6)||s>=0&&s<=6&&(l===0||l===6)||l>=2&&l<=4&&s>=2&&s<=4?i.set(o+l,a+s,!0,!0):i.set(o+l,a+s,!1,!0))}}function So(i){let t=i.size;for(let e=8;e<t-8;e++){let r=e%2===0;i.set(e,6,r,!0),i.set(6,e,r,!0)}}function To(i,t){let e=ko.getPositions(t);for(let r=0;r<e.length;r++){let n=e[r][0],o=e[r][1];for(let a=-2;a<=2;a++)for(let l=-2;l<=2;l++)a===-2||a===2||l===-2||l===2||a===0&&l===0?i.set(n+a,o+l,!0,!0):i.set(n+a,o+l,!1,!0)}}function Mo(i,t){let e=i.size,r=wt.getEncodedBits(t),n,o,a;for(let l=0;l<18;l++)n=Math.floor(l/3),o=l%3+e-8-3,a=(r>>l&1)===1,i.set(n,o,a,!0),i.set(o,n,a,!0)}function sn(i,t,e){let r=i.size,n=vo.getEncodedBits(t,e),o,a;for(o=0;o<15;o++)a=(n>>o&1)===1,o<6?i.set(o,8,a,!0):o<8?i.set(o+1,8,a,!0):i.set(r-15+o,8,a,!0),o<8?i.set(8,r-o-1,a,!0):o<9?i.set(8,15-o-1+1,a,!0):i.set(8,15-o-1,a,!0);i.set(r-8,8,1,!0)}function Eo(i,t){let e=i.size,r=-1,n=e-1,o=7,a=0;for(let l=e-1;l>0;l-=2)for(l===6&&l--;;){for(let s=0;s<2;s++)if(!i.isReserved(n,l-s)){let h=!1;a<t.length&&(h=(t[a]>>>o&1)===1),i.set(n,l-s,h),o--,o===-1&&(a++,o=7)}if(n+=r,n<0||e<=n){n-=r,r=-r;break}}}function Ao(i,t,e){let r=new xo;e.forEach(function(s){r.put(s.mode.bit,4),r.put(s.getLength(),yo.getCharCountIndicator(s.mode,i)),s.write(r)});let n=Ct.getSymbolTotalCodewords(i),o=cn.getTotalCodewordsCount(i,t),a=(n-o)*8;for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let l=(a-r.getLengthInBits())/8;for(let s=0;s<l;s++)r.put(s%2?17:236,8);return Po(r,i,t)}function Po(i,t,e){let r=Ct.getSymbolTotalCodewords(t),n=cn.getTotalCodewordsCount(t,e),o=r-n,a=cn.getBlocksCount(t,e),l=r%a,s=a-l,h=Math.floor(r/a),m=Math.floor(o/a),k=m+1,g=h-m,S=new Co(g),T=0,z=new Array(a),Q=new Array(a),Z=0,J=new Uint8Array(i.buffer);for(let Ve=0;Ve<a;Ve++){let Vt=Ve<s?m:k;z[Ve]=J.slice(T,T+Vt),Q[Ve]=S.encode(z[Ve]),T+=Vt,Z=Math.max(Z,Vt)}let ue=new Uint8Array(r),Re=0,G,pe;for(G=0;G<Z;G++)for(pe=0;pe<a;pe++)G<z[pe].length&&(ue[Re++]=z[pe][G]);for(G=0;G<g;G++)for(pe=0;pe<a;pe++)ue[Re++]=Q[pe][G];return ue}function Bo(i,t,e,r){let n;if(Array.isArray(i))n=an.fromArray(i);else if(typeof i=="string"){let h=t;if(!h){let m=an.rawSplit(i);h=wt.getBestVersionForData(m,e)}n=an.fromString(i,h||40)}else throw new Error("Invalid data");let o=wt.getBestVersionForData(n,e);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=o;else if(t<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let a=Ao(t,e,n),l=Ct.getSymbolSize(t),s=new _o(l);return Io(s,t),So(s),To(s,t),sn(s,e,0),t>=7&&Mo(s,t),Eo(s,a),isNaN(r)&&(r=ln.getBestMask(s,sn.bind(null,s,e))),ln.applyMask(r,s),sn(s,e,r),{modules:s,version:t,errorCorrectionLevel:e,maskPattern:r,segments:n}}ar.create=function(t,e){if(typeof t>"u"||t==="")throw new Error("No input text");let r=on.M,n,o;return typeof e<"u"&&(r=on.from(e.errorCorrectionLevel,on.M),n=wt.from(e.version),o=ln.from(e.maskPattern),e.toSJISFunc&&Ct.setToSJISFunction(e.toSJISFunc)),Bo(t,n,r,o)}});var dn=R(Ae=>{function lr(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let t=i.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+i);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(r){return[r,r]}))),t.length===6&&t.push("F","F");let e=parseInt(t.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:e&255,hex:"#"+t.slice(0,6).join("")}}Ae.getOptions=function(t){t||(t={}),t.color||(t.color={});let e=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,n=t.scale||4;return{width:r,scale:r?4:n,margin:e,color:{dark:lr(t.color.dark||"#000000ff"),light:lr(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}};Ae.getScale=function(t,e){return e.width&&e.width>=t+e.margin*2?e.width/(t+e.margin*2):e.scale};Ae.getImageWidth=function(t,e){let r=Ae.getScale(t,e);return Math.floor((t+e.margin*2)*r)};Ae.qrToImageData=function(t,e,r){let n=e.modules.size,o=e.modules.data,a=Ae.getScale(n,r),l=Math.floor((n+r.margin*2)*a),s=r.margin*a,h=[r.color.light,r.color.dark];for(let m=0;m<l;m++)for(let k=0;k<l;k++){let g=(m*l+k)*4,S=r.color.light;if(m>=s&&k>=s&&m<l-s&&k<l-s){let T=Math.floor((m-s)/a),z=Math.floor((k-s)/a);S=h[o[T*n+z]?1:0]}t[g++]=S.r,t[g++]=S.g,t[g++]=S.b,t[g]=S.a}}});var cr=R(vt=>{var un=dn();function Ro(i,t,e){i.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=e,t.width=e,t.style.height=e+"px",t.style.width=e+"px"}function Vo(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}vt.render=function(t,e,r){let n=r,o=e;typeof n>"u"&&(!e||!e.getContext)&&(n=e,e=void 0),e||(o=Vo()),n=un.getOptions(n);let a=un.getImageWidth(t.modules.size,n),l=o.getContext("2d"),s=l.createImageData(a,a);return un.qrToImageData(s.data,t,n),Ro(l,o,a),l.putImageData(s,0,0),o};vt.renderToDataURL=function(t,e,r){let n=r;typeof n>"u"&&(!e||!e.getContext)&&(n=e,e=void 0),n||(n={});let o=vt.render(t,e,n),a=n.type||"image/png",l=n.rendererOpts||{};return o.toDataURL(a,l.quality)}});var pr=R(ur=>{var Fo=dn();function dr(i,t){let e=i.a/255,r=t+'="'+i.hex+'"';return e<1?r+" "+t+'-opacity="'+e.toFixed(2).slice(1)+'"':r}function pn(i,t,e){let r=i+t;return typeof e<"u"&&(r+=" "+e),r}function zo(i,t,e){let r="",n=0,o=!1,a=0;for(let l=0;l<i.length;l++){let s=Math.floor(l%t),h=Math.floor(l/t);!s&&!o&&(o=!0),i[l]?(a++,l>0&&s>0&&i[l-1]||(r+=o?pn("M",s+e,.5+h+e):pn("m",n,0),n=0,o=!1),s+1<t&&i[l+1]||(r+=pn("h",a),a=0)):n++}return r}ur.render=function(t,e,r){let n=Fo.getOptions(e),o=t.modules.size,a=t.modules.data,l=o+n.margin*2,s=n.color.light.a?"<path "+dr(n.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",h="<path "+dr(n.color.dark,"stroke")+' d="'+zo(a,o,n.margin)+'"/>',m='viewBox="0 0 '+l+" "+l+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+m+' shape-rendering="crispEdges">'+s+h+`</svg>
`;return typeof r=="function"&&r(null,g),g}});var hr=R(it=>{var Oo=gi(),mn=sr(),mr=cr(),Do=pr();function hn(i,t,e,r,n){let o=[].slice.call(arguments,1),a=o.length,l=typeof o[a-1]=="function";if(!l&&!Oo())throw new Error("Callback required as last argument");if(l){if(a<2)throw new Error("Too few arguments provided");a===2?(n=e,e=t,t=r=void 0):a===3&&(t.getContext&&typeof n>"u"?(n=r,r=void 0):(n=r,r=e,e=t,t=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(e=t,t=r=void 0):a===2&&!t.getContext&&(r=e,e=t,t=void 0),new Promise(function(s,h){try{let m=mn.create(e,r);s(i(m,t,r))}catch(m){h(m)}})}try{let s=mn.create(e,r);n(null,i(s,t,r))}catch(s){n(s)}}it.create=mn.create;it.toCanvas=hn.bind(null,mr.render);it.toDataURL=hn.bind(null,mr.renderToDataURL);it.toString=hn.bind(null,function(i,t,e){return Do.render(i,e)})});var qr=jr(hr());function xn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Be=xn();function wr(i){Be=i}var st={exec:()=>null};function A(i,t=""){let e=typeof i=="string"?i:i.source,r={replace:(n,o)=>{let a=typeof o=="string"?o:o.source;return a=a.replace(W.caret,"$1"),e=e.replace(n,a),r},getRegex:()=>new RegExp(e,t)};return r}var $o=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),W={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:i=>new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}#`),htmlBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}<(?:[a-z].*>|!--)`,"i")},Lo=/^(?:[ \t]*(?:\n|$))+/,No=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,qo=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,lt=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Uo=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,_n=/(?:[*+-]|\d{1,9}[.)])/,Cr=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,vr=A(Cr).replace(/bull/g,_n).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),jo=A(Cr).replace(/bull/g,_n).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),kn=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Ho=/^[^\n]+/,wn=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Go=A(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",wn).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Wo=A(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,_n).getRegex(),Mt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Cn=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Qo=A("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Cn).replace("tag",Mt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),yr=A(kn).replace("hr",lt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mt).getRegex(),Ko=A(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",yr).getRegex(),vn={blockquote:Ko,code:No,def:Go,fences:qo,heading:Uo,hr:lt,html:Qo,lheading:vr,list:Wo,newline:Lo,paragraph:yr,table:st,text:Ho},fr=A("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",lt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mt).getRegex(),Xo=Y(D({},vn),{lheading:jo,table:fr,paragraph:A(kn).replace("hr",lt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",fr).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mt).getRegex()}),Zo=Y(D({},vn),{html:A(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Cn).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:st,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:A(kn).replace("hr",lt).replace("heading",` *#{1,6} *[^
]`).replace("lheading",vr).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),Jo=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Yo=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ir=/^( {2,}|\\)\n(?!\s*$)/,ea=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Et=/[\p{P}\p{S}]/u,yn=/[\s\p{P}\p{S}]/u,Sr=/[^\s\p{P}\p{S}]/u,ta=A(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,yn).getRegex(),Tr=/(?!~)[\p{P}\p{S}]/u,na=/(?!~)[\s\p{P}\p{S}]/u,ia=/(?:[^\s\p{P}\p{S}]|~)/u,ra=A(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",$o?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Mr=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,oa=A(Mr,"u").replace(/punct/g,Et).getRegex(),aa=A(Mr,"u").replace(/punct/g,Tr).getRegex(),Er="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",sa=A(Er,"gu").replace(/notPunctSpace/g,Sr).replace(/punctSpace/g,yn).replace(/punct/g,Et).getRegex(),la=A(Er,"gu").replace(/notPunctSpace/g,ia).replace(/punctSpace/g,na).replace(/punct/g,Tr).getRegex(),ca=A("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Sr).replace(/punctSpace/g,yn).replace(/punct/g,Et).getRegex(),da=A(/\\(punct)/,"gu").replace(/punct/g,Et).getRegex(),ua=A(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),pa=A(Cn).replace("(?:-->|$)","-->").getRegex(),ma=A("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",pa).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),It=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,ha=A(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",It).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ar=A(/^!?\[(label)\]\[(ref)\]/).replace("label",It).replace("ref",wn).getRegex(),Pr=A(/^!?\[(ref)\](?:\[\])?/).replace("ref",wn).getRegex(),fa=A("reflink|nolink(?!\\()","g").replace("reflink",Ar).replace("nolink",Pr).getRegex(),gr=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,In={_backpedal:st,anyPunctuation:da,autolink:ua,blockSkip:ra,br:Ir,code:Yo,del:st,emStrongLDelim:oa,emStrongRDelimAst:sa,emStrongRDelimUnd:ca,escape:Jo,link:ha,nolink:Pr,punctuation:ta,reflink:Ar,reflinkSearch:fa,tag:ma,text:ea,url:st},ga=Y(D({},In),{link:A(/^!?\[(label)\]\((.*?)\)/).replace("label",It).getRegex(),reflink:A(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",It).getRegex()}),fn=Y(D({},In),{emStrongRDelimAst:la,emStrongLDelim:aa,url:A(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",gr).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:A(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",gr).getRegex()}),ba=Y(D({},fn),{br:A(Ir).replace("{2,}","*").getRegex(),text:A(fn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),yt={normal:vn,gfm:Xo,pedantic:Zo},rt={normal:In,gfm:fn,breaks:ba,pedantic:ga},xa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},br=i=>xa[i];function fe(i,t){if(t){if(W.escapeTest.test(i))return i.replace(W.escapeReplace,br)}else if(W.escapeTestNoEncode.test(i))return i.replace(W.escapeReplaceNoEncode,br);return i}function xr(i){try{i=encodeURI(i).replace(W.percentDecode,"%")}catch{return null}return i}function _r(i,t){let e=i.replace(W.findPipe,(o,a,l)=>{let s=!1,h=a;for(;--h>=0&&l[h]==="\\";)s=!s;return s?"|":" |"}),r=e.split(W.splitPipe),n=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;n<r.length;n++)r[n]=r[n].trim().replace(W.slashPipe,"|");return r}function ot(i,t,e){let r=i.length;if(r===0)return"";let n=0;for(;n<r;){let o=i.charAt(r-n-1);if(o===t&&!e)n++;else if(o!==t&&e)n++;else break}return i.slice(0,r-n)}function _a(i,t){if(i.indexOf(t[1])===-1)return-1;let e=0;for(let r=0;r<i.length;r++)if(i[r]==="\\")r++;else if(i[r]===t[0])e++;else if(i[r]===t[1]&&(e--,e<0))return r;return e>0?-2:-1}function kr(i,t,e,r,n){let o=t.href,a=t.title||null,l=i[1].replace(n.other.outputLinkReplace,"$1");r.state.inLink=!0;let s={type:i[0].charAt(0)==="!"?"image":"link",raw:e,href:o,title:a,text:l,tokens:r.inlineTokens(l)};return r.state.inLink=!1,s}function ka(i,t,e){let r=i.match(e.other.indentCodeCompensation);if(r===null)return t;let n=r[1];return t.split(`
`).map(o=>{let a=o.match(e.other.beginningSpace);if(a===null)return o;let[l]=a;return l.length>=n.length?o.slice(n.length):o}).join(`
`)}var St=class{options;rules;lexer;constructor(i){this.options=i||Be}space(i){let t=this.rules.block.newline.exec(i);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(i){let t=this.rules.block.code.exec(i);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:ot(e,`
`)}}}fences(i){let t=this.rules.block.fences.exec(i);if(t){let e=t[0],r=ka(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(i){let t=this.rules.block.heading.exec(i);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let r=ot(e,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(e=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(i){let t=this.rules.block.hr.exec(i);if(t)return{type:"hr",raw:ot(t[0],`
`)}}blockquote(i){let t=this.rules.block.blockquote.exec(i);if(t){let e=ot(t[0],`
`).split(`
`),r="",n="",o=[];for(;e.length>0;){let a=!1,l=[],s;for(s=0;s<e.length;s++)if(this.rules.other.blockquoteStart.test(e[s]))l.push(e[s]),a=!0;else if(!a)l.push(e[s]);else break;e=e.slice(s);let h=l.join(`
`),m=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${h}`:h,n=n?`${n}
${m}`:m;let k=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(m,o,!0),this.lexer.state.top=k,e.length===0)break;let g=o.at(-1);if(g?.type==="code")break;if(g?.type==="blockquote"){let S=g,T=S.raw+`
`+e.join(`
`),z=this.blockquote(T);o[o.length-1]=z,r=r.substring(0,r.length-S.raw.length)+z.raw,n=n.substring(0,n.length-S.text.length)+z.text;break}else if(g?.type==="list"){let S=g,T=S.raw+`
`+e.join(`
`),z=this.list(T);o[o.length-1]=z,r=r.substring(0,r.length-g.raw.length)+z.raw,n=n.substring(0,n.length-S.raw.length)+z.raw,e=T.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:o,text:n}}}list(i){let t=this.rules.block.list.exec(i);if(t){let e=t[1].trim(),r=e.length>1,n={type:"list",raw:"",ordered:r,start:r?+e.slice(0,-1):"",loose:!1,items:[]};e=r?`\\d{1,9}\\${e.slice(-1)}`:`\\${e}`,this.options.pedantic&&(e=r?e:"[*+-]");let o=this.rules.other.listItemRegex(e),a=!1;for(;i;){let s=!1,h="",m="";if(!(t=o.exec(i))||this.rules.block.hr.test(i))break;h=t[0],i=i.substring(h.length);let k=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,z=>" ".repeat(3*z.length)),g=i.split(`
`,1)[0],S=!k.trim(),T=0;if(this.options.pedantic?(T=2,m=k.trimStart()):S?T=t[1].length+1:(T=t[2].search(this.rules.other.nonSpaceChar),T=T>4?1:T,m=k.slice(T),T+=t[1].length),S&&this.rules.other.blankLine.test(g)&&(h+=g+`
`,i=i.substring(g.length+1),s=!0),!s){let z=this.rules.other.nextBulletRegex(T),Q=this.rules.other.hrRegex(T),Z=this.rules.other.fencesBeginRegex(T),J=this.rules.other.headingBeginRegex(T),ue=this.rules.other.htmlBeginRegex(T);for(;i;){let Re=i.split(`
`,1)[0],G;if(g=Re,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),G=g):G=g.replace(this.rules.other.tabCharGlobal,"    "),Z.test(g)||J.test(g)||ue.test(g)||z.test(g)||Q.test(g))break;if(G.search(this.rules.other.nonSpaceChar)>=T||!g.trim())m+=`
`+G.slice(T);else{if(S||k.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||Z.test(k)||J.test(k)||Q.test(k))break;m+=`
`+g}!S&&!g.trim()&&(S=!0),h+=Re+`
`,i=i.substring(Re.length+1),k=G.slice(T)}}n.loose||(a?n.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(a=!0)),n.items.push({type:"list_item",raw:h,task:!!this.options.gfm&&this.rules.other.listIsTask.test(m),loose:!1,text:m,tokens:[]}),n.raw+=h}let l=n.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let s of n.items){if(this.lexer.state.top=!1,s.tokens=this.lexer.blockTokens(s.text,[]),s.task){if(s.text=s.text.replace(this.rules.other.listReplaceTask,""),s.tokens[0]?.type==="text"||s.tokens[0]?.type==="paragraph"){s.tokens[0].raw=s.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),s.tokens[0].text=s.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let m=this.lexer.inlineQueue.length-1;m>=0;m--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[m].src)){this.lexer.inlineQueue[m].src=this.lexer.inlineQueue[m].src.replace(this.rules.other.listReplaceTask,"");break}}let h=this.rules.other.listTaskCheckbox.exec(s.raw);if(h){let m={type:"checkbox",raw:h[0]+" ",checked:h[0]!=="[ ]"};s.checked=m.checked,n.loose?s.tokens[0]&&["paragraph","text"].includes(s.tokens[0].type)&&"tokens"in s.tokens[0]&&s.tokens[0].tokens?(s.tokens[0].raw=m.raw+s.tokens[0].raw,s.tokens[0].text=m.raw+s.tokens[0].text,s.tokens[0].tokens.unshift(m)):s.tokens.unshift({type:"paragraph",raw:m.raw,text:m.raw,tokens:[m]}):s.tokens.unshift(m)}}if(!n.loose){let h=s.tokens.filter(k=>k.type==="space"),m=h.length>0&&h.some(k=>this.rules.other.anyLine.test(k.raw));n.loose=m}}if(n.loose)for(let s of n.items){s.loose=!0;for(let h of s.tokens)h.type==="text"&&(h.type="paragraph")}return n}}html(i){let t=this.rules.block.html.exec(i);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(i){let t=this.rules.block.def.exec(i);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:r,title:n}}}table(i){let t=this.rules.block.table.exec(i);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let e=_r(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(e.length===r.length){for(let a of r)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<e.length;a++)o.header.push({text:e[a],tokens:this.lexer.inline(e[a]),header:!0,align:o.align[a]});for(let a of n)o.rows.push(_r(a,o.header.length).map((l,s)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[s]})));return o}}lheading(i){let t=this.rules.block.lheading.exec(i);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(i){let t=this.rules.block.paragraph.exec(i);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(i){let t=this.rules.block.text.exec(i);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(i){let t=this.rules.inline.escape.exec(i);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(i){let t=this.rules.inline.tag.exec(i);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(i){let t=this.rules.inline.link.exec(i);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let o=ot(e.slice(0,-1),"\\");if((e.length-o.length)%2===0)return}else{let o=_a(t[2],"()");if(o===-2)return;if(o>-1){let a=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let r=t[2],n="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(r);o&&(r=o[1],n=o[3])}else n=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?r=r.slice(1):r=r.slice(1,-1)),kr(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(i,t){let e;if((e=this.rules.inline.reflink.exec(i))||(e=this.rules.inline.nolink.exec(i))){let r=(e[2]||e[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=t[r.toLowerCase()];if(!n){let o=e[0].charAt(0);return{type:"text",raw:o,text:o}}return kr(e,n,e[0],this.lexer,this.rules)}}emStrong(i,t,e=""){let r=this.rules.inline.emStrongLDelim.exec(i);if(!(!r||r[3]&&e.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!e||this.rules.inline.punctuation.exec(e))){let n=[...r[0]].length-1,o,a,l=n,s=0,h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*i.length+n);(r=h.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){l+=a;continue}else if((r[5]||r[6])&&n%3&&!((n+a)%3)){s+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+s);let m=[...r[0]][0].length,k=i.slice(0,n+r.index+m+a);if(Math.min(n,a)%2){let S=k.slice(1,-1);return{type:"em",raw:k,text:S,tokens:this.lexer.inlineTokens(S)}}let g=k.slice(2,-2);return{type:"strong",raw:k,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(i){let t=this.rules.inline.code.exec(i);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(e),n=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return r&&n&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(i){let t=this.rules.inline.br.exec(i);if(t)return{type:"br",raw:t[0]}}del(i){let t=this.rules.inline.del.exec(i);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(i){let t=this.rules.inline.autolink.exec(i);if(t){let e,r;return t[2]==="@"?(e=t[1],r="mailto:"+e):(e=t[1],r=e),{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(i){let t;if(t=this.rules.inline.url.exec(i)){let e,r;if(t[2]==="@")e=t[0],r="mailto:"+e;else{let n;do n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(n!==t[0]);e=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(i){let t=this.rules.inline.text.exec(i);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},ne=class gn{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Be,this.options.tokenizer=this.options.tokenizer||new St,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:W,block:yt.normal,inline:rt.normal};this.options.pedantic?(e.block=yt.pedantic,e.inline=rt.pedantic):this.options.gfm&&(e.block=yt.gfm,this.options.breaks?e.inline=rt.breaks:e.inline=rt.gfm),this.tokenizer.rules=e}static get rules(){return{block:yt,inline:rt}}static lex(t,e){return new gn(e).lex(t)}static lexInline(t,e){return new gn(e).inlineTokens(t)}lex(t){t=t.replace(W.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let r=this.inlineQueue[e];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],r=!1){for(this.options.pedantic&&(t=t.replace(W.tabCharGlobal,"    ").replace(W.spaceLine,""));t;){let n;if(this.options.extensions?.block?.some(a=>(n=a.call({lexer:this},t,e))?(t=t.substring(n.raw.length),e.push(n),!0):!1))continue;if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length);let a=e.at(-1);n.raw.length===1&&a!==void 0?a.raw+=`
`:e.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length);let a=e.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+n.raw,a.text+=`
`+n.text,this.inlineQueue.at(-1).src=a.text):e.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length);let a=e.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+n.raw,a.text+=`
`+n.raw,this.inlineQueue.at(-1).src=a.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title},e.push(n));continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),e.push(n);continue}let o=t;if(this.options.extensions?.startBlock){let a=1/0,l=t.slice(1),s;this.options.extensions.startBlock.forEach(h=>{s=h.call({lexer:this},l),typeof s=="number"&&s>=0&&(a=Math.min(a,s))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o))){let a=e.at(-1);r&&a?.type==="paragraph"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+n.raw,a.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):e.push(n),r=o.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length);let a=e.at(-1);a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+n.raw,a.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):e.push(n);continue}if(t){let a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let r=t,n=null;if(this.tokens.links){let s=Object.keys(this.tokens.links);if(s.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)s.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,n.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let o;for(;(n=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)o=n[2]?n[2].length:0,r=r.slice(0,n.index+o)+"["+"a".repeat(n[0].length-o-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let a=!1,l="";for(;t;){a||(l=""),a=!1;let s;if(this.options.extensions?.inline?.some(m=>(s=m.call({lexer:this},t,e))?(t=t.substring(s.raw.length),e.push(s),!0):!1))continue;if(s=this.tokenizer.escape(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.tag(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.link(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(s.raw.length);let m=e.at(-1);s.type==="text"&&m?.type==="text"?(m.raw+=s.raw,m.text+=s.text):e.push(s);continue}if(s=this.tokenizer.emStrong(t,r,l)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.codespan(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.br(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.del(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.autolink(t)){t=t.substring(s.raw.length),e.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(t))){t=t.substring(s.raw.length),e.push(s);continue}let h=t;if(this.options.extensions?.startInline){let m=1/0,k=t.slice(1),g;this.options.extensions.startInline.forEach(S=>{g=S.call({lexer:this},k),typeof g=="number"&&g>=0&&(m=Math.min(m,g))}),m<1/0&&m>=0&&(h=t.substring(0,m+1))}if(s=this.tokenizer.inlineText(h)){t=t.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(l=s.raw.slice(-1)),a=!0;let m=e.at(-1);m?.type==="text"?(m.raw+=s.raw,m.text+=s.text):e.push(s);continue}if(t){let m="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(m);break}else throw new Error(m)}}return e}},Tt=class{options;parser;constructor(i){this.options=i||Be}space(i){return""}code({text:i,lang:t,escaped:e}){let r=(t||"").match(W.notSpaceStart)?.[0],n=i.replace(W.endingNewline,"")+`
`;return r?'<pre><code class="language-'+fe(r)+'">'+(e?n:fe(n,!0))+`</code></pre>
`:"<pre><code>"+(e?n:fe(n,!0))+`</code></pre>
`}blockquote({tokens:i}){return`<blockquote>
${this.parser.parse(i)}</blockquote>
`}html({text:i}){return i}def(i){return""}heading({tokens:i,depth:t}){return`<h${t}>${this.parser.parseInline(i)}</h${t}>
`}hr(i){return`<hr>
`}list(i){let t=i.ordered,e=i.start,r="";for(let a=0;a<i.items.length;a++){let l=i.items[a];r+=this.listitem(l)}let n=t?"ol":"ul",o=t&&e!==1?' start="'+e+'"':"";return"<"+n+o+`>
`+r+"</"+n+`>
`}listitem(i){return`<li>${this.parser.parse(i.tokens)}</li>
`}checkbox({checked:i}){return"<input "+(i?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:i}){return`<p>${this.parser.parseInline(i)}</p>
`}table(i){let t="",e="";for(let n=0;n<i.header.length;n++)e+=this.tablecell(i.header[n]);t+=this.tablerow({text:e});let r="";for(let n=0;n<i.rows.length;n++){let o=i.rows[n];e="";for(let a=0;a<o.length;a++)e+=this.tablecell(o[a]);r+=this.tablerow({text:e})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:i}){return`<tr>
${i}</tr>
`}tablecell(i){let t=this.parser.parseInline(i.tokens),e=i.header?"th":"td";return(i.align?`<${e} align="${i.align}">`:`<${e}>`)+t+`</${e}>
`}strong({tokens:i}){return`<strong>${this.parser.parseInline(i)}</strong>`}em({tokens:i}){return`<em>${this.parser.parseInline(i)}</em>`}codespan({text:i}){return`<code>${fe(i,!0)}</code>`}br(i){return"<br>"}del({tokens:i}){return`<del>${this.parser.parseInline(i)}</del>`}link({href:i,title:t,tokens:e}){let r=this.parser.parseInline(e),n=xr(i);if(n===null)return r;i=n;let o='<a href="'+i+'"';return t&&(o+=' title="'+fe(t)+'"'),o+=">"+r+"</a>",o}image({href:i,title:t,text:e,tokens:r}){r&&(e=this.parser.parseInline(r,this.parser.textRenderer));let n=xr(i);if(n===null)return fe(e);i=n;let o=`<img src="${i}" alt="${e}"`;return t&&(o+=` title="${fe(t)}"`),o+=">",o}text(i){return"tokens"in i&&i.tokens?this.parser.parseInline(i.tokens):"escaped"in i&&i.escaped?i.text:fe(i.text)}},Sn=class{strong({text:i}){return i}em({text:i}){return i}codespan({text:i}){return i}del({text:i}){return i}html({text:i}){return i}text({text:i}){return i}link({text:i}){return""+i}image({text:i}){return""+i}br(){return""}checkbox({raw:i}){return i}},ie=class bn{options;renderer;textRenderer;constructor(t){this.options=t||Be,this.options.renderer=this.options.renderer||new Tt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Sn}static parse(t,e){return new bn(e).parse(t)}static parseInline(t,e){return new bn(e).parseInline(t)}parse(t){let e="";for(let r=0;r<t.length;r++){let n=t[r];if(this.options.extensions?.renderers?.[n.type]){let a=n,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){e+=l||"";continue}}let o=n;switch(o.type){case"space":{e+=this.renderer.space(o);break}case"hr":{e+=this.renderer.hr(o);break}case"heading":{e+=this.renderer.heading(o);break}case"code":{e+=this.renderer.code(o);break}case"table":{e+=this.renderer.table(o);break}case"blockquote":{e+=this.renderer.blockquote(o);break}case"list":{e+=this.renderer.list(o);break}case"checkbox":{e+=this.renderer.checkbox(o);break}case"html":{e+=this.renderer.html(o);break}case"def":{e+=this.renderer.def(o);break}case"paragraph":{e+=this.renderer.paragraph(o);break}case"text":{e+=this.renderer.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return e}parseInline(t,e=this.renderer){let r="";for(let n=0;n<t.length;n++){let o=t[n];if(this.options.extensions?.renderers?.[o.type]){let l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=l||"";continue}}let a=o;switch(a.type){case"escape":{r+=e.text(a);break}case"html":{r+=e.html(a);break}case"link":{r+=e.link(a);break}case"image":{r+=e.image(a);break}case"checkbox":{r+=e.checkbox(a);break}case"strong":{r+=e.strong(a);break}case"em":{r+=e.em(a);break}case"codespan":{r+=e.codespan(a);break}case"br":{r+=e.br(a);break}case"del":{r+=e.del(a);break}case"text":{r+=e.text(a);break}default:{let l='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}},at=class{options;block;constructor(i){this.options=i||Be}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(i){return i}postprocess(i){return i}processAllTokens(i){return i}emStrongMask(i){return i}provideLexer(){return this.block?ne.lex:ne.lexInline}provideParser(){return this.block?ie.parse:ie.parseInline}},wa=class{defaults=xn();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ie;Renderer=Tt;TextRenderer=Sn;Lexer=ne;Tokenizer=St;Hooks=at;constructor(...i){this.use(...i)}walkTokens(i,t){let e=[];for(let r of i)switch(e=e.concat(t.call(this,r)),r.type){case"table":{let n=r;for(let o of n.header)e=e.concat(this.walkTokens(o.tokens,t));for(let o of n.rows)for(let a of o)e=e.concat(this.walkTokens(a.tokens,t));break}case"list":{let n=r;e=e.concat(this.walkTokens(n.items,t));break}default:{let n=r;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(o=>{let a=n[o].flat(1/0);e=e.concat(this.walkTokens(a,t))}):n.tokens&&(e=e.concat(this.walkTokens(n.tokens,t)))}}return e}use(...i){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return i.forEach(e=>{let r=D({},e);if(r.async=this.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let o=t.renderers[n.name];o?t.renderers[n.name]=function(...a){let l=n.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[n.level];o?o.unshift(n.tokenizer):t[n.level]=[n.tokenizer],n.start&&(n.level==="block"?t.startBlock?t.startBlock.push(n.start):t.startBlock=[n.start]:n.level==="inline"&&(t.startInline?t.startInline.push(n.start):t.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(t.childTokens[n.name]=n.childTokens)}),r.extensions=t),e.renderer){let n=this.defaults.renderer||new Tt(this.defaults);for(let o in e.renderer){if(!(o in n))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=e.renderer[a],s=n[a];n[a]=(...h)=>{let m=l.apply(n,h);return m===!1&&(m=s.apply(n,h)),m||""}}r.renderer=n}if(e.tokenizer){let n=this.defaults.tokenizer||new St(this.defaults);for(let o in e.tokenizer){if(!(o in n))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=e.tokenizer[a],s=n[a];n[a]=(...h)=>{let m=l.apply(n,h);return m===!1&&(m=s.apply(n,h)),m}}r.tokenizer=n}if(e.hooks){let n=this.defaults.hooks||new at;for(let o in e.hooks){if(!(o in n))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=e.hooks[a],s=n[a];at.passThroughHooks.has(o)?n[a]=h=>{if(this.defaults.async&&at.passThroughHooksRespectAsync.has(o))return L(this,null,function*(){let k=yield l.call(n,h);return s.call(n,k)});let m=l.call(n,h);return s.call(n,m)}:n[a]=(...h)=>{if(this.defaults.async)return L(this,null,function*(){let k=yield l.apply(n,h);return k===!1&&(k=yield s.apply(n,h)),k});let m=l.apply(n,h);return m===!1&&(m=s.apply(n,h)),m}}r.hooks=n}if(e.walkTokens){let n=this.defaults.walkTokens,o=e.walkTokens;r.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),n&&(l=l.concat(n.call(this,a))),l}}this.defaults=D(D({},this.defaults),r)}),this}setOptions(i){return this.defaults=D(D({},this.defaults),i),this}lexer(i,t){return ne.lex(i,t??this.defaults)}parser(i,t){return ie.parse(i,t??this.defaults)}parseMarkdown(i){return(t,e)=>{let r=D({},e),n=D(D({},this.defaults),r),o=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&r.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(n.hooks&&(n.hooks.options=n,n.hooks.block=i),n.async)return L(this,null,function*(){let a=n.hooks?yield n.hooks.preprocess(t):t,l=yield(n.hooks?yield n.hooks.provideLexer():i?ne.lex:ne.lexInline)(a,n),s=n.hooks?yield n.hooks.processAllTokens(l):l;n.walkTokens&&(yield Promise.all(this.walkTokens(s,n.walkTokens)));let h=yield(n.hooks?yield n.hooks.provideParser():i?ie.parse:ie.parseInline)(s,n);return n.hooks?yield n.hooks.postprocess(h):h}).catch(o);try{n.hooks&&(t=n.hooks.preprocess(t));let a=(n.hooks?n.hooks.provideLexer():i?ne.lex:ne.lexInline)(t,n);n.hooks&&(a=n.hooks.processAllTokens(a)),n.walkTokens&&this.walkTokens(a,n.walkTokens);let l=(n.hooks?n.hooks.provideParser():i?ie.parse:ie.parseInline)(a,n);return n.hooks&&(l=n.hooks.postprocess(l)),l}catch(a){return o(a)}}}onError(i,t){return e=>{if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,i){let r="<p>An error occurred:</p><pre>"+fe(e.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(e);throw e}}},Pe=new wa;function B(i,t){return Pe.parse(i,t)}B.options=B.setOptions=function(i){return Pe.setOptions(i),B.defaults=Pe.defaults,wr(B.defaults),B};B.getDefaults=xn;B.defaults=Be;B.use=function(...i){return Pe.use(...i),B.defaults=Pe.defaults,wr(B.defaults),B};B.walkTokens=function(i,t){return Pe.walkTokens(i,t)};B.parseInline=Pe.parseInline;B.Parser=ie;B.parser=ie.parse;B.Renderer=Tt;B.TextRenderer=Sn;B.Lexer=ne;B.lexer=ne.lex;B.Tokenizer=St;B.Hooks=at;B.parse=B;var gl=B.options,bl=B.setOptions,xl=B.use,_l=B.walkTokens,kl=B.parseInline;var wl=ie.parse,Cl=ne.lex;var Br=(()=>{class i{constructor(e){this.sanitizer=e}transform(e){if(!e)return"";let r=B.parse(e);return this.sanitizer.bypassSecurityTrustHtml(r)}static{this.\u0275fac=function(r){return new(r||i)(U(Yn,16))}}static{this.\u0275pipe=Ln({name:"markdown",type:i,pure:!0})}}return i})();var Ca=(i,t)=>t.id;function va(i,t){i&1&&(c(0,"div",1),$(1,"div",2),d())}function ya(i,t){if(i&1&&(c(0,"div",30)(1,"a",31)(2,"mat-icon",23),p(3,"receipt_long"),d(),c(4,"span",32),p(5),x(6,"slice"),d(),c(7,"mat-icon",33),p(8,"open_in_new"),d()()()),i&2){let e=f().$implicit,r=f(2);u(),E("href",r.snowtraceUrl+"/tx/"+e.paymentProof,ee),u(4),b("Tx: ",Lt(6,2,e.paymentProof,0,8),"...")}}function Ia(i,t){if(i&1&&(c(0,"div",18)(1,"div",20)(2,"div",21)(3,"div",22)(4,"mat-icon",23),p(5,"person"),d()(),c(6,"span",24),p(7),x(8,"slice"),d(),c(9,"span",25),p(10,"\u2022"),d(),c(11,"span",25),p(12),x(13,"transloco"),d()(),c(14,"div",26)(15,"mat-icon",27),p(16,"star"),d(),c(17,"span",28),p(18),d()()(),c(19,"p",29),p(20),d(),I(21,ya,9,6,"div",30),d()),i&2){let e=t.$implicit;u(7),b(" ",Lt(8,5,e.client,0,6),"... "),u(5),F(_(13,9,"chat.agentInfo.verifiedClient")),u(6),F(e.rating),u(2),b(' "',e.comment,'" '),u(),y(e.paymentProof?21:-1)}}function Sa(i,t){i&1&&(c(0,"div",19),p(1),x(2,"transloco"),d()),i&2&&(u(),b(" ",_(2,1,"chat.agentInfo.noReviews")," "))}function Ta(i,t){if(i&1&&(c(0,"div",3)(1,"div",4),p(2," \u{1F916} "),d(),c(3,"div")(4,"h3",5),p(5),d(),c(6,"p",6),p(7),d()()(),c(8,"div",7)(9,"div",8)(10,"div",9),p(11),d(),c(12,"div",10),p(13),x(14,"transloco"),d()(),c(15,"div",11)(16,"div",9),p(17),d(),c(18,"div",10),p(19),x(20,"transloco"),d()(),c(21,"div",11)(22,"div",9),p(23),x(24,"transloco"),x(25,"transloco"),d(),c(26,"div",10),p(27),x(28,"transloco"),d()()(),c(29,"div",12),p(30),d(),c(31,"a",13),p(32),x(33,"transloco"),d(),c(34,"div",14)(35,"h4",15),p(36),x(37,"transloco"),c(38,"span",16),p(39),d()(),c(40,"div",17),re(41,Ia,22,11,"div",18,Ca,!1,Sa,3,3,"div",19),d()()),i&2){let e=f();u(5),b(" ",e.agentInfo.identity.name," "),u(2),F(e.agentInfo.identity.description),u(4),b(" ",(e.agentInfo.reputation.averageRating==null?null:e.agentInfo.reputation.averageRating.toFixed(1))||"0.0"," "),u(2),b(" ",_(14,14,"chat.agentInfo.rating")," "),u(4),b(" ",e.agentInfo.reputation.totalFeedbacks||0," "),u(2),b(" ",_(20,16,"chat.agentInfo.reviews")," "),u(4),b(" ",e.agentInfo.identity.active?_(24,18,"chat.agentInfo.on"):_(25,20,"chat.agentInfo.off")," "),u(4),b(" ",_(28,22,"chat.agentInfo.status")," "),u(3),b(" ",e.agentInfo.identity.agentAddress," "),u(),E("href",e.snowtraceUrl+"/token/0x7c6a168455C94092f8d51aBC515B73f4Ed9813a6?a=1",ee),u(),b(" ",_(33,24,"chat.agentInfo.viewSnowtrace")," "),u(4),b(" ",_(37,26,"chat.agentInfo.recentReviews")," "),u(3),b(" ",e.agentInfo.reputation.totalFeedbacks," "),u(2),oe(e.sortedFeedbacks)}}var Vr=(()=>{class i{constructor(){this.agentInfo=null}get sortedFeedbacks(){return this.agentInfo?.feedbacks?[...this.agentInfo.feedbacks].reverse().slice(0,10):[]}get snowtraceUrl(){if(H.isTestnet!==void 0)return H.isTestnet?"https://testnet.snowtrace.io":"https://snowtrace.io";if(H.chainId)return H.chainId===43113?"https://testnet.snowtrace.io":"https://snowtrace.io";let e=H.rpcUrl||"";return e.includes("test")||e.includes("fuji")||e.includes("43113")?"https://testnet.snowtrace.io":"https://snowtrace.io"}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=K({type:i,selectors:[["app-agent-erc8004"]],inputs:{agentInfo:"agentInfo"},decls:3,vars:1,consts:[[1,"space-y-4"],[1,"flex","justify-center","p-4"],[1,"w-6","h-6","border-2","border-blue-500","border-t-transparent","rounded-full","animate-spin"],[1,"flex","items-start","gap-4"],[1,"w-16","h-16","rounded-full","bg-slate-100","flex","items-center","justify-center","text-2xl"],[1,"font-bold","text-lg","dark:text-white"],[1,"text-sm","text-slate-500"],[1,"grid","grid-cols-3","gap-2","bg-slate-50","dark:bg-slate-800","p-3","rounded-lg"],[1,"text-center"],[1,"font-bold","text-xl","dark:text-white"],[1,"text-[10px]","text-slate-500","uppercase"],[1,"text-center","border-l","border-slate-200","dark:border-slate-700"],[1,"p-3","bg-slate-50","dark:bg-slate-800","rounded-lg","text-xs","font-mono","break-all","text-slate-600","dark:text-slate-300"],["target","_blank",1,"block","text-center","text-sm","text-blue-600","hover:underline",3,"href"],[1,"pt-2","border-t","border-slate-100","dark:border-slate-800","mt-2"],[1,"text-sm","font-semibold","text-slate-900","dark:text-white","mb-4","flex","items-center","gap-2"],[1,"px-2","py-0.5","rounded-full","bg-slate-100","dark:bg-slate-800","text-xs","text-slate-500","font-normal","border","border-slate-200","dark:border-slate-700"],[1,"flex","flex-col","gap-3"],[1,"group","p-4","bg-white","dark:bg-slate-800/50","border","border-slate-200","dark:border-slate-700","hover:border-slate-300","dark:hover:border-slate-600","rounded-xl","transition-all","shadow-sm","hover:shadow-md"],[1,"text-center","py-6","text-slate-400","text-sm","bg-slate-50","dark:bg-slate-800/50","rounded-xl","border","border-dashed","border-slate-200","dark:border-slate-700"],[1,"flex","items-start","justify-between","mb-2"],[1,"flex","items-center","gap-2"],[1,"w-6","h-6","rounded-full","bg-slate-100","dark:bg-slate-700","flex","items-center","justify-center","text-[10px]","font-bold","text-slate-500","dark:text-slate-400"],[1,"!w-3","!h-3","!text-[12px]"],[1,"text-xs","font-semibold","text-slate-700","dark:text-slate-200","font-mono"],[1,"text-[10px]","text-slate-400"],[1,"flex","items-center","gap-1","bg-yellow-50","dark:bg-yellow-900/20","px-2","py-1","rounded-md","border","border-yellow-100","dark:border-yellow-900/30"],[1,"!w-3","!h-3","!text-[12px]","text-yellow-600","dark:text-yellow-500"],[1,"text-xs","font-bold","text-yellow-700","dark:text-yellow-500"],[1,"text-sm","text-slate-600","dark:text-slate-300","leading-relaxed","mb-3","pl-8"],[1,"pl-8","flex","items-center","gap-2"],["target","_blank",1,"inline-flex","items-center","gap-1.5","px-2.5","py-1","rounded-md","bg-slate-50","dark:bg-slate-900","text-[10px]","font-medium","text-slate-500","hover:text-blue-600","hover:bg-blue-50","dark:hover:bg-blue-900/20","transition-colors","border","border-slate-100","dark:border-slate-800",3,"href"],[1,"font-mono"],[1,"!w-2.5","!h-2.5","!text-[10px]","opacity-50"]],template:function(r,n){r&1&&(c(0,"div",0),I(1,va,2,0,"div",1)(2,Ta,44,28),d()),r&2&&(u(),y(n.agentInfo?2:1))},dependencies:[ae,Zn,le,se,de,ce],encapsulation:2})}}return i})();var Ea=()=>[1,2,3,4,5];function Aa(i,t){if(i&1){let e=N();c(0,"button",15),w("click",function(){let n=C(e).$implicit,o=f();return v(o.setRating(n))}),c(1,"mat-icon",16),p(2),d()()}if(i&2){let e=t.$implicit,r=f();j("active",r.rating()>=e),u(2),F(r.rating()>=e?"star":"star_border")}}function Pa(i,t){if(i&1){let e=N();c(0,"button",17),w("click",function(){let n=C(e).$implicit,o=f();return v(o.toggleTag(n))}),p(1),d()}if(i&2){let e=t.$implicit,r=f();j("selected",r.selectedTags().includes(e))("bg-indigo-50",r.selectedTags().includes(e))("text-indigo-600",r.selectedTags().includes(e))("border-indigo-200",r.selectedTags().includes(e))("bg-white",!r.selectedTags().includes(e))("text-slate-600",!r.selectedTags().includes(e))("border-slate-200",!r.selectedTags().includes(e))("hover:border-indigo-300",!r.selectedTags().includes(e)),u(),b(" ",e," ")}}function Ba(i,t){if(i&1&&(c(0,"div",9)(1,"div",18)(2,"mat-icon",19),p(3,"link"),d(),c(4,"span"),p(5),x(6,"transloco"),d()(),c(7,"code",20),p(8),d()()),i&2){let e=f();u(5),F(_(6,2,"chat.feedback.linkedTo")),u(3),b(" ",e.data.paymentTxHash," ")}}function Ra(i,t){i&1&&(c(0,"div",13)(1,"mat-icon",21),p(2,"refresh"),d(),c(3,"span"),p(4),x(5,"transloco"),d()()),i&2&&(u(4),F(_(5,1,"chat.feedback.submitting")))}function Va(i,t){i&1&&(p(0),x(1,"transloco")),i&2&&b(" ",_(1,1,"chat.feedback.submit")," ")}var Or=(()=>{class i{constructor(e,r,n){this._dialogRef=e,this.data=r,this._walletService=n,this.rating=M(0),this.comment=M(""),this.availableTags=["fast","accurate","helpful","reliable","easy-to-use"],this.selectedTags=M([]),this.isSubmitting=M(!1)}setRating(e){this.rating.set(e)}toggleTag(e){let r=this.selectedTags();r.includes(e)?this.selectedTags.set(r.filter(n=>n!==e)):this.selectedTags.set([...r,e])}submit(){return L(this,null,function*(){if(this.rating()!==0){this.isSubmitting.set(!0);try{let e=this.data.agentTokenId||1,r=yield this._walletService.submitFeedback(e,this.rating(),this.selectedTags(),this.comment(),this.data.paymentTxHash||null);console.log("Feedback transaction sent:",r.hash),this._dialogRef.close({success:!0,txHash:r.hash,tx:r})}catch(e){console.error("Feedback error:",e),this._dialogRef.close({success:!1,error:e})}finally{this.isSubmitting.set(!1)}}})}close(){this._dialogRef.close()}static{this.\u0275fac=function(r){return new(r||i)(U(Oe),U(De),U(pt))}}static{this.\u0275cmp=K({type:i,selectors:[["app-agent-feedback"]],decls:28,vars:19,consts:[[1,"close-button",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"rating-stars","flex","justify-center","gap-2","mb-6"],[1,"star-button","transition-transform","hover:scale-110","focus:outline-none",3,"active"],[1,"feedback-tags","flex","flex-wrap","justify-center","gap-2","mb-6"],[1,"tag","px-3","py-1.5","rounded-full","text-xs","font-medium","border","transition-all",3,"selected","bg-indigo-50","text-indigo-600","border-indigo-200","bg-white","text-slate-600","border-slate-200","hover:border-indigo-300"],[1,"comment-section","mb-4"],["rows","4",1,"w-full","p-4","rounded-xl","border","border-slate-200","dark:border-slate-700","bg-slate-50","dark:bg-slate-800","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:ring-2","focus:ring-indigo-500/20","focus:border-indigo-500","outline-none","resize-none","transition-all",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"payment-link-info","mb-6","p-3","bg-slate-50","dark:bg-slate-800","rounded-lg","text-xs","text-slate-500","dark:text-slate-400","border","border-slate-100","dark:border-slate-700"],[1,"feedback-actions","flex","gap-3"],["mat-stroked-button","",1,"flex-1","!h-11","!rounded-xl","border-slate-300","dark:border-slate-600",3,"click","disabled"],["mat-flat-button","","color","primary",1,"flex-1","!h-11","!rounded-xl","!bg-indigo-600","hover:!bg-indigo-700","text-white",3,"click","disabled"],[1,"flex","items-center","justify-center","gap-2"],[1,"feedback-note","mt-4","text-center","text-[10px]","text-slate-400"],[1,"star-button","transition-transform","hover:scale-110","focus:outline-none",3,"click"],[1,"!w-10","!h-10","!text-[40px]"],[1,"tag","px-3","py-1.5","rounded-full","text-xs","font-medium","border","transition-all",3,"click"],[1,"flex","items-center","gap-2","mb-1"],[1,"!w-4","!h-4","!text-[16px]"],[1,"block","bg-slate-100","dark:bg-slate-900","p-2","rounded","border","border-slate-200","dark:border-slate-700","font-mono","break-all"],[1,"animate-spin","!w-5","!h-5","!text-[20px]"]],template:function(r,n){r&1&&(c(0,"button",0),w("click",function(){return n.close()}),c(1,"mat-icon"),p(2,"close"),d()(),c(3,"div",1)(4,"h2"),p(5),x(6,"transloco"),d()(),c(7,"div",2)(8,"div",3),re(9,Aa,3,3,"button",4,$t),d(),c(11,"div",5),re(12,Pa,2,17,"button",6,$t),d(),c(14,"div",7)(15,"textarea",8),x(16,"transloco"),Se("ngModelChange",function(a){return Ie(n.comment,a)||(n.comment=a),a}),d()(),I(17,Ba,9,4,"div",9),c(18,"div",10)(19,"button",11),w("click",function(){return n.close()}),p(20),x(21,"transloco"),d(),c(22,"button",12),w("click",function(){return n.submit()}),I(23,Ra,6,3,"div",13)(24,Va,2,3),d()(),c(25,"div",14),p(26),x(27,"transloco"),d()()),r&2&&(u(5),F(_(6,10,"chat.feedback.modalTitle")),u(4),oe(Wn(18,Ea)),u(3),oe(n.availableTags),u(3),ye("ngModel",n.comment),E("placeholder",_(16,12,"chat.feedback.placeholder"))("disabled",n.isSubmitting()),u(2),y(n.data.paymentTxHash?17:-1),u(2),E("disabled",n.isSubmitting()),u(),b(" ",_(21,14,"chat.feedback.cancel")," "),u(2),E("disabled",n.isSubmitting()||n.rating()===0),u(),y(n.isSubmitting()?23:24),u(3),b(" \u{1F4A1} ",_(27,16,"chat.feedback.note")," "))},dependencies:[ae,qe,ut,Le,Ne,be,$e,le,se,ge,de,ce],styles:["[_nghost-%COMP%]{display:block;background:#fff;border-radius:1.5rem;padding:1.5rem;max-width:480px;margin:0 auto;position:relative;overflow:hidden}[_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;padding-top:.5rem}[_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#0f172a;margin:0;letter-spacing:-.01em;line-height:1.5}[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]{position:absolute;top:1.25rem;right:1.25rem;color:#94a3b8;background:transparent;width:32px;height:32px;border:none;cursor:pointer;border-radius:50%;transition:all .2s;display:flex;align-items:center;justify-content:center;z-index:10}[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#475569}[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.star-button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0;color:#e2e8f0;transition:all .2s cubic-bezier(.4,0,.2,1)}.star-button.active[_ngcontent-%COMP%]{color:#f59e0b;filter:drop-shadow(0 0 4px rgba(245,158,11,.3))}.star-button[_ngcontent-%COMP%]:hover{transform:scale(1.15)}.tag[_ngcontent-%COMP%]{outline:none}.tag.selected[_ngcontent-%COMP%]{border-color:#818cf8;box-shadow:0 2px 4px #6366f11a}.tag[_ngcontent-%COMP%]:hover:not(.selected){background-color:#f8fafc}textarea[_ngcontent-%COMP%]{font-family:inherit}.dark[_nghost-%COMP%], .dark   [_nghost-%COMP%]{background:#0f172a;border:1px solid #1e293b}.dark[_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff}.dark[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background:#1e293b;color:#fff}.dark[_nghost-%COMP%]   .star-button[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .star-button[_ngcontent-%COMP%]{color:#334155}.dark[_nghost-%COMP%]   .star-button.active[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .star-button.active[_ngcontent-%COMP%]{color:#fbbf24}"]})}}return i})();var Dr=(()=>{class i{constructor(e,r){this.dialogRef=e,this.data=r}confirm(){this.dialogRef.close(!0)}close(){this.dialogRef.close(!1)}static{this.\u0275fac=function(r){return new(r||i)(U(Oe),U(De))}}static{this.\u0275cmp=K({type:i,selectors:[["app-delete-confirmation"]],decls:18,vars:12,consts:[[1,"w-full","bg-white","dark:bg-slate-900","overflow-hidden","flex","flex-col"],[1,"p-6","pb-2","text-center"],[1,"w-12","h-12","mx-auto","mb-4","rounded-full","bg-red-50","dark:bg-red-900/20","flex","items-center","justify-center","text-red-500"],[1,"!w-6","!h-6","!text-[24px]"],[1,"text-lg","font-bold","text-slate-900","dark:text-white","mb-2"],[1,"text-sm","text-slate-500","dark:text-slate-400","leading-relaxed","px-4"],[1,"p-6","pt-6","flex","flex-col","gap-3"],[1,"w-full","h-10","rounded-lg","bg-red-600","hover:bg-red-700","text-white","text-sm","font-medium","transition-colors","shadow-sm","active:transform","active:scale-[0.98]",3,"click"],[1,"w-full","h-10","rounded-lg","bg-white","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","text-slate-700","dark:text-slate-300","hover:bg-slate-50","dark:hover:bg-slate-700/50","text-sm","font-medium","transition-colors",3,"click"]],template:function(r,n){r&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),p(4,"delete_outline"),d()(),c(5,"h3",4),p(6),x(7,"transloco"),d(),c(8,"p",5),p(9),x(10,"transloco"),d()(),c(11,"div",6)(12,"button",7),w("click",function(){return n.confirm()}),p(13),x(14,"transloco"),d(),c(15,"button",8),w("click",function(){return n.close()}),p(16),x(17,"transloco"),d()()()),r&2&&(u(6),b(" ",_(7,4,"chat.deleteModal.title")," "),u(3),b(" ",_(10,6,"chat.deleteModal.message")," "),u(4),b(" ",_(14,8,"chat.deleteModal.confirm")," "),u(3),b(" ",_(17,10,"chat.deleteModal.cancel")," "))},dependencies:[ae,ge,be,le,se,de,ce],encapsulation:2})}}return i})();var Fa=["input"],za=["formField"],Oa=["*"],Bt=class{source;value;constructor(t,e){this.source=t,this.value=e}},Da={provide:di,useExisting:En(()=>Mn),multi:!0},$r=new Ft("MatRadioGroup"),$a=new Ft("mat-radio-default-options",{providedIn:"root",factory:La});function La(){return{color:"accent",disabledInteractive:!1}}var Mn=(()=>{class i{_changeDetector=q(Nt);_value=null;_name=q(Ut).getId("mat-radio-group-");_selected=null;_isInitialized=!1;_labelPosition="after";_disabled=!1;_required=!1;_buttonChanges;_controlValueAccessorChangeFn=()=>{};onTouched=()=>{};change=new zt;_radios;color;get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition=e==="before"?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=e,this._markRadiosForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markRadiosForCheck()}_disabledInteractive=!1;constructor(){}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(e=>e===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){let e=this._selected!==null&&this._selected.value===this._value;this._radios&&!e&&(this._selected=null,this._radios.forEach(r=>{r.checked=this.value===r.value,r.checked&&(this._selected=r)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Bt(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}static \u0275fac=function(r){return new(r||i)};static \u0275dir=$n({type:i,selectors:[["mat-radio-group"]],contentQueries:function(r,n,o){if(r&1&&Un(o,Rt,5),r&2){let a;Fe(a=ze())&&(n._radios=a)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",me],required:[2,"required","required",me],disabledInteractive:[2,"disabledInteractive","disabledInteractive",me]},outputs:{change:"change"},exportAs:["matRadioGroup"],features:[Gn([Da,{provide:$r,useExisting:i}])]})}return i})(),Rt=(()=>{class i{_elementRef=q(Ot);_changeDetector=q(Nt);_focusMonitor=q(ei);_radioDispatcher=q(mi);_defaultOptions=q($a,{optional:!0});_ngZone=q(Rn);_renderer=q(On);_uniqueId=q(Ut).getId("mat-radio-");_cleanupClick;id=this._uniqueId;name;ariaLabel;ariaLabelledby;ariaDescribedby;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked!==e&&(this._checked=e,e&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!e&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),e&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.radioGroup!==null&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}_labelPosition;get disabled(){return this._disabled||this.radioGroup!==null&&this.radioGroup.disabled}set disabled(e){this._setDisabled(e)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){e!==this._required&&this._changeDetector.markForCheck(),this._required=e}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._defaultOptions&&this._defaultOptions.color||"accent"}set color(e){this._color=e}_color;get disabledInteractive(){return this._disabledInteractive||this.radioGroup!==null&&this.radioGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new zt;radioGroup;get inputId(){return`${this.id||this._uniqueId}-input`}_checked=!1;_disabled;_required;_value=null;_removeUniqueSelectionListener=()=>{};_previousTabIndex;_inputElement;_rippleTrigger;_noopAnimations;_injector=q(Pn);constructor(){q(ti).load(ri);let e=q($r,{optional:!0}),r=q(Vn,{optional:!0}),n=q(new Bn("tabindex"),{optional:!0});this.radioGroup=e,this._noopAnimations=r==="NoopAnimations",this._disabledInteractive=this._defaultOptions?.disabledInteractive??!1,n&&(this.tabIndex=qt(n,0))}focus(e,r){r?this._focusMonitor.focusVia(this._inputElement,r,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((e,r)=>{e!==this.id&&r===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()}),this._ngZone.runOutsideAngular(()=>{this._cleanupClick=this._renderer.listen(this._inputElement.nativeElement,"click",this._onInputClick)})}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Bt(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){let r=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),r&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(e){this._onInputInteraction(e),(!this.disabled||this.disabledInteractive)&&this._inputElement?.nativeElement.focus()}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}_onInputClick=e=>{this.disabled&&this.disabledInteractive&&e.preventDefault()};_updateTabIndex(){let e=this.radioGroup,r;if(!e||!e.selected||this.disabled?r=this.tabIndex:r=e.selected===this?this.tabIndex:-1,r!==this._previousTabIndex){let n=this._inputElement?.nativeElement;n&&(n.setAttribute("tabindex",r+""),this._previousTabIndex=r,Fn(()=>{queueMicrotask(()=>{e&&e.selected&&e.selected!==this&&document.activeElement===n&&(e.selected?._inputElement.nativeElement.focus(),document.activeElement===n&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=K({type:i,selectors:[["mat-radio-button"]],viewQuery:function(r,n){if(r&1&&(Ke(Fa,5),Ke(za,7,Ot)),r&2){let o;Fe(o=ze())&&(n._inputElement=o.first),Fe(o=ze())&&(n._rippleTrigger=o.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:19,hostBindings:function(r,n){r&1&&w("focus",function(){return n._inputElement.nativeElement.focus()}),r&2&&(Dt("id",n.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),j("mat-primary",n.color==="primary")("mat-accent",n.color==="accent")("mat-warn",n.color==="warn")("mat-mdc-radio-checked",n.checked)("mat-mdc-radio-disabled",n.disabled)("mat-mdc-radio-disabled-interactive",n.disabledInteractive)("_mat-animation-noopable",n._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",me],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:qt(e)],checked:[2,"checked","checked",me],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",me],required:[2,"required","required",me],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",me]},outputs:{change:"change"},exportAs:["matRadioButton"],ngContentSelectors:Oa,decls:13,vars:17,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio","aria-invalid","false",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(r,n){if(r&1){let o=N();Nn(),c(0,"div",2,0)(2,"div",3)(3,"div",4),w("click",function(l){return C(o),v(n._onTouchTargetClick(l))}),d(),c(4,"input",5,1),w("change",function(l){return C(o),v(n._onInputInteraction(l))}),d(),c(6,"div",6),$(7,"div",7)(8,"div",8),d(),c(9,"div",9),$(10,"div",10),d()(),c(11,"label",11),qn(12),d()()}r&2&&(E("labelPosition",n.labelPosition),u(2),j("mdc-radio--disabled",n.disabled),u(2),E("id",n.inputId)("checked",n.checked)("disabled",n.disabled&&!n.disabledInteractive)("required",n.required),Dt("name",n.name)("value",n.value)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedby)("aria-disabled",n.disabled&&n.disabledInteractive?"true":null),u(5),E("matRippleTrigger",n._rippleTrigger.nativeElement)("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",!0),u(2),E("for",n.inputId))},dependencies:[oi,ii],styles:[`.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled])~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px);top:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled{pointer-events:auto}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color, var(--mat-sys-primary))}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-radio-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-radio-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-radio-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-radio-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-radio-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple>.mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio>.mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.cdk-focused .mat-focus-indicator::before{content:""}.mat-mdc-radio-disabled{cursor:default;pointer-events:none}.mat-mdc-radio-disabled.mat-mdc-radio-disabled-interactive{pointer-events:auto}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display, block)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}
`],encapsulation:2,changeDetection:0})}return i})(),Lr=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=Dn({type:i});static \u0275inj=An({imports:[jt,ai,Rt,jt]})}return i})();function qa(i,t){i&1&&(c(0,"mat-radio-button",36),p(1,"VKA (Verifik)"),d())}function Ua(i,t){if(i&1&&(Ce(0),p(1),c(2,"span",37),p(3,"AVAX"),d(),ve()),i&2){let e=f();u(),b(" ",e.data.amount," ")}}function ja(i,t){if(i&1&&(Ce(0),p(1),c(2,"span",37),p(3,"VKA"),d(),ve()),i&2){let e=f();u(),b(" ",e.data.priceVka," ")}}function Ha(i,t){if(i&1&&(Ce(0),p(1),x(2,"number"),ve()),i&2){let e=f();u(),b(" ",te(2,1,e.data.currentBalance,"1.4-4")," AVAX ")}}function Ga(i,t){if(i&1&&(Ce(0),p(1),x(2,"number"),ve()),i&2){let e=f();u(),b(" ",te(2,1,e.data.tokenBalance,"1.4-4")," VKA ")}}function Wa(i,t){if(i&1&&(Ce(0),p(1),x(2,"number"),ve()),i&2){let e=f();u(),b(" ",te(2,1,e.newBalance,"1.4-4")," AVAX ")}}function Qa(i,t){if(i&1&&(Ce(0),p(1),x(2,"number"),ve()),i&2){let e=f();u(),b(" ",te(2,1,e.newBalance,"1.2-2")," VKA ")}}function Ka(i,t){i&1&&(c(0,"div",20),p(1),x(2,"transloco"),d()),i&2&&(u(),b(" ",_(2,1,"chat.payment.insufficientFunds")," "))}function Xa(i,t){if(i&1&&(c(0,"div",32)(1,"div",38)(2,"mat-icon",26),p(3,"data_object"),d()(),c(4,"div",39)(5,"div",28),p(6),x(7,"transloco"),d(),c(8,"div",40),p(9),d()()()),i&2){let e=f();u(6),b(" ",_(7,2,"chat.payment.parameters")," "),u(3),b(" ",e.data.details," ")}}var Nr=(()=>{class i{constructor(e,r){this.dialogRef=e,this.data=r,this.selectedCurrency="AVAX",r.priceVka&&(this.selectedCurrency="VKA")}get newBalance(){if(this.selectedCurrency==="AVAX"){let e=parseFloat(this.data.currentBalance||"0"),r=parseFloat(this.data.amount||"0");return e-r}else if(this.selectedCurrency==="VKA"){let e=parseFloat(this.data.tokenBalance||"0"),r=this.data.priceVka||0;return e-r}return 0}confirm(){this.dialogRef.close({confirmed:!0,currency:this.selectedCurrency,amount:this.selectedCurrency==="AVAX"?this.data.amount:this.data.priceVka?.toString()})}close(){this.dialogRef.close(!1)}static{this.\u0275fac=function(r){return new(r||i)(U(Oe),U(De))}}static{this.\u0275cmp=K({type:i,selectors:[["app-payment-confirmation"]],decls:71,vars:48,consts:[[1,"bg-white","dark:bg-slate-900","rounded-2xl","max-w-md","w-full","overflow-hidden"],[1,"p-6","pb-2"],[1,"text-xl","font-bold","dark:text-white","flex","items-center","gap-2"],[1,"w-10","h-10","rounded-full","bg-slate-100","dark:bg-slate-800","flex","items-center","justify-center"],[1,"text-slate-900","dark:text-white"],[1,"p-6","pt-2"],[1,"text-center","py-6"],[1,"text-xs","text-slate-500","uppercase","tracking-wider","font-bold","mb-4"],[1,"flex","justify-center","gap-6","mb-4",3,"ngModelChange","ngModel"],["value","AVAX",1,"font-bold"],["value","VKA","class","font-bold",4,"ngIf"],[1,"text-5xl","font-bold","text-slate-900","dark:text-white","flex","items-center","justify-center","gap-1","transition-all"],[4,"ngIf"],[1,"bg-slate-50","dark:bg-slate-800/50","rounded-xl","p-4","mb-6","border","border-slate-100","dark:border-slate-700","space-y-3"],[1,"flex","justify-between","items-center"],[1,"text-sm","text-slate-500","font-medium"],[1,"font-mono","text-sm","dark:text-slate-300"],[1,"w-full","h-px","bg-slate-200","dark:bg-slate-700"],[1,"text-sm","font-bold","text-slate-700","dark:text-slate-200"],[1,"font-mono","text-sm","font-bold"],[1,"text-xs","text-red-500","text-right","font-medium","mt-1"],[1,"mb-8"],[1,"text-xs","text-slate-400","uppercase","font-bold","tracking-wider","mb-3","block","px-1"],[1,"bg-white","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","rounded-xl","overflow-hidden"],[1,"p-3","border-b","border-slate-100","dark:border-slate-700","flex","items-start","gap-3"],[1,"w-8","h-8","rounded-lg","bg-blue-50","dark:bg-blue-900/20","text-blue-600","flex","items-center","justify-center","shrink-0"],[1,"!w-4","!h-4","!text-[16px]"],[1,"min-w-0"],[1,"text-[10px]","text-slate-400","uppercase","font-bold"],[1,"text-sm","font-mono","text-slate-700","dark:text-slate-300","break-all","leading-tight"],[1,"w-8","h-8","rounded-lg","bg-purple-50","dark:bg-purple-900/20","text-purple-600","flex","items-center","justify-center","shrink-0"],[1,"text-xs","font-mono","text-slate-600","dark:text-slate-400","break-all","leading-tight"],[1,"p-3","bg-slate-50","dark:bg-slate-800/50","flex","items-start","gap-3"],[1,"flex","gap-3"],["mat-stroked-button","",1,"flex-1","!h-12","!rounded-xl","!border-slate-200","dark:!border-slate-700","dark:text-white",3,"click"],["mat-flat-button","","color","primary",1,"flex-[2]","!h-12","!rounded-xl","text-lg","shadow-lg","shadow-blue-500/20",3,"click","disabled"],["value","VKA",1,"font-bold"],[1,"text-lg","text-slate-400","font-normal","self-end","mb-1.5","ml-1"],[1,"w-8","h-8","rounded-lg","bg-emerald-50","dark:bg-emerald-900/20","text-emerald-600","flex","items-center","justify-center","shrink-0"],[1,"min-w-0","flex-1"],[1,"text-xs","text-slate-600","dark:text-slate-400","mt-1","font-mono","bg-white","dark:bg-slate-900","border","border-slate-200","dark:border-slate-700","rounded","p-2"]],template:function(r,n){r&1&&(c(0,"div",0)(1,"div",1)(2,"h2",2)(3,"div",3)(4,"mat-icon",4),p(5,"account_balance_wallet"),d()(),p(6),x(7,"transloco"),d()(),c(8,"div",5)(9,"div",6)(10,"div",7),p(11),x(12,"transloco"),d(),c(13,"mat-radio-group",8),Se("ngModelChange",function(a){return Ie(n.selectedCurrency,a)||(n.selectedCurrency=a),a}),c(14,"mat-radio-button",9),p(15,"AVAX"),d(),I(16,qa,2,0,"mat-radio-button",10),d(),c(17,"div",11),I(18,Ua,4,1,"ng-container",12)(19,ja,4,1,"ng-container",12),d()(),c(20,"div",13)(21,"div",14)(22,"span",15),p(23),x(24,"transloco"),d(),c(25,"span",16),I(26,Ha,3,4,"ng-container",12)(27,Ga,3,4,"ng-container",12),d()(),$(28,"div",17),c(29,"div",14)(30,"span",18),p(31),x(32,"transloco"),d(),c(33,"span",19),I(34,Wa,3,4,"ng-container",12)(35,Qa,3,4,"ng-container",12),d()(),I(36,Ka,3,3,"div",20),d(),c(37,"div",21)(38,"label",22),p(39),x(40,"transloco"),d(),c(41,"div",23)(42,"div",24)(43,"div",25)(44,"mat-icon",26),p(45,"api"),d()(),c(46,"div",27)(47,"div",28),p(48),x(49,"transloco"),d(),c(50,"div",29),p(51),x(52,"transloco"),d()()(),c(53,"div",24)(54,"div",30)(55,"mat-icon",26),p(56,"wallet"),d()(),c(57,"div",27)(58,"div",28),p(59),x(60,"transloco"),d(),c(61,"div",31),p(62),d()()(),I(63,Xa,10,4,"div",32),d()(),c(64,"div",33)(65,"button",34),w("click",function(){return n.close()}),p(66),x(67,"transloco"),d(),c(68,"button",35),w("click",function(){return n.confirm()}),p(69),x(70,"transloco"),d()()()()),r&2&&(u(6),b(" ",_(7,28,"chat.payment.title")," "),u(5),b(" ",_(12,30,"chat.payment.totalCost")," "),u(2),ye("ngModel",n.selectedCurrency),u(3),E("ngIf",n.data.priceVka),u(2),E("ngIf",n.selectedCurrency==="AVAX"),u(),E("ngIf",n.selectedCurrency==="VKA"),u(4),F(_(24,32,"chat.payment.currentBalance")),u(3),E("ngIf",n.selectedCurrency==="AVAX"),u(),E("ngIf",n.selectedCurrency==="VKA"),u(4),F(_(32,34,"chat.payment.newBalance")),u(2),j("text-amber-500",n.newBalance<.1&&n.newBalance>=0)("text-red-500",n.newBalance<0)("text-emerald-600",n.newBalance>=.1),u(),E("ngIf",n.selectedCurrency==="AVAX"),u(),E("ngIf",n.selectedCurrency==="VKA"),u(),y(n.newBalance<0?36:-1),u(3),F(_(40,36,"chat.payment.serviceDetails")),u(9),b(" ",_(49,38,"chat.payment.endpoint")," "),u(3),b(" ",n.data.endpoint||_(52,40,"chat.payment.unknownEndpoint")," "),u(8),b(" ",_(60,42,"chat.payment.receiver")," "),u(3),b(" ",n.data.receiver," "),u(),y(n.data.details?63:-1),u(3),b(" ",_(67,44,"chat.payment.cancel")," "),u(2),E("disabled",n.newBalance<0),u(),b(" ",_(70,46,"chat.payment.confirmBtn")," "))},dependencies:[ae,Qn,dt,ge,be,$e,le,se,de,ce,Lr,Mn,Rt,qe,Le,Ne],encapsulation:2})}}return i})();var Za=["scrollContainer"],Ja=(i,t)=>t.id;function Ya(i,t){i&1&&(c(0,"div",9),p(1),x(2,"transloco"),d()),i&2&&(u(),b(" ",_(2,1,"chat.sidebar.noHistory")," "))}function es(i,t){if(i&1){let e=N();c(0,"input",41),Se("ngModelChange",function(n){C(e);let o=f(2);return Ie(o.renameInput,n)||(o.renameInput=n),v(n)}),w("click",function(n){return C(e),v(n.stopPropagation())})("blur",function(){C(e);let n=f().$implicit,o=f();return v(o.saveRename(n))})("keyup.enter",function(){C(e);let n=f().$implicit,o=f();return v(o.saveRename(n))}),d()}if(i&2){let e=f(2);ye("ngModel",e.renameInput)}}function ts(i,t){if(i&1){let e=N();c(0,"div",42)(1,"div",43),p(2),d(),c(3,"div",44),p(4),x(5,"date"),d()(),c(6,"div",45)(7,"button",46),w("click",function(n){C(e);let o=f().$implicit,a=f();return v(a.startRenaming(o,n))}),c(8,"mat-icon",47),p(9,"edit"),d()(),c(10,"button",48),w("click",function(n){C(e);let o=f().$implicit,a=f();return v(a.deleteConversation(o,n))}),c(11,"mat-icon",47),p(12,"delete"),d()()()}if(i&2){let e=f().$implicit;u(2),b(" ",e.title," "),u(2),b(" ",te(5,2,e.updated_at,"MMM d, h:mm a")," ")}}function ns(i,t){if(i&1){let e=N();c(0,"div",39),w("click",function(){let n=C(e).$implicit,o=f();return v(o.selectConversation(n.id))}),I(1,es,1,1,"input",40)(2,ts,13,5),d()}if(i&2){let e=t.$implicit,r=f();j("bg-white",r.currentConversationId()===e.id)("dark:bg-slate-900",r.currentConversationId()===e.id)("shadow-sm",r.currentConversationId()===e.id)("border-slate-200",r.currentConversationId()===e.id)("dark:border-slate-800",r.currentConversationId()===e.id)("hover:bg-slate-200",r.currentConversationId()!==e.id)("dark:hover:bg-slate-900",r.currentConversationId()!==e.id),u(),y(r.isRenamingId()===e.id?1:2)}}function is(i,t){i&1&&$(0,"div",17)}function rs(i,t){if(i&1&&(c(0,"div",51),p(1),x(2,"number"),d()),i&2){let e=f(2);u(),Hn(" ",te(2,2,e.tokenBalance(),"1.0-2")," ",e.tokenTicker," ")}}function os(i,t){if(i&1){let e=N();c(0,"div",49),w("click",function(){C(e);let n=f();return v(n.toggleWalletModal())}),c(1,"div",50)(2,"div"),p(3),x(4,"number"),d(),I(5,rs,3,5,"div",51),d(),c(6,"div",52)(7,"mat-icon",53),p(8,"account_balance_wallet"),d()()()}if(i&2){let e=f();u(3),b("",te(4,2,e.walletBalance(),"1.4-4")," AVAX"),u(2),y(e.tokenBalance()&&e.tokenBalance()!=="0.00"&&e.tokenBalance()!=="0.0"?5:-1)}}function as(i,t){i&1&&(c(0,"div",65),$(1,"mat-progress-spinner",70),p(2," Confirming... "),d())}function ss(i,t){i&1&&(c(0,"div",66)(1,"mat-icon",71),p(2,"check_circle"),d(),p(3," On-Chain "),d())}function ls(i,t){if(i&1&&(c(0,"div",69)(1,"label",72),p(2,"Transaction Hash"),d(),c(3,"a",73)(4,"span",74),p(5),d(),c(6,"div",75)(7,"span",76),p(8,"VIEW"),d(),c(9,"mat-icon",71),p(10,"open_in_new"),d()()()()),i&2){let e=t,r=f(3);u(3),E("href",r.getSnowtraceUrl()+"/tx/"+e,ee),u(2),F(e)}}function cs(i,t){if(i&1&&(c(0,"div",54)(1,"div",57),p(2," AI "),d(),c(3,"div",58)(4,"div",59)(5,"div",60)(6,"div",61)(7,"div",62)(8,"mat-icon",63),p(9,"star"),d()(),c(10,"span",64),p(11,"Proof of Feedback"),d()(),I(12,as,3,0,"div",65)(13,ss,4,0,"div",66),d(),c(14,"div",67)(15,"div",68),p(16," Processing your reputation feedback on correct execution. "),d(),I(17,ls,11,2,"div",69),d()()()()),i&2){let e,r=f().$implicit,n=f();u(12),y(r.content.includes("Waiting")?12:13),u(5),y((e=n.extractTxHash(r.content))?17:-1,e)}}function ds(i,t){i&1&&(c(0,"div",55)(1,"div",77)(2,"mat-icon",34),p(3,"verified"),d(),p(4," Reputation Recorded Successfully "),d()())}function us(i,t){i&1&&(c(0,"span",80),p(1),d()),i&2&&(u(),F(t))}function ps(i,t){i&1&&(c(0,"div",65),$(1,"mat-progress-spinner",70),p(2," Pending "),d())}function ms(i,t){i&1&&(c(0,"div",81),$(1,"mat-progress-spinner",70),p(2," Processing "),d())}function hs(i,t){i&1&&(c(0,"div",66)(1,"mat-icon",71),p(2,"check_circle"),d(),p(3," Confirmed "),d())}function fs(i,t){if(i&1&&(c(0,"div",83)(1,"div",84),p(2,"Amount"),d(),c(3,"div",64),p(4),d()()),i&2){let e=f(2).$implicit;u(4),b(" ",e.paymentAmount," ")}}function gs(i,t){if(i&1&&(c(0,"div",69)(1,"label",72),p(2,"Transaction Hash"),d(),c(3,"a",85)(4,"div",86)(5,"div",87)(6,"mat-icon",88),p(7,"receipt"),d()(),c(8,"span",89),p(9),d()(),c(10,"div",90)(11,"span",91),p(12,"View on Snowtrace"),d(),c(13,"mat-icon",92),p(14,"open_in_new"),d()()()()),i&2){let e=t,r=f(3);u(3),E("href",r.getSnowtraceUrl()+"/tx/"+e,ee),u(6),F(e)}}function bs(i,t){if(i&1&&(c(0,"div",54)(1,"div",57),p(2," AI "),d(),c(3,"div",58)(4,"div",59)(5,"div",60)(6,"div",61)(7,"div",78)(8,"mat-icon",79),p(9,"check_circle"),d()(),c(10,"span",64),p(11,"Payment Confirmation"),d(),I(12,us,2,1,"span",80),d(),I(13,ps,3,0,"div",65)(14,ms,3,0,"div",81)(15,hs,4,0,"div",66),d(),c(16,"div",67)(17,"div",82)(18,"p",68),p(19," Payment transaction submitted successfully. "),d(),I(20,fs,5,1,"div",83),d(),I(21,gs,15,2,"div",69),d()()()()),i&2){let e,r,n=f().$implicit,o=f();u(12),y((e=n.paymentCurrency||o.extractPaymentCurrency(n.content))?12:-1,e),u(),y(n.paymentStatus==="pending"||n.content.includes("Waiting")?13:n.paymentStatus==="processing"||n.content.includes("Processing")?14:15),u(7),y(n.paymentAmount?20:-1),u(),y((r=n.paymentTx||o.extractPaymentTxHash(n.content))?21:-1,r)}}function xs(i,t){i&1&&(c(0,"mat-icon",94),p(1,"person"),d())}function _s(i,t){i&1&&p(0," AI ")}function ks(i,t){if(i&1){let e=N();c(0,"img",101),w("click",function(n){let o=C(e).$implicit,a=f(4);return n.stopPropagation(),v(a.window.open(a.getImageUrl(o),"_blank"))}),d()}if(i&2){let e=t.$implicit,r=f(4);E("src",r.getImageUrl(e),ee)}}function ws(i,t){if(i&1&&(c(0,"div",98),re(1,ks,1,1,"img",100,ct),d()),i&2){let e=f(2).$implicit;u(),oe(e.images)}}function Cs(i,t){if(i&1){let e=N();c(0,"div",99)(1,"div",102)(2,"span",103),p(3,"\u26A1"),d(),p(4),x(5,"transloco"),d(),c(6,"div",104),p(7),d(),c(8,"div",105),p(9),d(),c(10,"button",106),w("click",function(){C(e);let n=f(2).$index,o=f();return v(o.confirmPayment(n))}),p(11),x(12,"transloco"),d()()}if(i&2){let e=f(2).$implicit;u(4),b(" ",_(5,4,"chat.payment.required")," "),u(3),b(" ",e.payment_required.amount," AVAX "),u(2),b(" To: ",e.payment_required.receiver_address," "),u(2),b(" ",_(12,6,"chat.payment.payBtn")," ")}}function vs(i,t){if(i&1&&(c(0,"div",109)(1,"div",61)(2,"div",111)(3,"mat-icon",34),p(4,"verified"),d()(),c(5,"div",112),p(6," Validated On-Chain "),d()(),c(7,"a",113),p(8," View TX "),c(9,"mat-icon",71),p(10,"open_in_new"),d()()()),i&2){let e=f(3).$implicit,r=f();u(7),E("href",r.getSnowtraceUrl()+"/tx/"+e.proof,ee)}}function ys(i,t){if(i&1){let e=N();c(0,"button",114),w("click",function(){C(e);let n=f(4);return v(n.openFeedbackModal())}),c(1,"mat-icon",71),p(2,"star_outline"),d(),p(3," Rate this "),d()}}function Is(i,t){if(i&1&&(c(0,"div",107)(1,"pre",108),p(2),x(3,"json"),d()(),I(4,vs,11,1,"div",109)(5,ys,4,0,"button",110)),i&2){let e=f(2).$implicit,r=f();u(2),F(_(3,3,e.data)),u(2),y(e.proof?4:-1),u(),y(r.chatMode()==="x402"&&e.role==="assistant"?5:-1)}}function Ss(i,t){if(i&1&&(c(0,"div",54)(1,"div",93),I(2,xs,2,0,"mat-icon",94)(3,_s,1,0),d(),c(4,"div",95)(5,"div",96),$(6,"div",97),x(7,"markdown"),I(8,ws,3,0,"div",98)(9,Cs,13,8,"div",99)(10,Is,6,5),d()()()),i&2){let e=f().$implicit;j("flex-row-reverse",e.role==="user"),u(),j("bg-slate-900",e.role==="user")("text-white",e.role==="user")("bg-slate-200",e.role!=="user")("text-slate-700",e.role!=="user")("dark:bg-slate-700",e.role!=="user")("dark:text-slate-50",e.role!=="user"),u(),y(e.role==="user"?2:3),u(3),j("bg-slate-900",e.role==="user")("text-white",e.role==="user")("border-slate-800",e.role==="user")("rounded-tr-sm",e.role==="user")("bg-white",e.role!=="user")("text-slate-700",e.role!=="user")("dark:bg-slate-800",e.role!=="user")("dark:text-slate-200",e.role!=="user")("border-slate-200",e.role!=="user")("dark:border-slate-700",e.role!=="user")("rounded-tl-sm",e.role!=="user"),u(),E("innerHTML",_(7,41,e.content),zn),u(2),y(e.images&&e.images.length>0?8:-1),u(),y(e.payment_required?9:-1),u(),y(e.data?10:-1)}}function Ts(i,t){if(i&1&&I(0,cs,18,2,"div",54)(1,ds,5,0,"div",55)(2,bs,22,4,"div",54)(3,Ss,11,43,"div",56),i&2){let e=t.$implicit;y(e.role==="system"&&e.content.includes("Feedback submitted")?0:e.role==="system"&&e.content.includes("Thank you for your feedback")?1:e.role==="system"&&(e.content.includes("Payment sent")||e.paymentTx)?2:3)}}function Ms(i,t){if(i&1&&(c(0,"div",121),p(1),x(2,"transloco"),d()),i&2){let e=f(2);u(),b(" ",_(2,1,e.currentThinkingStep())," ")}}function Es(i,t){if(i&1&&(c(0,"div",25)(1,"div",115),p(2," AI "),d(),c(3,"div",116)(4,"div",117),$(5,"div",118)(6,"div",119)(7,"div",120),d(),I(8,Ms,3,3,"div",121),d()()),i&2){let e=f();u(8),y(e.thinkingSteps().length>0?8:-1)}}function As(i,t){if(i&1){let e=N();c(0,"div",124),w("click",function(){let n=C(e).$implicit,o=f(2);return v(o.openImagePreview(n))}),$(1,"img",125),c(2,"button",126),w("click",function(n){let o=C(e).$index,a=f(2);return n.stopPropagation(),v(a.removeAttachment(o))}),c(3,"mat-icon",127),p(4,"close"),d()()()}if(i&2){let e=t.$implicit;u(),E("src",e,ee)}}function Ps(i,t){if(i&1&&(c(0,"div",27)(1,"div",122),re(2,As,5,1,"div",123,ct),d()()),i&2){let e=f();u(2),oe(e.pendingAttachments())}}function Bs(i,t){i&1&&$(0,"mat-progress-spinner",33)}function Rs(i,t){i&1&&(c(0,"mat-icon",34),p(1,"arrow_upward"),d())}function Vs(i,t){if(i&1){let e=N();c(0,"div",128),w("click",function(){C(e);let n=f();return v(n.closeImagePreview())}),c(1,"button",129),w("click",function(){C(e);let n=f();return v(n.closeImagePreview())}),c(2,"mat-icon",130),p(3,"close"),d()(),c(4,"img",131),w("click",function(n){return C(e),v(n.stopPropagation())}),d()()}if(i&2){let e=f();u(4),E("src",e.previewImage(),ee)}}function Fs(i,t){i&1&&(c(0,"div",139),$(1,"mat-progress-spinner",141),d())}function zs(i,t){if(i&1&&$(0,"app-agent-erc8004",140),i&2){let e=f(2);E("agentInfo",e.agentInfo())}}function Os(i,t){if(i&1){let e=N();c(0,"div",132),w("click",function(){C(e);let n=f();return v(n.toggleAgentInfoModal())}),c(1,"div",133),w("click",function(n){return C(e),v(n.stopPropagation())}),c(2,"div",134)(3,"div",135)(4,"h2",136),p(5),x(6,"transloco"),d(),c(7,"button",137),w("click",function(){C(e);let n=f();return v(n.toggleAgentInfoModal())}),c(8,"mat-icon"),p(9,"close"),d()()(),c(10,"div",138),I(11,Fs,2,0,"div",139)(12,zs,1,1,"app-agent-erc8004",140),d()()()()}if(i&2){let e=f();u(5),b(" ",_(6,2,"chat.agentInfo.title")," "),u(6),y(e.isLoadingAgentInfo()?11:12)}}function Ds(i,t){if(i&1&&(c(0,"div",145),$(1,"img",158),d()),i&2){let e=f(2);u(),E("src",e.walletQrCode(),ee)}}function $s(i,t){if(i&1&&(c(0,"div",155),p(1),x(2,"number"),c(3,"span",154),p(4),d()()),i&2){let e=f(2);u(),b(" ",te(2,2,e.tokenBalance(),"1.0-2")," "),u(3),F(e.tokenTicker)}}function Ls(i,t){if(i&1){let e=N();c(0,"div",132),w("click",function(){C(e);let n=f();return v(n.toggleWalletModal())}),c(1,"div",142),w("click",function(n){return C(e),v(n.stopPropagation())}),c(2,"button",143),w("click",function(){C(e);let n=f();return v(n.toggleWalletModal())}),c(3,"mat-icon"),p(4,"close"),d()(),c(5,"h2",144),p(6),x(7,"transloco"),d(),I(8,Ds,2,1,"div",145),c(9,"div",146)(10,"label",147),p(11),x(12,"transloco"),d(),c(13,"div",148)(14,"code",149),p(15),d(),c(16,"button",150),w("click",function(){C(e);let n=f();return v(n.copyAddress())}),c(17,"mat-icon",151),p(18,"content_copy"),d()()()(),c(19,"div",152)(20,"label",147),p(21),x(22,"transloco"),d(),c(23,"div",153),p(24),x(25,"number"),c(26,"span",154),p(27,"AVAX"),d()(),I(28,$s,5,5,"div",155),d(),c(29,"button",156),w("click",function(){C(e);let n=f();return v(n.refreshBalance())}),p(30),x(31,"transloco"),d(),c(32,"button",157),w("click",function(){C(e);let n=f();return v(n.resetWallet())}),p(33),x(34,"transloco"),d()()()}if(i&2){let e=f();u(6),b(" ",_(7,9,"chat.walletModal.title")," "),u(2),y(e.walletQrCode()?8:-1),u(3),F(_(12,11,"chat.walletModal.addressLabel")),u(4),F(e.walletAddress()),u(6),F(_(22,13,"chat.walletModal.balanceLabel")),u(3),b(" ",te(25,15,e.walletBalance(),"1.4-4")," "),u(4),y(e.tokenBalance()&&e.tokenBalance()!=="0.00"&&e.tokenBalance()!=="0.0"?28:-1),u(2),b(" ",_(31,18,"chat.walletModal.refresh")," "),u(3),b(" ",_(34,20,"chat.walletModal.reset")," ")}}function Ns(i,t){if(i&1&&(c(0,"div",38)(1,"mat-icon",159),p(2,"check_circle"),d(),p(3),d()),i&2){let e=f();u(3),b(" ",e.toastMessage()," ")}}var Ur=(()=>{class i{getSnowtraceUrl(){if(H.isTestnet!==void 0)return H.isTestnet?"https://testnet.snowtrace.io":"https://snowtrace.io";if(H.chainId)return H.chainId===43113?"https://testnet.snowtrace.io":"https://snowtrace.io";let e=H.rpcUrl||"";return e.includes("test")||e.includes("fuji")||e.includes("43113")?"https://testnet.snowtrace.io":"https://snowtrace.io"}getInitialSidebarState(){let e=localStorage.getItem("isSidebarOpen");return e!==null?e==="true":window.innerWidth>=1024}constructor(e,r,n){this.http=e,this.walletService=r,this._matDialog=n,this.window=window,this.baseUrl=H.baseUrl,this.smartAgentUrl=H.smartAgentUrl,this.tokenTicker=H.tokenTicker||"VKA",this.apiUrl=`${H.smartAgentUrl}/api/agent`,this.messages=M([]),this.userInput=M(""),this.isLoading=M(!1),this.walletAddress=M(""),this.walletBalance=M("0"),this.tokenBalance=M("0"),this.showWalletModal=M(!1),this.chatMode=M("x402"),this.showAgentInfoModal=M(!1),this.agentInfo=M(null),this.isLoadingAgentInfo=M(!1),this.agentCardUrl=`${this.apiUrl}/agent-card.json`,this.showPaymentConfirmationModal=M(!1),this.pendingPayment=M(null),this.isProcessingPayment=M(!1),this.showPaymentDetails=M(!1),this.lastPaymentTx=M(null),this.thinkingSteps=M([]),this.currentThinkingStep=M(""),this.conversations=M([]),this.currentConversationId=M(null),this.isSidebarOpen=M(this.getInitialSidebarState()),this.isRenamingId=M(null),this.renameInput=M(""),this.pendingAttachments=M([]),this.walletQrCode=M(""),this.showToast=M(!1),this.toastMessage=M(""),this.previewImage=M(null)}ngOnInit(){return L(this,null,function*(){this.walletAddress.set(this.walletService.getAddress()),yield this.refreshBalance(),this.walletService.registerVkaToken();let e=this.walletAddress(),r=localStorage.getItem("lastWalletAddress");e!==r&&(console.log("Wallet changed, clearing session."),localStorage.removeItem("currentConversationId"),localStorage.setItem("lastWalletAddress",e||""),this.currentConversationId.set(null)),this.loadAgentInfo();let n=localStorage.getItem("chatMode"),o=!!this.walletService.getAddress(),a=!!localStorage.getItem("accessToken"),l=parseFloat(this.walletBalance()||"0");n&&(n==="x402"&&o||n==="credits"&&a)?this.chatMode.set(n):a&&!o?this.setChatMode("credits"):o&&a?l<.01?this.setChatMode("credits"):this.setChatMode("x402"):o&&this.setChatMode("x402"),this.loadConversations();let s=localStorage.getItem("currentConversationId");s?this.selectConversation(s):this.startNewChat(!1)})}loadConversations(){let e={};this.chatMode()==="x402"&&this.walletAddress()?e.walletAddress=this.walletAddress():this.chatMode()==="credits"&&(e.walletAddress=this.getUserId()),this.http.get(`${this.apiUrl}/conversations`,{params:e}).subscribe({next:r=>this.conversations.set(r),error:r=>console.error("Failed to load conversations",r)})}selectConversation(e){this.currentConversationId.set(e),localStorage.setItem("currentConversationId",e),this.isLoading.set(!0);let r="";this.chatMode()==="x402"?r=this.walletAddress():r=this.getUserId();let n={walletAddress:r};this.http.get(`${this.apiUrl}/history/${e}`,{params:n}).subscribe({next:o=>{this.messages.set(o.messages||[]),this.isLoading.set(!1),this.scrollToBottom()},error:o=>{console.error("Failed to load history",o),(o.status===403||o.status===404)&&(localStorage.removeItem("currentConversationId"),this.currentConversationId.set(null),this.messages.set([])),this.isLoading.set(!1)}})}startNewChat(e=!0){e&&localStorage.removeItem("currentConversationId"),this.currentConversationId.set(null),this.userInput.set(""),this.pendingAttachments.set([]),this.thinkingSteps.set([]),this.currentThinkingStep.set(""),this.isLoading.set(!1),this.messages.set([]);let r=this.agentInfo()?.identity,n=r?`Hello! I am ${r.name}. ${r.description} How can I assist you today?`:"Hello! I am your Verifik AI Agent powered by Gemini. I can help you validate identities using the x402 protocol on Avalanche. How can I assist you today?";if(this.messages.set([{role:"assistant",content:n}]),e){let o={mode:this.chatMode(),walletAddress:this.chatMode()==="credits"?this.getUserId():this.walletAddress()};this.http.post(`${this.apiUrl}/conversations`,o).subscribe({next:a=>{this.currentConversationId.set(a.id),localStorage.setItem("currentConversationId",a.id),this.loadConversations()},error:a=>console.error("Failed to create new chat",a)})}}startRenaming(e,r){r.stopPropagation(),this.isRenamingId.set(e.id),this.renameInput.set(e.title)}saveRename(e){let r=this.renameInput().trim();if(!r||r===e.title){this.isRenamingId.set(null);return}let n="";this.chatMode()==="x402"?n=this.walletAddress():n=this.getUserId(),this.http.patch(`${this.apiUrl}/conversations/${e.id}`,{title:r,walletAddress:n}).subscribe({next:()=>{this.conversations.update(o=>o.map(a=>a.id===e.id?Y(D({},a),{title:r}):a)),this.isRenamingId.set(null)},error:o=>console.error("Rename failed",o)})}deleteConversation(e,r){r.stopPropagation(),this._matDialog.open(Dr,{panelClass:"delete-confirmation-dialog",backdropClass:"backdrop-blur-sm",width:"400px",maxWidth:"90vw"}).afterClosed().subscribe(o=>{if(!o)return;let a="";this.chatMode()==="x402"?a=this.walletAddress():a=this.getUserId(),this.http.delete(`${this.apiUrl}/conversations/${e.id}`,{params:{walletAddress:a}}).subscribe({next:()=>{this.conversations.update(l=>l.filter(s=>s.id!==e.id)),this.currentConversationId()===e.id&&this.startNewChat()},error:l=>console.error("Delete failed",l)})})}toggleSidebar(){this.isSidebarOpen.update(e=>{let r=!e;return localStorage.setItem("isSidebarOpen",String(r)),r})}loadAgentInfo(){return L(this,null,function*(){this.isLoadingAgentInfo.set(!0);try{this.http.get(`${this.apiUrl}/info`).subscribe({next:e=>{this.agentInfo.set(e),this.isLoadingAgentInfo.set(!1)},error:e=>{console.warn("Failed to load agent info:",e),this.isLoadingAgentInfo.set(!1)}})}catch(e){console.warn("Error loading agent info:",e),this.isLoadingAgentInfo.set(!1)}})}toggleAgentInfoModal(){this.showAgentInfoModal.update(e=>!e)}openAuthModal(){this._matDialog.open(hi,{panelClass:"auth-modal-dialog",width:"400px",maxWidth:"100vw"})}setChatMode(e){this.chatMode.set(e),localStorage.setItem("chatMode",e),this.currentConversationId.set(null),localStorage.removeItem("currentConversationId"),this.messages.set([]),this.refreshBalance(),this.loadConversations(),this.startNewChat(!1)}onPaste(e){return L(this,null,function*(){let r=e.clipboardData?.items;if(r){for(let n=0;n<r.length;n++)if(r[n].type.indexOf("image")!==-1){let o=r[n].getAsFile();if(o){let a=yield this.fileToBase64(o);this.pendingAttachments.update(l=>[...l,a])}}}})}onFileSelected(e){let r=e.target;r.files&&Array.from(r.files).forEach(n=>L(this,null,function*(){let o=yield this.fileToBase64(n);this.pendingAttachments.update(a=>[...a,o])})),r.value=""}removeAttachment(e){this.pendingAttachments.update(r=>r.filter((n,o)=>o!==e))}fileToBase64(e){return new Promise((r,n)=>{let o=new FileReader;o.readAsDataURL(e),o.onload=()=>r(o.result),o.onerror=a=>n(a)})}sendMessage(){return L(this,null,function*(){let e=this.userInput(),r=this.pendingAttachments();if(!e.trim()&&r.length===0)return;let n=this.chatMode()==="credits",o=!!this.walletService.getAddress(),a=!!localStorage.getItem("accessToken");if(!o&&!a){this.openAuthModal();return}if(!n&&!o){this.openAuthModal();return}if(n&&!a){this.openAuthModal();return}let l={role:"user",content:e,images:r};this.messages.update(s=>[...s,l]),this.userInput.set(""),this.pendingAttachments.set([]),this.isLoading.set(!0),this.scrollToBottom(),this.startThinkingSimulation();try{yield this.callAgent(e,null,null,r)}catch(s){this.handleError(s)}})}callAgent(l){return L(this,arguments,function*(e,r=null,n=null,o=[],a=null){let s=this.chatMode()==="credits",h=s?localStorage.getItem("accessToken"):null,m={message:e,conversationId:this.currentConversationId(),paymentTx:s?null:r,paymentWallet:s?this.getUserId():this.walletAddress(),paymentAmount:s?null:n,mode:this.chatMode(),userToken:h,images:o,pendingToolCall:a};this.http.post(`${this.apiUrl}/chat`,m,{observe:"response"}).subscribe({next:k=>{this.isLoading.set(!1),this.thinkingSteps.set([]),this.currentThinkingStep.set("");let g=k.body,S=k.headers;g.conversationId&&!this.currentConversationId()&&(this.currentConversationId.set(g.conversationId),localStorage.setItem("currentConversationId",g.conversationId),this.loadConversations());let T=S.get("x-validation-proof"),z=g.proof||g._proof||T,Q={role:g.role,content:g.content,tool_call:g.tool_call,payment_required:g.payment_required,data:g.data,proof:z,images:g.images};if(this.messages.update(Z=>[...Z,Q]),this.scrollToBottom(),Q.data&&Q.role==="assistant"){let Z=this.messages().filter(J=>J.role==="system"&&(J.paymentTx||J.content.includes("TX:"))).reverse();if(Z.length>0){let J=Z[0],ue=J.paymentTx||this.extractPaymentTxHash(J.content);ue&&(this.lastPaymentTx.set(ue),this.updatePaymentMessageStatus(ue,"confirmed"))}!Q.proof&&this.chatMode()==="x402"&&Q.tool_call&&Q.data&&this.fetchProofAsync(Q,this.messages().length-1)}},error:k=>{this.handleError(k)}})})}startThinkingSimulation(){let e=["agentThinking.steps.analysing","agentThinking.steps.identifying","agentThinking.steps.checking","agentThinking.steps.consulting","agentThinking.steps.preparing"];this.thinkingSteps.set([]),this.currentThinkingStep.set("agentThinking.header");let r=0,n=setInterval(()=>{if(!this.isLoading()||r>=e.length){clearInterval(n);return}let o=e[r];this.thinkingSteps.update(a=>[...a,o]),this.currentThinkingStep.set(o),this.scrollToBottom(),r++},800)}openFeedbackModal(){this._matDialog.open(Or,{panelClass:"agent-feedback-dialog",backdropClass:"backdrop-blur-sm",data:{agentTokenId:1,paymentTxHash:this.lastPaymentTx()}}).afterClosed().subscribe(r=>L(this,null,function*(){if(r&&r.success){this.messages.update(n=>[...n,{role:"system",content:`Feedback submitted! Transaction: ${r.txHash}. Waiting for confirmation...`}]),this.scrollToBottom();try{this.walletService.startActivePolling(),yield r.tx.wait(),this.walletService.pausePolling(),this.messages.update(n=>n.map(o=>o.role==="system"&&o.content.includes(r.txHash)&&o.content.includes("Waiting")?Y(D({},o),{content:`Feedback submitted! Transaction: ${r.txHash}. Validated.`}):o)),this.scrollToBottom(),yield this.loadAgentInfo()}catch(n){this.walletService.pausePolling(),console.error("Transaction confirmation error:",n),this.messages.update(o=>[...o,{role:"system",content:"\u26A0\uFE0F Transaction was sent but confirmation failed. Please check the explorer."}]),this.scrollToBottom()}}else r&&r.error&&this.handleError(r.error)}))}refreshBalance(){this.walletService.getBalance().then(e=>this.walletBalance.set(e)),this.walletService.getTokenBalance().then(e=>this.tokenBalance.set(e))}getImageUrl(e){return e?e.startsWith("http")||e.startsWith("data:")?e:e.startsWith("/api")?`${this.smartAgentUrl}${e}`:`${this.baseUrl}${e}`:""}getUserId(){try{let r=localStorage.getItem("verifik_account");if(r){let n=JSON.parse(r);if(n&&n._id)return n._id}}catch{console.warn("Failed to parse verifik_account from local storage")}let e=localStorage.getItem("accessToken");if(!e)return"";try{let r=JSON.parse(atob(e.split(".")[1]));return r.clientId||r._id||r.id||r.sub||"authenticated_user"}catch(r){return console.error("Failed to parse token",r),"authenticated_user"}}togglePaymentDetails(){this.showPaymentDetails.update(e=>!e)}confirmPayment(e){let r=this.messages()[e];if(!r.payment_required)return;this._matDialog.open(Nr,{panelClass:"payment-confirmation-dialog",backdropClass:"backdrop-blur-sm",data:{amount:r.payment_required.amount,currentBalance:this.walletBalance(),tokenBalance:this.tokenBalance(),receiver:r.payment_required.receiver_address,endpoint:r.payment_required.endpoint||r.payment_required.toolName||"Unknown",details:r.payment_required.details,priceVka:r.payment_required.priceVka,vkaContract:r.payment_required.vkaContract}}).afterClosed().subscribe(o=>L(this,null,function*(){o&&o.confirmed?yield this.executePayment(r.payment_required,o.currency):o===!0&&(yield this.executePayment(r.payment_required,"AVAX"))}))}executePayment(e,r="AVAX"){return L(this,null,function*(){this.isProcessingPayment.set(!0);let n=e.amount,o=e.receiver_address,a=e.serviceId||"cedula-validation",l=e.requestId||`req_${Date.now()}`;try{let s,h=n;if(r==="VKA"){let S=e.priceVka||e.priceUsd,T=e.vkaContract||this.walletService.VKA_CONTRACT_ADDRESS;h=S.toString(),s=yield this.walletService.payForServiceWithToken(o,T,h)}else s=yield this.walletService.payForService(o,a,l,n);let{tx:m}=s;this.addPaymentConfirmationMessage(m.hash,r,h,"pending"),this.lastPaymentTx.set(m.hash),this.updatePaymentMessageStatus(m.hash,"processing"),this.isLoading.set(!0),this.startThinkingSimulation();let g=this.messages().find(S=>S.payment_required===e)?.tool_call;console.log("Completing payment with tool call:",g),yield this.callAgent("Payment complete. Please proceed.",m.hash,h,[],g),yield this.refreshBalance()}catch(s){this.handleError(s)}finally{this.isProcessingPayment.set(!1)}})}handleError(e){this.isLoading.set(!1),console.error(e),this.messages.update(r=>[...r,{role:"system",content:"Error: "+(e.message||"Something went wrong")}]),this.scrollToBottom()}fetchProofAsync(e,r){let n=null;if(this.lastPaymentTx())n=this.lastPaymentTx();else{let a=this.messages().filter(l=>l.role==="system"&&l.content.includes("TX:")).reverse();for(let l of a){let s=l.content.match(/TX: (0x[a-fA-F0-9]+)/);if(s){n=s[1];break}}}if(!e.tool_call||!e.data||!n){console.log("[Chat] Cannot fetch proof: missing required data",{hasToolCall:!!e.tool_call,hasData:!!e.data,hasPaymentTx:!!n});return}let o={toolName:e.tool_call.tool,args:e.tool_call.args,result:e.data,paymentTx:n};console.log("[Chat] Fetching proof asynchronously for tool:",e.tool_call.tool),this.http.post(`${this.apiUrl}/proof`,o).subscribe({next:a=>{a.proof&&(this.messages.update(l=>{let s=[...l];return s[r]&&(s[r]=Y(D({},s[r]),{proof:a.proof})),s}),console.log("[Chat] Proof fetched and updated:",a.proof),this.scrollToBottom())},error:a=>{console.warn("[Chat] Failed to fetch proof:",a)}})}toggleWalletModal(){this.showWalletModal.update(e=>!e),this.showWalletModal()&&this.walletAddress()&&this.generateQrCode(this.walletAddress())}generateQrCode(e){qr.toDataURL(e,{width:200,margin:1},(r,n)=>{r||this.walletQrCode.set(n)})}openImagePreview(e){this.previewImage.set(e)}closeImagePreview(){this.previewImage.set(null)}copyAddress(){return L(this,null,function*(){try{yield navigator.clipboard.writeText(this.walletAddress()),this.showToastNotification("Address copied to clipboard!")}catch(e){console.error(e)}})}showToastNotification(e){this.toastMessage.set(e),this.showToast.set(!0),setTimeout(()=>this.showToast.set(!1),3e3)}resetWallet(){return L(this,null,function*(){confirm("Are you sure you want to reset your wallet?")&&(this.walletService.resetWallet(),this.walletAddress.set(""),localStorage.setItem("lastWalletAddress",""),this.startNewChat(!0),this.conversations.set([]),yield this.refreshBalance(),this.showWalletModal.set(!1))})}scrollToBottom(){setTimeout(()=>{this.scrollContainer?.nativeElement&&(this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight)},100)}extractTxHash(e){if(!e)return null;let r=e.match(/Transaction: (0x[a-fA-F0-9]+)/);return r?r[1]:null}extractPaymentTxHash(e){if(!e)return null;let r=e.match(/TX:\s*(0x[a-fA-F0-9]+)/i);return r?r[1]:null}extractPaymentCurrency(e){return e?e.match(/Payment sent\s*\(VKA\)/i)?"VKA":e.match(/Payment sent\s*\(AVAX\)/i)||e.includes("Payment sent")?"AVAX":null:null}addPaymentConfirmationMessage(e,r,n,o="pending"){let l={role:"system",content:`Payment sent (${r})! TX: ${e}. ${o==="pending"?"Waiting for confirmation...":o==="processing"?"Processing...":"Confirmed"}`,paymentTx:e,paymentCurrency:r,paymentAmount:n,paymentStatus:o};this.messages.update(s=>[...s,l]),this.scrollToBottom()}updatePaymentMessageStatus(e,r){this.messages.update(n=>n.map(o=>{if(o.role==="system"&&o.paymentTx===e){let a=r==="processing"?"Processing...":"Confirmed";return Y(D({},o),{content:`Payment sent (${o.paymentCurrency||"AVAX"})! TX: ${e}. ${a}`,paymentStatus:r})}return o}))}static{this.\u0275fac=function(r){return new(r||i)(U(Jn),U(pt),U(ni))}}static{this.\u0275cmp=K({type:i,selectors:[["app-chat"]],viewQuery:function(r,n){if(r&1&&Ke(Za,5),r&2){let o;Fe(o=ze())&&(n.scrollContainer=o.first)}},decls:66,vars:55,consts:[["scrollContainer",""],["fileInput",""],[1,"flex","h-screen","w-full","bg-white","dark:bg-slate-900","overflow-hidden","relative"],[1,"w-[280px]","bg-slate-50","dark:bg-slate-950","border-r","border-slate-200","dark:border-slate-800","flex","flex-col","transition-all","duration-300","shrink-0","z-20"],[1,"h-16","px-4","border-b","border-slate-200","dark:border-slate-800","flex","items-center","justify-between","shadow-sm","z-10"],[1,"flex","items-center","gap-2","font-bold","text-slate-700","dark:text-slate-200"],[1,"text-slate-500"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","hover:bg-slate-200","dark:hover:bg-slate-800","transition-colors","text-slate-600","dark:text-slate-400",3,"click","matTooltip"],[1,"flex-1","overflow-y-auto","p-3","space-y-1"],[1,"text-center","py-8","text-slate-400","text-sm"],[1,"group","flex","items-center","justify-between","p-3","rounded-xl","cursor-pointer","transition-all","border","border-transparent",3,"bg-white","dark:bg-slate-900","shadow-sm","border-slate-200","dark:border-slate-800","hover:bg-slate-200","dark:hover:bg-slate-900"],[1,"flex-1","flex","flex-col","h-full","min-w-0","relative","bg-white","dark:bg-slate-900"],[1,"h-16","border-b","border-slate-200","dark:border-slate-800","bg-white/80","dark:bg-slate-900/80","backdrop-blur-md","px-4","flex","items-center","justify-between","shrink-0","z-10"],[1,"flex","items-center","gap-3"],[1,"p-2","rounded-lg","hover:bg-slate-100","dark:hover:bg-slate-800","text-slate-500",3,"click"],[1,"flex","items-center","gap-3","cursor-pointer","group",3,"click"],[1,"w-9","h-9","rounded-full","bg-slate-900","text-white","flex","items-center","justify-center","font-bold","text-xs","shadow-sm","relative","group-hover:scale-105","transition-transform"],[1,"absolute","-bottom-0.5","-right-0.5","w-2.5","h-2.5","bg-green-500","border-2","border-white","rounded-full"],[1,"font-bold","text-slate-900","dark:text-white","text-sm","group-hover:text-blue-600","transition-colors"],[1,"text-[10px]","text-slate-500","font-medium","hidden","sm:block"],[1,"flex","items-center","bg-slate-100","dark:bg-slate-800","rounded-lg","p-0.5","border","border-slate-200","dark:border-slate-700","hidden","sm:flex"],[1,"px-3","py-1.5","rounded-md","text-xs","font-medium","transition-all",3,"click"],[1,"flex","items-center","gap-2","px-3","py-1.5","rounded-full","bg-slate-50","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","cursor-pointer","hover:border-slate-300","transition-colors","hover:shadow-sm"],[1,"flex-1","overflow-y-auto","messages-container","p-4","scroll-smooth","max-h-[calc(100vh-16rem)]"],[1,"max-w-4xl","mx-auto","space-y-6","pb-4"],[1,"message","flex","gap-4"],[1,"border-t","border-slate-200","dark:border-slate-800","bg-white","dark:bg-slate-900","p-4","shrink-0","z-10"],[1,"max-w-4xl","mx-auto","mb-3","pl-12"],[1,"max-w-4xl","mx-auto","flex","gap-3","items-center","relative"],["type","file","hidden","","multiple","","accept","image/*",3,"change"],["mat-icon-button","","matTooltip","Attach image",1,"text-slate-400","hover:text-slate-600","dark:hover:text-slate-200","transition-colors",3,"click"],["type","text",1,"flex-1","h-12","pl-4","pr-12","rounded-xl","border","border-slate-200","dark:border-slate-700","bg-slate-50","dark:bg-slate-800","text-slate-900","dark:text-white","focus:ring-2","focus:ring-slate-900/10","focus:border-slate-400","outline-none","transition-all","placeholder:text-slate-400","shadow-sm",3,"ngModelChange","keyup.enter","paste","ngModel","placeholder"],[1,"absolute","right-2","top-2","h-8","w-8","flex","items-center","justify-center","rounded-lg","bg-slate-900","text-white","hover:bg-slate-700","disabled:opacity-50","disabled:bg-slate-200","disabled:text-slate-400","transition-all","shadow-md",3,"click","disabled"],["mode","indeterminate","diameter","16","color","accent"],[1,"!w-4","!h-4","!text-[16px]"],[1,"text-center","mt-2","text-[10px]","text-slate-400"],[1,"fixed","inset-0","z-[70]","flex","items-center","justify-center","bg-black/90","backdrop-blur-md","p-4","animate-fadeIn"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-slate-900/50","backdrop-blur-sm","p-4","animate-fadeIn"],[1,"fixed","bottom-6","left-1/2","transform","-translate-x-1/2","z-[60]","bg-slate-800","text-white","px-4","py-2","rounded-full","shadow-lg","flex","items-center","gap-2","text-sm","animate-slideUpFade"],[1,"group","flex","items-center","justify-between","p-3","rounded-xl","cursor-pointer","transition-all","border","border-transparent",3,"click"],["type","text",1,"w-full","text-sm","bg-white","dark:bg-slate-900","border","border-blue-500","rounded","px-2","py-1","outline-none",3,"ngModel"],["type","text",1,"w-full","text-sm","bg-white","dark:bg-slate-900","border","border-blue-500","rounded","px-2","py-1","outline-none",3,"ngModelChange","click","blur","keyup.enter","ngModel"],[1,"flex-1","min-w-0","pr-2"],[1,"truncate","text-sm","font-medium","text-slate-700","dark:text-slate-300"],[1,"text-[10px]","text-slate-400","mt-0.5"],[1,"opacity-0","group-hover:opacity-100","flex","gap-1","transition-opacity"],[1,"p-1","hover:bg-blue-50","dark:hover:bg-blue-900/30","rounded","text-slate-400","hover:text-blue-500","transition-colors",3,"click"],[1,"!w-4","!h-4","!text-[16px]","leading-none","flex","items-center","justify-center"],[1,"p-1","hover:bg-red-50","dark:hover:bg-red-900/30","rounded","text-slate-400","hover:text-red-500","transition-colors",3,"click"],[1,"flex","items-center","gap-2","px-3","py-1.5","rounded-full","bg-slate-50","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","cursor-pointer","hover:border-slate-300","transition-colors","hover:shadow-sm",3,"click"],[1,"text-xs","font-medium","text-slate-600","dark:text-slate-300","font-mono","text-right","leading-tight"],[1,"text-[10px]","text-slate-400","dark:text-slate-500","font-bold","mt-0.5"],[1,"w-6","h-6","rounded-full","bg-blue-100","dark:bg-blue-900/30","flex","items-center","justify-center","text-blue-600","dark:text-blue-400"],[1,"!w-3.5","!h-3.5","!text-[14px]"],[1,"message","flex","gap-4","animate-fadeIn"],[1,"flex","justify-center","my-4","animate-fadeIn"],[1,"message","flex","gap-4","animate-fadeIn",3,"flex-row-reverse"],[1,"w-8","h-8","rounded-full","flex-shrink-0","flex","items-center","justify-center","text-xs","font-bold","bg-slate-200","text-slate-700","dark:bg-slate-700","dark:text-slate-50"],[1,"max-w-[85%]","sm:max-w-lg","w-full"],[1,"bg-white","dark:bg-slate-800","rounded-2xl","rounded-tl-sm","p-4","shadow-sm","border","border-slate-200","dark:border-slate-700","w-full"],[1,"flex","flex-wrap","items-center","justify-between","mb-3","pb-3","border-b","border-slate-100","dark:border-slate-700","gap-2"],[1,"flex","items-center","gap-2"],[1,"w-6","h-6","rounded-full","bg-yellow-100","flex","items-center","justify-center"],[1,"text-yellow-600","!w-4","!h-4","!text-[16px]"],[1,"text-sm","font-bold","text-slate-800","dark:text-white"],[1,"flex","items-center","gap-1.5","text-xs","font-semibold","text-amber-600","bg-amber-50","px-2","py-1","rounded-lg","border","border-amber-100"],[1,"flex","items-center","gap-1.5","text-xs","font-semibold","text-emerald-600","bg-emerald-50","px-2","py-1","rounded-lg","border","border-emerald-100"],[1,"space-y-3"],[1,"text-sm","text-slate-600","dark:text-slate-300"],[1,"flex","flex-col","gap-1.5"],["diameter","12","mode","indeterminate",1,"mr-1"],[1,"!w-3","!h-3","!text-[12px]"],[1,"text-[10px]","uppercase","tracking-wider","font-semibold","text-slate-400"],["target","_blank","rel","noopener noreferrer",1,"group","flex","items-center","justify-between","p-2.5","bg-slate-50","dark:bg-slate-900","rounded-lg","border","border-slate-200","dark:border-slate-700","hover:border-blue-300","hover:bg-blue-50/50","transition-all","cursor-pointer","text-decoration-none",3,"href"],[1,"font-mono","text-xs","text-slate-600","dark:text-slate-400","truncate","mr-2"],[1,"flex","items-center","gap-1","text-slate-400","group-hover:text-blue-500"],[1,"text-[10px]","font-bold"],[1,"flex","items-center","gap-2","px-4","py-2","bg-emerald-50","border","border-emerald-100","text-emerald-800","rounded-full","text-sm","font-medium","shadow-sm"],[1,"w-6","h-6","rounded-full","bg-emerald-50","dark:bg-emerald-900/20","flex","items-center","justify-center"],[1,"text-emerald-600","dark:text-emerald-400","!w-4","!h-4","!text-[16px]"],[1,"px-2","py-0.5","rounded-full","bg-slate-100","dark:bg-slate-700","text-slate-500","text-[10px]","font-bold","uppercase","tracking-wider"],[1,"flex","items-center","gap-1.5","text-xs","font-semibold","text-blue-600","bg-blue-50","px-2","py-1","rounded-lg","border","border-blue-100"],[1,"flex","items-center","justify-between"],[1,"text-right"],[1,"text-xs","text-slate-400","mb-0.5"],["target","_blank","rel","noopener noreferrer",1,"group","flex","items-center","justify-between","p-3","bg-gradient-to-r","from-slate-50","to-slate-100","dark:from-slate-900","dark:to-slate-800","rounded-lg","border","border-slate-200","dark:border-slate-700","hover:border-emerald-300","hover:from-emerald-50","hover:to-emerald-100","dark:hover:from-emerald-900/20","dark:hover:to-emerald-800/20","transition-all","cursor-pointer","text-decoration-none","shadow-sm",3,"href"],[1,"flex","items-center","gap-2","flex-1","min-w-0"],[1,"w-8","h-8","rounded-lg","bg-white","dark:bg-slate-700","flex","items-center","justify-center","border","border-slate-200","dark:border-slate-600"],[1,"text-slate-400","group-hover:text-emerald-600","dark:group-hover:text-emerald-400","!w-4","!h-4","!text-[16px]"],[1,"font-mono","text-xs","text-slate-700","dark:text-slate-300","truncate"],[1,"flex","items-center","gap-1.5","text-emerald-600","dark:text-emerald-400","group-hover:text-emerald-700","dark:group-hover:text-emerald-300","transition-colors","ml-2"],[1,"text-[10px]","font-bold","uppercase"],[1,"!w-4","!h-4","!text-[14px]"],[1,"w-8","h-8","rounded-full","flex-shrink-0","flex","items-center","justify-center","text-xs","font-bold"],[1,"!w-4","!h-4","!text-[16px]","flex","items-center","justify-center"],[1,"max-w-[85%]"],[1,"message-bubble","p-4","rounded-2xl","shadow-sm","border"],[1,"markdown-body","text-sm","leading-relaxed","whitespace-pre-wrap","font-sans",3,"innerHTML"],[1,"flex","flex-wrap","gap-2","mt-3"],[1,"mt-4","p-4","bg-slate-50","dark:bg-slate-900/50","rounded-xl","border","border-slate-200","dark:border-slate-700"],[1,"max-w-[200px]","h-auto","rounded-lg","border","border-slate-200","dark:border-slate-700","cursor-pointer","hover:opacity-90","transition-opacity",3,"src"],[1,"max-w-[200px]","h-auto","rounded-lg","border","border-slate-200","dark:border-slate-700","cursor-pointer","hover:opacity-90","transition-opacity",3,"click","src"],[1,"flex","items-center","gap-2","mb-2","text-slate-900","dark:text-white","font-semibold"],[1,"text-amber-500"],[1,"text-xl","font-bold","mb-2","text-slate-800","dark:text-slate-100"],[1,"text-xs","text-slate-500","mb-3","break-all","font-mono"],["mat-flat-button","","color","primary",1,"w-full",3,"click"],[1,"mt-3","p-3","bg-slate-100","dark:bg-slate-950","rounded-lg","text-xs","font-mono","overflow-x-auto","border","border-slate-200","dark:border-slate-800"],[1,"whitespace-pre-wrap"],[1,"mt-3","p-3","bg-green-50","dark:bg-green-900/20","border","border-green-200","dark:border-green-800","rounded-lg","flex","items-center","justify-between"],[1,"mt-3","text-xs","text-slate-400","hover:text-yellow-500","flex","items-center","gap-1","transition-colors"],[1,"w-6","h-6","rounded-full","bg-green-100","text-green-600","flex","items-center","justify-center"],[1,"text-xs","text-green-800","dark:text-green-300","font-medium"],["target","_blank","rel","noopener noreferrer",1,"text-xs","text-green-600","hover:underline","flex","items-center","gap-1",3,"href"],[1,"mt-3","text-xs","text-slate-400","hover:text-yellow-500","flex","items-center","gap-1","transition-colors",3,"click"],[1,"w-8","h-8","rounded-full","bg-slate-900","text-white","flex-shrink-0","flex","items-center","justify-center","text-xs","font-bold"],[1,"message-bubble","p-4","rounded-2xl","rounded-tl-sm","bg-white","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","shadow-sm"],[1,"flex","items-center","gap-1.5"],[1,"w-1.5","h-1.5","bg-slate-400","rounded-full","animate-bounce"],[1,"w-1.5","h-1.5","bg-slate-400","rounded-full","animate-bounce","delay-150"],[1,"w-1.5","h-1.5","bg-slate-400","rounded-full","animate-bounce","delay-300"],[1,"mt-2","text-xs","text-slate-400","border-t","border-slate-100","dark:border-slate-700","pt-2","animate-fadeIn"],[1,"flex","gap-3","overflow-x-auto","pb-2"],[1,"relative","group","w-20","h-20","shrink-0","cursor-zoom-in"],[1,"relative","group","w-20","h-20","shrink-0","cursor-zoom-in",3,"click"],[1,"w-full","h-full","object-cover","rounded-xl","border","border-slate-200","dark:border-slate-700","shadow-sm",3,"src"],[1,"absolute","top-1","right-1","w-6","h-6","bg-black/50","hover:bg-red-500","text-white","rounded-full","flex","items-center","justify-center","backdrop-blur-sm","transition-colors","shadow-sm",3,"click"],[1,"!w-4","!h-4","!text-[14px]","flex","items-center","justify-center"],[1,"fixed","inset-0","z-[70]","flex","items-center","justify-center","bg-black/90","backdrop-blur-md","p-4","animate-fadeIn",3,"click"],[1,"absolute","top-4","right-4","text-white/70","hover:text-white","transition-colors",3,"click"],[1,"!w-8","!h-8","!text-[32px]"],[1,"max-w-full","max-h-[90vh]","rounded-lg","shadow-2xl","animate-scaleIn","object-contain",3,"click","src"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-slate-900/50","backdrop-blur-sm","p-4","animate-fadeIn",3,"click"],[1,"bg-white","dark:bg-slate-900","w-full","max-w-lg","rounded-2xl","shadow-xl","max-h-[90vh]","overflow-y-auto",3,"click"],[1,"p-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","dark:text-white"],[1,"text-slate-400","hover:text-slate-600",3,"click"],[1,"space-y-4"],[1,"flex","justify-center","p-8"],[3,"agentInfo"],["mode","indeterminate","diameter","30"],[1,"w-full","max-w-sm","mx-auto","p-6","bg-white","dark:bg-slate-900","rounded-2xl","shadow-2xl","relative","animate-slideUp",3,"click"],[1,"absolute","right-4","top-4","text-slate-400","hover:text-slate-600",3,"click"],[1,"text-xl","font-bold","mb-4","dark:text-white"],[1,"flex","justify-center","mb-4"],[1,"mb-4"],[1,"text-xs","text-slate-500","uppercase"],[1,"p-3","bg-slate-50","dark:bg-slate-800","rounded-lg","flex","gap-2","items-center"],[1,"text-xs","flex-1","break-all","dark:text-slate-300"],[3,"click"],[1,"text-slate-400","hover:text-blue-500","!w-4","!h-4","text-[16px]"],[1,"mb-6"],[1,"text-3xl","font-bold","dark:text-white"],[1,"text-sm","font-normal","text-slate-400"],[1,"text-3xl","font-bold","dark:text-white","mt-2"],["mat-stroked-button","",1,"w-full","mb-2",3,"click"],["mat-stroked-button","","color","warn",1,"w-full",3,"click"],[1,"w-32","h-32","rounded-lg","border",3,"src"],[1,"!w-4","!h-4","text-[16px]"]],template:function(r,n){if(r&1){let o=N();c(0,"div",2)(1,"aside",3)(2,"div",4)(3,"div",5)(4,"mat-icon",6),p(5,"history"),d(),c(6,"span"),p(7),x(8,"transloco"),d()(),c(9,"button",7),x(10,"transloco"),w("click",function(){return C(o),v(n.startNewChat())}),c(11,"mat-icon"),p(12,"add_circle_outline"),d()()(),c(13,"div",8),I(14,Ya,3,3,"div",9),re(15,ns,3,15,"div",10,Ja),d()(),c(17,"main",11)(18,"div",12)(19,"div",13)(20,"button",14),w("click",function(){return C(o),v(n.toggleSidebar())}),c(21,"mat-icon"),p(22),d()(),c(23,"div",15),w("click",function(){return C(o),v(n.toggleAgentInfoModal())}),c(24,"div",16),p(25," AI "),I(26,is,1,0,"div",17),d(),c(27,"div")(28,"div",18),p(29),d(),c(30,"div",19),p(31),x(32,"transloco"),d()()()(),c(33,"div",13)(34,"div",20)(35,"button",21),w("click",function(){return C(o),v(n.setChatMode("credits"))}),p(36),x(37,"transloco"),d(),c(38,"button",21),w("click",function(){return C(o),v(n.setChatMode("x402"))}),p(39," x402 "),d()(),I(40,os,9,5,"div",22),d()(),c(41,"div",23,0)(43,"div",24),re(44,Ts,4,1,null,null,ct),I(46,Es,9,1,"div",25),d()(),c(47,"div",26),I(48,Ps,4,0,"div",27),c(49,"div",28)(50,"input",29,1),w("change",function(l){return C(o),v(n.onFileSelected(l))}),d(),c(52,"button",30),w("click",function(){C(o);let l=jn(51);return v(l.click())}),c(53,"mat-icon"),p(54,"attach_file"),d()(),c(55,"input",31),x(56,"transloco"),Se("ngModelChange",function(l){return C(o),Ie(n.userInput,l)||(n.userInput=l),v(l)}),w("keyup.enter",function(){return C(o),v(n.sendMessage())})("paste",function(l){return C(o),v(n.onPaste(l))}),d(),c(57,"button",32),w("click",function(){return C(o),v(n.sendMessage())}),I(58,Bs,1,0,"mat-progress-spinner",33)(59,Rs,2,0,"mat-icon",34),d()(),c(60,"div",35),p(61," Verifik Agent can make mistakes. Verify important information. "),d()()(),I(62,Vs,5,1,"div",36)(63,Os,13,4,"div",37)(64,Ls,35,22,"div",37)(65,Ns,4,1,"div",38),d()}if(r&2){let o,a;u(),j("-ml-[280px]",!n.isSidebarOpen()),u(6),F(_(8,45,"chat.sidebar.title")),u(2),E("matTooltip",_(10,47,"chat.sidebar.newChat")),u(5),y(n.conversations().length===0?14:-1),u(),oe(n.conversations()),u(7),F(n.isSidebarOpen()?"menu_open":"menu"),u(4),y((o=n.agentInfo())!=null&&o.identity?26:-1),u(3),b(" ",((a=n.agentInfo())==null||a.identity==null?null:a.identity.name)||"Verifik Agent"," "),u(2),b(" ",_(32,49,"chat.header.subtitle")," "),u(4),j("bg-white",n.chatMode()==="credits")("text-slate-900",n.chatMode()==="credits")("shadow-sm",n.chatMode()==="credits")("dark:bg-slate-700",n.chatMode()==="credits")("dark:text-white",n.chatMode()==="credits")("text-slate-500",n.chatMode()!=="credits"),u(),b(" ",_(37,51,"chat.mode.credits")," "),u(2),j("bg-white",n.chatMode()==="x402")("text-slate-900",n.chatMode()==="x402")("shadow-sm",n.chatMode()==="x402")("dark:bg-slate-700",n.chatMode()==="x402")("dark:text-white",n.chatMode()==="x402")("text-slate-500",n.chatMode()!=="x402"),u(2),y(n.chatMode()==="x402"&&n.walletAddress()?40:-1),u(4),oe(n.messages()),u(2),y(n.isLoading()?46:-1),u(2),y(n.pendingAttachments().length>0?48:-1),u(7),ye("ngModel",n.userInput),E("placeholder",_(56,53,"chat.inputPlaceholder")),u(2),E("disabled",n.isLoading()||!n.userInput().trim()&&n.pendingAttachments().length===0),u(),y(n.isLoading()?58:59),u(4),y(n.previewImage()?62:-1),u(),y(n.showAgentInfoModal()?63:-1),u(),y(n.showWalletModal()?64:-1),u(),y(n.showToast()?65:-1)}},dependencies:[ae,Xn,dt,Kn,qe,ut,Le,Ne,le,se,be,$e,si,pi,ui,ci,li,de,ce,ge,Br,Vr],styles:[".message[_ngcontent-%COMP%]{display:flex;animation:_ngcontent-%COMP%_fadeIn .3s ease-out;width:100%}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_slideUpFade{0%{opacity:0;transform:translate(-50%,20px)}to{opacity:1;transform:translate(-50%)}}.markdown-body[_ngcontent-%COMP%]{font-family:Inter,system-ui,sans-serif;line-height:1.6}.markdown-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.75rem}.markdown-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.markdown-body[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#0000001a;padding:.2em .4em;border-radius:4px;font-family:monospace;font-size:.85em}.markdown-body[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#1e293b;color:#e2e8f0;padding:1rem;border-radius:8px;overflow-x:auto;margin:1rem 0}.markdown-body[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:none;padding:0;color:inherit}.markdown-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .markdown-body[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin-left:1.5rem;margin-bottom:1rem;list-style-type:disc}.markdown-body[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700;color:inherit}.markdown-body[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .markdown-body[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .markdown-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .markdown-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;margin-top:1.5rem;margin-bottom:.5rem;line-height:1.3}.markdown-body[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.markdown-body[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}.markdown-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#94a3b880;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8cc}.dark[_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .dark   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#47556980}.animate-fadeIn[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.animate-slideUp[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1) forwards}.animate-slideUpFade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUpFade .3s cubic-bezier(.16,1,.3,1) forwards}.animate-bounce[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 1s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.delay-150[_ngcontent-%COMP%]{animation-delay:.15s}.delay-300[_ngcontent-%COMP%]{animation-delay:.3s}"]})}}return i})();var Jc=[{path:"",component:Ur}];export{Jc as default};
