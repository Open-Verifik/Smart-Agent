import{e as Ke,f as Ge,g as fn,i as be,j as vn}from"./chunk-SVY6UJF5.js";import{e as Cn,f as yn}from"./chunk-ALVF2LK7.js";import{j as bn,k as kn,m as _n,n as wn,p as nt}from"./chunk-MIZ5IKQM.js";import"./chunk-E62Z5BTR.js";import{Bb as sn,Bc as gn,Cb as ln,Cc as Je,Db as cn,Eb as dn,Fa as on,Fb as u,Ga as X,Gb as K,Hb as S,Ka as m,Kb as Ae,Lb as Pe,Mb as Re,Oa as D,Ob as un,Ta as fe,Vb as O,Wa as an,Wb as H,Xb as ae,Ya as A,Yd as xn,Zd as ke,_d as _e,ae as we,be as Ce,db as z,de as Ye,fb as U,he as Xe,ja as k,jb as y,ka as _,kb as Qe,lb as wt,le as et,mb as ee,nb as te,nc as hn,ob as c,oc as pn,pb as d,pc as Ze,qb as q,qc as xe,se as tt,ub as L,wb as b,xb as f,xc as mn,ya as C}from"./chunk-T5KIPI4D.js";import{a as $,b as Z,d as E,f as Ki,g as F}from"./chunk-GAL4ENT6.js";var Tn=E((Sa,Sn)=>{Sn.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var ne=E(se=>{var Ct,Gi=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];se.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};se.getSymbolTotalCodewords=function(t){return Gi[t]};se.getBCHDigit=function(r){let t=0;for(;r!==0;)t++,r>>>=1;return t};se.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Ct=t};se.isKanjiModeEnabled=function(){return typeof Ct<"u"};se.toSJIS=function(t){return Ct(t)}});var it=E(j=>{j.L={bit:1};j.M={bit:0};j.Q={bit:3};j.H={bit:2};function Yi(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return j.L;case"m":case"medium":return j.M;case"q":case"quartile":return j.Q;case"h":case"high":return j.H;default:throw new Error("Unknown EC Level: "+r)}}j.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4};j.from=function(t,e){if(j.isValid(t))return t;try{return Yi(t)}catch{return e}}});var En=E((Ma,Mn)=>{function In(){this.buffer=[],this.length=0}In.prototype={get:function(r){let t=Math.floor(r/8);return(this.buffer[t]>>>7-r%8&1)===1},put:function(r,t){for(let e=0;e<t;e++)this.putBit((r>>>t-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),r&&(this.buffer[t]|=128>>>this.length%8),this.length++}};Mn.exports=In});var Pn=E((Ea,An)=>{function Be(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}Be.prototype.set=function(r,t,e,i){let n=r*this.size+t;this.data[n]=e,i&&(this.reservedBit[n]=!0)};Be.prototype.get=function(r,t){return this.data[r*this.size+t]};Be.prototype.xor=function(r,t,e){this.data[r*this.size+t]^=e};Be.prototype.isReserved=function(r,t){return this.reservedBit[r*this.size+t]};An.exports=Be});var Rn=E(rt=>{var Xi=ne().getSymbolSize;rt.getRowColCoords=function(t){if(t===1)return[];let e=Math.floor(t/7)+2,i=Xi(t),n=i===145?26:Math.ceil((i-13)/(2*e-2))*2,o=[i-7];for(let a=1;a<e-1;a++)o[a]=o[a-1]-n;return o.push(6),o.reverse()};rt.getPositions=function(t){let e=[],i=rt.getRowColCoords(t),n=i.length;for(let o=0;o<n;o++)for(let a=0;a<n;a++)o===0&&a===0||o===0&&a===n-1||o===n-1&&a===0||e.push([i[o],i[a]]);return e}});var Fn=E($n=>{var er=ne().getSymbolSize,Bn=7;$n.getPositions=function(t){let e=er(t);return[[0,0],[e-Bn,0],[0,e-Bn]]}});var zn=E(P=>{P.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var le={N1:3,N2:3,N3:40,N4:10};P.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7};P.from=function(t){return P.isValid(t)?parseInt(t,10):void 0};P.getPenaltyN1=function(t){let e=t.size,i=0,n=0,o=0,a=null,l=null;for(let s=0;s<e;s++){n=o=0,a=l=null;for(let p=0;p<e;p++){let h=t.get(s,p);h===a?n++:(n>=5&&(i+=le.N1+(n-5)),a=h,n=1),h=t.get(p,s),h===l?o++:(o>=5&&(i+=le.N1+(o-5)),l=h,o=1)}n>=5&&(i+=le.N1+(n-5)),o>=5&&(i+=le.N1+(o-5))}return i};P.getPenaltyN2=function(t){let e=t.size,i=0;for(let n=0;n<e-1;n++)for(let o=0;o<e-1;o++){let a=t.get(n,o)+t.get(n,o+1)+t.get(n+1,o)+t.get(n+1,o+1);(a===4||a===0)&&i++}return i*le.N2};P.getPenaltyN3=function(t){let e=t.size,i=0,n=0,o=0;for(let a=0;a<e;a++){n=o=0;for(let l=0;l<e;l++)n=n<<1&2047|t.get(a,l),l>=10&&(n===1488||n===93)&&i++,o=o<<1&2047|t.get(l,a),l>=10&&(o===1488||o===93)&&i++}return i*le.N3};P.getPenaltyN4=function(t){let e=0,i=t.data.length;for(let o=0;o<i;o++)e+=t.data[o];return Math.abs(Math.ceil(e*100/i/5)-10)*le.N4};function tr(r,t,e){switch(r){case P.Patterns.PATTERN000:return(t+e)%2===0;case P.Patterns.PATTERN001:return t%2===0;case P.Patterns.PATTERN010:return e%3===0;case P.Patterns.PATTERN011:return(t+e)%3===0;case P.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(e/3))%2===0;case P.Patterns.PATTERN101:return t*e%2+t*e%3===0;case P.Patterns.PATTERN110:return(t*e%2+t*e%3)%2===0;case P.Patterns.PATTERN111:return(t*e%3+(t+e)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}P.applyMask=function(t,e){let i=e.size;for(let n=0;n<i;n++)for(let o=0;o<i;o++)e.isReserved(o,n)||e.xor(o,n,tr(t,o,n))};P.getBestMask=function(t,e){let i=Object.keys(P.Patterns).length,n=0,o=1/0;for(let a=0;a<i;a++){e(a),P.applyMask(a,t);let l=P.getPenaltyN1(t)+P.getPenaltyN2(t)+P.getPenaltyN3(t)+P.getPenaltyN4(t);P.applyMask(a,t),l<o&&(o=l,n=a)}return n}});var vt=E(yt=>{var ie=it(),ot=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],at=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];yt.getBlocksCount=function(t,e){switch(e){case ie.L:return ot[(t-1)*4+0];case ie.M:return ot[(t-1)*4+1];case ie.Q:return ot[(t-1)*4+2];case ie.H:return ot[(t-1)*4+3];default:return}};yt.getTotalCodewordsCount=function(t,e){switch(e){case ie.L:return at[(t-1)*4+0];case ie.M:return at[(t-1)*4+1];case ie.Q:return at[(t-1)*4+2];case ie.H:return at[(t-1)*4+3];default:return}}});var On=E(lt=>{var $e=new Uint8Array(512),st=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)$e[e]=t,st[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)$e[e]=$e[e-255]})();lt.log=function(t){if(t<1)throw new Error("log("+t+")");return st[t]};lt.exp=function(t){return $e[t]};lt.mul=function(t,e){return t===0||e===0?0:$e[st[t]+st[e]]}});var Ln=E(Fe=>{var St=On();Fe.mul=function(t,e){let i=new Uint8Array(t.length+e.length-1);for(let n=0;n<t.length;n++)for(let o=0;o<e.length;o++)i[n+o]^=St.mul(t[n],e[o]);return i};Fe.mod=function(t,e){let i=new Uint8Array(t);for(;i.length-e.length>=0;){let n=i[0];for(let a=0;a<e.length;a++)i[a]^=St.mul(e[a],n);let o=0;for(;o<i.length&&i[o]===0;)o++;i=i.slice(o)}return i};Fe.generateECPolynomial=function(t){let e=new Uint8Array([1]);for(let i=0;i<t;i++)e=Fe.mul(e,new Uint8Array([1,St.exp(i)]));return e}});var Dn=E((za,Nn)=>{var Vn=Ln();function Tt(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}Tt.prototype.initialize=function(t){this.degree=t,this.genPoly=Vn.generateECPolynomial(this.degree)};Tt.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");let e=new Uint8Array(t.length+this.degree);e.set(t);let i=Vn.mod(e,this.genPoly),n=this.degree-i.length;if(n>0){let o=new Uint8Array(this.degree);return o.set(i,n),o}return i};Nn.exports=Tt});var It=E(Un=>{Un.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}});var Mt=E(G=>{var qn="[0-9]+",nr="[A-Z $%*+\\-./:]+",ze="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ze=ze.replace(/u/g,"\\u");var ir="(?:(?![A-Z0-9 $%*+\\-./:]|"+ze+`)(?:.|[\r
]))+`;G.KANJI=new RegExp(ze,"g");G.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");G.BYTE=new RegExp(ir,"g");G.NUMERIC=new RegExp(qn,"g");G.ALPHANUMERIC=new RegExp(nr,"g");var rr=new RegExp("^"+ze+"$"),or=new RegExp("^"+qn+"$"),ar=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");G.testKanji=function(t){return rr.test(t)};G.testNumeric=function(t){return or.test(t)};G.testAlphanumeric=function(t){return ar.test(t)}});var re=E(B=>{var sr=It(),Et=Mt();B.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};B.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};B.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};B.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};B.MIXED={bit:-1};B.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!sr.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]};B.getBestModeForData=function(t){return Et.testNumeric(t)?B.NUMERIC:Et.testAlphanumeric(t)?B.ALPHANUMERIC:Et.testKanji(t)?B.KANJI:B.BYTE};B.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")};B.isValid=function(t){return t&&t.bit&&t.ccBits};function lr(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return B.NUMERIC;case"alphanumeric":return B.ALPHANUMERIC;case"kanji":return B.KANJI;case"byte":return B.BYTE;default:throw new Error("Unknown mode: "+r)}}B.from=function(t,e){if(B.isValid(t))return t;try{return lr(t)}catch{return e}}});var Zn=E(ce=>{var ct=ne(),cr=vt(),jn=it(),oe=re(),At=It(),Wn=7973,Hn=ct.getBCHDigit(Wn);function dr(r,t,e){for(let i=1;i<=40;i++)if(t<=ce.getCapacity(i,e,r))return i}function Qn(r,t){return oe.getCharCountIndicator(r,t)+4}function ur(r,t){let e=0;return r.forEach(function(i){let n=Qn(i.mode,t);e+=n+i.getBitsLength()}),e}function hr(r,t){for(let e=1;e<=40;e++)if(ur(r,e)<=ce.getCapacity(e,t,oe.MIXED))return e}ce.from=function(t,e){return At.isValid(t)?parseInt(t,10):e};ce.getCapacity=function(t,e,i){if(!At.isValid(t))throw new Error("Invalid QR Code version");typeof i>"u"&&(i=oe.BYTE);let n=ct.getSymbolTotalCodewords(t),o=cr.getTotalCodewordsCount(t,e),a=(n-o)*8;if(i===oe.MIXED)return a;let l=a-Qn(i,t);switch(i){case oe.NUMERIC:return Math.floor(l/10*3);case oe.ALPHANUMERIC:return Math.floor(l/11*2);case oe.KANJI:return Math.floor(l/13);case oe.BYTE:default:return Math.floor(l/8)}};ce.getBestVersionForData=function(t,e){let i,n=jn.from(e,jn.M);if(Array.isArray(t)){if(t.length>1)return hr(t,n);if(t.length===0)return 1;i=t[0]}else i=t;return dr(i.mode,i.getLength(),n)};ce.getEncodedBits=function(t){if(!At.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;for(;ct.getBCHDigit(e)-Hn>=0;)e^=Wn<<ct.getBCHDigit(e)-Hn;return t<<12|e}});var Yn=E(Gn=>{var Pt=ne(),Kn=1335,pr=21522,Jn=Pt.getBCHDigit(Kn);Gn.getEncodedBits=function(t,e){let i=t.bit<<3|e,n=i<<10;for(;Pt.getBCHDigit(n)-Jn>=0;)n^=Kn<<Pt.getBCHDigit(n)-Jn;return(i<<10|n)^pr}});var ei=E((Ua,Xn)=>{var mr=re();function ye(r){this.mode=mr.NUMERIC,this.data=r.toString()}ye.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};ye.prototype.getLength=function(){return this.data.length};ye.prototype.getBitsLength=function(){return ye.getBitsLength(this.data.length)};ye.prototype.write=function(t){let e,i,n;for(e=0;e+3<=this.data.length;e+=3)i=this.data.substr(e,3),n=parseInt(i,10),t.put(n,10);let o=this.data.length-e;o>0&&(i=this.data.substr(e),n=parseInt(i,10),t.put(n,o*3+1))};Xn.exports=ye});var ni=E((qa,ti)=>{var gr=re(),Rt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ve(r){this.mode=gr.ALPHANUMERIC,this.data=r}ve.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};ve.prototype.getLength=function(){return this.data.length};ve.prototype.getBitsLength=function(){return ve.getBitsLength(this.data.length)};ve.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let i=Rt.indexOf(this.data[e])*45;i+=Rt.indexOf(this.data[e+1]),t.put(i,11)}this.data.length%2&&t.put(Rt.indexOf(this.data[e]),6)};ti.exports=ve});var ri=E((ja,ii)=>{var fr=re();function Se(r){this.mode=fr.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}Se.getBitsLength=function(t){return t*8};Se.prototype.getLength=function(){return this.data.length};Se.prototype.getBitsLength=function(){return Se.getBitsLength(this.data.length)};Se.prototype.write=function(r){for(let t=0,e=this.data.length;t<e;t++)r.put(this.data[t],8)};ii.exports=Se});var ai=E((Ha,oi)=>{var xr=re(),br=ne();function Te(r){this.mode=xr.KANJI,this.data=r}Te.getBitsLength=function(t){return t*13};Te.prototype.getLength=function(){return this.data.length};Te.prototype.getBitsLength=function(){return Te.getBitsLength(this.data.length)};Te.prototype.write=function(r){let t;for(t=0;t<this.data.length;t++){let e=br.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),r.put(e,13)}};oi.exports=Te});var si=E((Wa,Bt)=>{"use strict";var Oe={single_source_shortest_paths:function(r,t,e){var i={},n={};n[t]=0;var o=Oe.PriorityQueue.make();o.push(t,0);for(var a,l,s,p,h,x,g,w,T;!o.empty();){a=o.pop(),l=a.value,p=a.cost,h=r[l]||{};for(s in h)h.hasOwnProperty(s)&&(x=h[s],g=p+x,w=n[s],T=typeof n[s]>"u",(T||w>g)&&(n[s]=g,o.push(s,g),i[s]=l))}if(typeof e<"u"&&typeof n[e]>"u"){var R=["Could not find a path from ",t," to ",e,"."].join("");throw new Error(R)}return i},extract_shortest_path_from_predecessor_list:function(r,t){for(var e=[],i=t,n;i;)e.push(i),n=r[i],i=r[i];return e.reverse(),e},find_path:function(r,t,e){var i=Oe.single_source_shortest_paths(r,t,e);return Oe.extract_shortest_path_from_predecessor_list(i,e)},PriorityQueue:{make:function(r){var t=Oe.PriorityQueue,e={},i;r=r||{};for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e.queue=[],e.sorter=r.sorter||t.default_sorter,e},default_sorter:function(r,t){return r.cost-t.cost},push:function(r,t){var e={value:r,cost:t};this.queue.push(e),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof Bt<"u"&&(Bt.exports=Oe)});var gi=E(Ie=>{var I=re(),di=ei(),ui=ni(),hi=ri(),pi=ai(),Le=Mt(),dt=ne(),kr=si();function li(r){return unescape(encodeURIComponent(r)).length}function Ve(r,t,e){let i=[],n;for(;(n=r.exec(e))!==null;)i.push({data:n[0],index:n.index,mode:t,length:n[0].length});return i}function mi(r){let t=Ve(Le.NUMERIC,I.NUMERIC,r),e=Ve(Le.ALPHANUMERIC,I.ALPHANUMERIC,r),i,n;return dt.isKanjiModeEnabled()?(i=Ve(Le.BYTE,I.BYTE,r),n=Ve(Le.KANJI,I.KANJI,r)):(i=Ve(Le.BYTE_KANJI,I.BYTE,r),n=[]),t.concat(e,i,n).sort(function(a,l){return a.index-l.index}).map(function(a){return{data:a.data,mode:a.mode,length:a.length}})}function $t(r,t){switch(t){case I.NUMERIC:return di.getBitsLength(r);case I.ALPHANUMERIC:return ui.getBitsLength(r);case I.KANJI:return pi.getBitsLength(r);case I.BYTE:return hi.getBitsLength(r)}}function _r(r){return r.reduce(function(t,e){let i=t.length-1>=0?t[t.length-1]:null;return i&&i.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)},[])}function wr(r){let t=[];for(let e=0;e<r.length;e++){let i=r[e];switch(i.mode){case I.NUMERIC:t.push([i,{data:i.data,mode:I.ALPHANUMERIC,length:i.length},{data:i.data,mode:I.BYTE,length:i.length}]);break;case I.ALPHANUMERIC:t.push([i,{data:i.data,mode:I.BYTE,length:i.length}]);break;case I.KANJI:t.push([i,{data:i.data,mode:I.BYTE,length:li(i.data)}]);break;case I.BYTE:t.push([{data:i.data,mode:I.BYTE,length:li(i.data)}])}}return t}function Cr(r,t){let e={},i={start:{}},n=["start"];for(let o=0;o<r.length;o++){let a=r[o],l=[];for(let s=0;s<a.length;s++){let p=a[s],h=""+o+s;l.push(h),e[h]={node:p,lastCount:0},i[h]={};for(let x=0;x<n.length;x++){let g=n[x];e[g]&&e[g].node.mode===p.mode?(i[g][h]=$t(e[g].lastCount+p.length,p.mode)-$t(e[g].lastCount,p.mode),e[g].lastCount+=p.length):(e[g]&&(e[g].lastCount=p.length),i[g][h]=$t(p.length,p.mode)+4+I.getCharCountIndicator(p.mode,t))}}n=l}for(let o=0;o<n.length;o++)i[n[o]].end=0;return{map:i,table:e}}function ci(r,t){let e,i=I.getBestModeForData(r);if(e=I.from(t,i),e!==I.BYTE&&e.bit<i.bit)throw new Error('"'+r+'" cannot be encoded with mode '+I.toString(e)+`.
 Suggested mode is: `+I.toString(i));switch(e===I.KANJI&&!dt.isKanjiModeEnabled()&&(e=I.BYTE),e){case I.NUMERIC:return new di(r);case I.ALPHANUMERIC:return new ui(r);case I.KANJI:return new pi(r);case I.BYTE:return new hi(r)}}Ie.fromArray=function(t){return t.reduce(function(e,i){return typeof i=="string"?e.push(ci(i,null)):i.data&&e.push(ci(i.data,i.mode)),e},[])};Ie.fromString=function(t,e){let i=mi(t,dt.isKanjiModeEnabled()),n=wr(i),o=Cr(n,e),a=kr.find_path(o.map,"start","end"),l=[];for(let s=1;s<a.length-1;s++)l.push(o.table[a[s]].node);return Ie.fromArray(_r(l))};Ie.rawSplit=function(t){return Ie.fromArray(mi(t,dt.isKanjiModeEnabled()))}});var xi=E(fi=>{var ht=ne(),Ft=it(),yr=En(),vr=Pn(),Sr=Rn(),Tr=Fn(),Lt=zn(),Vt=vt(),Ir=Dn(),ut=Zn(),Mr=Yn(),Er=re(),zt=gi();function Ar(r,t){let e=r.size,i=Tr.getPositions(t);for(let n=0;n<i.length;n++){let o=i[n][0],a=i[n][1];for(let l=-1;l<=7;l++)if(!(o+l<=-1||e<=o+l))for(let s=-1;s<=7;s++)a+s<=-1||e<=a+s||(l>=0&&l<=6&&(s===0||s===6)||s>=0&&s<=6&&(l===0||l===6)||l>=2&&l<=4&&s>=2&&s<=4?r.set(o+l,a+s,!0,!0):r.set(o+l,a+s,!1,!0))}}function Pr(r){let t=r.size;for(let e=8;e<t-8;e++){let i=e%2===0;r.set(e,6,i,!0),r.set(6,e,i,!0)}}function Rr(r,t){let e=Sr.getPositions(t);for(let i=0;i<e.length;i++){let n=e[i][0],o=e[i][1];for(let a=-2;a<=2;a++)for(let l=-2;l<=2;l++)a===-2||a===2||l===-2||l===2||a===0&&l===0?r.set(n+a,o+l,!0,!0):r.set(n+a,o+l,!1,!0)}}function Br(r,t){let e=r.size,i=ut.getEncodedBits(t),n,o,a;for(let l=0;l<18;l++)n=Math.floor(l/3),o=l%3+e-8-3,a=(i>>l&1)===1,r.set(n,o,a,!0),r.set(o,n,a,!0)}function Ot(r,t,e){let i=r.size,n=Mr.getEncodedBits(t,e),o,a;for(o=0;o<15;o++)a=(n>>o&1)===1,o<6?r.set(o,8,a,!0):o<8?r.set(o+1,8,a,!0):r.set(i-15+o,8,a,!0),o<8?r.set(8,i-o-1,a,!0):o<9?r.set(8,15-o-1+1,a,!0):r.set(8,15-o-1,a,!0);r.set(i-8,8,1,!0)}function $r(r,t){let e=r.size,i=-1,n=e-1,o=7,a=0;for(let l=e-1;l>0;l-=2)for(l===6&&l--;;){for(let s=0;s<2;s++)if(!r.isReserved(n,l-s)){let p=!1;a<t.length&&(p=(t[a]>>>o&1)===1),r.set(n,l-s,p),o--,o===-1&&(a++,o=7)}if(n+=i,n<0||e<=n){n-=i,i=-i;break}}}function Fr(r,t,e){let i=new yr;e.forEach(function(s){i.put(s.mode.bit,4),i.put(s.getLength(),Er.getCharCountIndicator(s.mode,r)),s.write(i)});let n=ht.getSymbolTotalCodewords(r),o=Vt.getTotalCodewordsCount(r,t),a=(n-o)*8;for(i.getLengthInBits()+4<=a&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);let l=(a-i.getLengthInBits())/8;for(let s=0;s<l;s++)i.put(s%2?17:236,8);return zr(i,r,t)}function zr(r,t,e){let i=ht.getSymbolTotalCodewords(t),n=Vt.getTotalCodewordsCount(t,e),o=i-n,a=Vt.getBlocksCount(t,e),l=i%a,s=a-l,p=Math.floor(i/a),h=Math.floor(o/a),x=h+1,g=p-h,w=new Ir(g),T=0,R=new Array(a),Me=new Array(a),pe=0,We=new Uint8Array(r.buffer);for(let ge=0;ge<a;ge++){let _t=ge<s?h:x;R[ge]=We.slice(T,T+_t),Me[ge]=w.encode(R[ge]),T+=_t,pe=Math.max(pe,_t)}let Ee=new Uint8Array(i),me=0,V,J;for(V=0;V<pe;V++)for(J=0;J<a;J++)V<R[J].length&&(Ee[me++]=R[J][V]);for(V=0;V<g;V++)for(J=0;J<a;J++)Ee[me++]=Me[J][V];return Ee}function Or(r,t,e,i){let n;if(Array.isArray(r))n=zt.fromArray(r);else if(typeof r=="string"){let p=t;if(!p){let h=zt.rawSplit(r);p=ut.getBestVersionForData(h,e)}n=zt.fromString(r,p||40)}else throw new Error("Invalid data");let o=ut.getBestVersionForData(n,e);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=o;else if(t<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let a=Fr(t,e,n),l=ht.getSymbolSize(t),s=new vr(l);return Ar(s,t),Pr(s),Rr(s,t),Ot(s,e,0),t>=7&&Br(s,t),$r(s,a),isNaN(i)&&(i=Lt.getBestMask(s,Ot.bind(null,s,e))),Lt.applyMask(i,s),Ot(s,e,i),{modules:s,version:t,errorCorrectionLevel:e,maskPattern:i,segments:n}}fi.create=function(t,e){if(typeof t>"u"||t==="")throw new Error("No input text");let i=Ft.M,n,o;return typeof e<"u"&&(i=Ft.from(e.errorCorrectionLevel,Ft.M),n=ut.from(e.version),o=Lt.from(e.maskPattern),e.toSJISFunc&&ht.setToSJISFunction(e.toSJISFunc)),Or(t,n,i,o)}});var Nt=E(de=>{function bi(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let t=r.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+r);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(i){return[i,i]}))),t.length===6&&t.push("F","F");let e=parseInt(t.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:e&255,hex:"#"+t.slice(0,6).join("")}}de.getOptions=function(t){t||(t={}),t.color||(t.color={});let e=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,i=t.width&&t.width>=21?t.width:void 0,n=t.scale||4;return{width:i,scale:i?4:n,margin:e,color:{dark:bi(t.color.dark||"#000000ff"),light:bi(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}};de.getScale=function(t,e){return e.width&&e.width>=t+e.margin*2?e.width/(t+e.margin*2):e.scale};de.getImageWidth=function(t,e){let i=de.getScale(t,e);return Math.floor((t+e.margin*2)*i)};de.qrToImageData=function(t,e,i){let n=e.modules.size,o=e.modules.data,a=de.getScale(n,i),l=Math.floor((n+i.margin*2)*a),s=i.margin*a,p=[i.color.light,i.color.dark];for(let h=0;h<l;h++)for(let x=0;x<l;x++){let g=(h*l+x)*4,w=i.color.light;if(h>=s&&x>=s&&h<l-s&&x<l-s){let T=Math.floor((h-s)/a),R=Math.floor((x-s)/a);w=p[o[T*n+R]?1:0]}t[g++]=w.r,t[g++]=w.g,t[g++]=w.b,t[g]=w.a}}});var ki=E(pt=>{var Dt=Nt();function Lr(r,t,e){r.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=e,t.width=e,t.style.height=e+"px",t.style.width=e+"px"}function Vr(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}pt.render=function(t,e,i){let n=i,o=e;typeof n>"u"&&(!e||!e.getContext)&&(n=e,e=void 0),e||(o=Vr()),n=Dt.getOptions(n);let a=Dt.getImageWidth(t.modules.size,n),l=o.getContext("2d"),s=l.createImageData(a,a);return Dt.qrToImageData(s.data,t,n),Lr(l,o,a),l.putImageData(s,0,0),o};pt.renderToDataURL=function(t,e,i){let n=i;typeof n>"u"&&(!e||!e.getContext)&&(n=e,e=void 0),n||(n={});let o=pt.render(t,e,n),a=n.type||"image/png",l=n.rendererOpts||{};return o.toDataURL(a,l.quality)}});var Ci=E(wi=>{var Nr=Nt();function _i(r,t){let e=r.a/255,i=t+'="'+r.hex+'"';return e<1?i+" "+t+'-opacity="'+e.toFixed(2).slice(1)+'"':i}function Ut(r,t,e){let i=r+t;return typeof e<"u"&&(i+=" "+e),i}function Dr(r,t,e){let i="",n=0,o=!1,a=0;for(let l=0;l<r.length;l++){let s=Math.floor(l%t),p=Math.floor(l/t);!s&&!o&&(o=!0),r[l]?(a++,l>0&&s>0&&r[l-1]||(i+=o?Ut("M",s+e,.5+p+e):Ut("m",n,0),n=0,o=!1),s+1<t&&r[l+1]||(i+=Ut("h",a),a=0)):n++}return i}wi.render=function(t,e,i){let n=Nr.getOptions(e),o=t.modules.size,a=t.modules.data,l=o+n.margin*2,s=n.color.light.a?"<path "+_i(n.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",p="<path "+_i(n.color.dark,"stroke")+' d="'+Dr(a,o,n.margin)+'"/>',h='viewBox="0 0 '+l+" "+l+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+h+' shape-rendering="crispEdges">'+s+p+`</svg>
`;return typeof i=="function"&&i(null,g),g}});var vi=E(Ne=>{var Ur=Tn(),qt=xi(),yi=ki(),qr=Ci();function jt(r,t,e,i,n){let o=[].slice.call(arguments,1),a=o.length,l=typeof o[a-1]=="function";if(!l&&!Ur())throw new Error("Callback required as last argument");if(l){if(a<2)throw new Error("Too few arguments provided");a===2?(n=e,e=t,t=i=void 0):a===3&&(t.getContext&&typeof n>"u"?(n=i,i=void 0):(n=i,i=e,e=t,t=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(e=t,t=i=void 0):a===2&&!t.getContext&&(i=e,e=t,t=void 0),new Promise(function(s,p){try{let h=qt.create(e,i);s(r(h,t,i))}catch(h){p(h)}})}try{let s=qt.create(e,i);n(null,r(s,t,i))}catch(s){n(s)}}Ne.create=qt.create;Ne.toCanvas=jt.bind(null,yi.render);Ne.toDataURL=jt.bind(null,yi.renderToDataURL);Ne.toString=jt.bind(null,function(r,t,e){return qr.render(r,e)})});var Zi=Ki(vi());function Zt(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var he=Zt();function Pi(r){he=r}var je={exec:()=>null};function v(r,t=""){let e=typeof r=="string"?r:r.source,i={replace:(n,o)=>{let a=typeof o=="string"?o:o.source;return a=a.replace(N.caret,"$1"),e=e.replace(n,a),i},getRegex:()=>new RegExp(e,t)};return i}var jr=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),N={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},Hr=/^(?:[ \t]*(?:\n|$))+/,Wr=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Qr=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,He=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Zr=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Jt=/(?:[*+-]|\d{1,9}[.)])/,Ri=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Bi=v(Ri).replace(/bull/g,Jt).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Jr=v(Ri).replace(/bull/g,Jt).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Kt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Kr=/^[^\n]+/,Gt=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Gr=v(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Gt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Yr=v(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Jt).getRegex(),bt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Yt=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Xr=v("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Yt).replace("tag",bt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$i=v(Kt).replace("hr",He).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bt).getRegex(),eo=v(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",$i).getRegex(),Xt={blockquote:eo,code:Wr,def:Gr,fences:Qr,heading:Zr,hr:He,html:Xr,lheading:Bi,list:Yr,newline:Hr,paragraph:$i,table:je,text:Kr},Si=v("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",He).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bt).getRegex(),to=Z($({},Xt),{lheading:Jr,table:Si,paragraph:v(Kt).replace("hr",He).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Si).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bt).getRegex()}),no=Z($({},Xt),{html:v(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Yt).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:je,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:v(Kt).replace("hr",He).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Bi).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),io=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ro=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Fi=/^( {2,}|\\)\n(?!\s*$)/,oo=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,kt=/[\p{P}\p{S}]/u,en=/[\s\p{P}\p{S}]/u,zi=/[^\s\p{P}\p{S}]/u,ao=v(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,en).getRegex(),Oi=/(?!~)[\p{P}\p{S}]/u,so=/(?!~)[\s\p{P}\p{S}]/u,lo=/(?:[^\s\p{P}\p{S}]|~)/u,co=v(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",jr?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Li=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,uo=v(Li,"u").replace(/punct/g,kt).getRegex(),ho=v(Li,"u").replace(/punct/g,Oi).getRegex(),Vi="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",po=v(Vi,"gu").replace(/notPunctSpace/g,zi).replace(/punctSpace/g,en).replace(/punct/g,kt).getRegex(),mo=v(Vi,"gu").replace(/notPunctSpace/g,lo).replace(/punctSpace/g,so).replace(/punct/g,Oi).getRegex(),go=v("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,zi).replace(/punctSpace/g,en).replace(/punct/g,kt).getRegex(),fo=v(/\\(punct)/,"gu").replace(/punct/g,kt).getRegex(),xo=v(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),bo=v(Yt).replace("(?:-->|$)","-->").getRegex(),ko=v("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",bo).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),gt=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,_o=v(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",gt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ni=v(/^!?\[(label)\]\[(ref)\]/).replace("label",gt).replace("ref",Gt).getRegex(),Di=v(/^!?\[(ref)\](?:\[\])?/).replace("ref",Gt).getRegex(),wo=v("reflink|nolink(?!\\()","g").replace("reflink",Ni).replace("nolink",Di).getRegex(),Ti=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,tn={_backpedal:je,anyPunctuation:fo,autolink:xo,blockSkip:co,br:Fi,code:ro,del:je,emStrongLDelim:uo,emStrongRDelimAst:po,emStrongRDelimUnd:go,escape:io,link:_o,nolink:Di,punctuation:ao,reflink:Ni,reflinkSearch:wo,tag:ko,text:oo,url:je},Co=Z($({},tn),{link:v(/^!?\[(label)\]\((.*?)\)/).replace("label",gt).getRegex(),reflink:v(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",gt).getRegex()}),Ht=Z($({},tn),{emStrongRDelimAst:mo,emStrongLDelim:ho,url:v(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Ti).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:v(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Ti).getRegex()}),yo=Z($({},Ht),{br:v(Fi).replace("{2,}","*").getRegex(),text:v(Ht.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),mt={normal:Xt,gfm:to,pedantic:no},De={normal:tn,gfm:Ht,breaks:yo,pedantic:Co},vo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ii=r=>vo[r];function Y(r,t){if(t){if(N.escapeTest.test(r))return r.replace(N.escapeReplace,Ii)}else if(N.escapeTestNoEncode.test(r))return r.replace(N.escapeReplaceNoEncode,Ii);return r}function Mi(r){try{r=encodeURI(r).replace(N.percentDecode,"%")}catch{return null}return r}function Ei(r,t){let e=r.replace(N.findPipe,(o,a,l)=>{let s=!1,p=a;for(;--p>=0&&l[p]==="\\";)s=!s;return s?"|":" |"}),i=e.split(N.splitPipe),n=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(N.slashPipe,"|");return i}function Ue(r,t,e){let i=r.length;if(i===0)return"";let n=0;for(;n<i;){let o=r.charAt(i-n-1);if(o===t&&!e)n++;else if(o!==t&&e)n++;else break}return r.slice(0,i-n)}function So(r,t){if(r.indexOf(t[1])===-1)return-1;let e=0;for(let i=0;i<r.length;i++)if(r[i]==="\\")i++;else if(r[i]===t[0])e++;else if(r[i]===t[1]&&(e--,e<0))return i;return e>0?-2:-1}function Ai(r,t,e,i,n){let o=t.href,a=t.title||null,l=r[1].replace(n.other.outputLinkReplace,"$1");i.state.inLink=!0;let s={type:r[0].charAt(0)==="!"?"image":"link",raw:e,href:o,title:a,text:l,tokens:i.inlineTokens(l)};return i.state.inLink=!1,s}function To(r,t,e){let i=r.match(e.other.indentCodeCompensation);if(i===null)return t;let n=i[1];return t.split(`
`).map(o=>{let a=o.match(e.other.beginningSpace);if(a===null)return o;let[l]=a;return l.length>=n.length?o.slice(n.length):o}).join(`
`)}var ft=class{options;rules;lexer;constructor(r){this.options=r||he}space(r){let t=this.rules.block.newline.exec(r);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(r){let t=this.rules.block.code.exec(r);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Ue(e,`
`)}}}fences(r){let t=this.rules.block.fences.exec(r);if(t){let e=t[0],i=To(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(r){let t=this.rules.block.heading.exec(r);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let i=Ue(e,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(e=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(r){let t=this.rules.block.hr.exec(r);if(t)return{type:"hr",raw:Ue(t[0],`
`)}}blockquote(r){let t=this.rules.block.blockquote.exec(r);if(t){let e=Ue(t[0],`
`).split(`
`),i="",n="",o=[];for(;e.length>0;){let a=!1,l=[],s;for(s=0;s<e.length;s++)if(this.rules.other.blockquoteStart.test(e[s]))l.push(e[s]),a=!0;else if(!a)l.push(e[s]);else break;e=e.slice(s);let p=l.join(`
`),h=p.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${p}`:p,n=n?`${n}
${h}`:h;let x=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,o,!0),this.lexer.state.top=x,e.length===0)break;let g=o.at(-1);if(g?.type==="code")break;if(g?.type==="blockquote"){let w=g,T=w.raw+`
`+e.join(`
`),R=this.blockquote(T);o[o.length-1]=R,i=i.substring(0,i.length-w.raw.length)+R.raw,n=n.substring(0,n.length-w.text.length)+R.text;break}else if(g?.type==="list"){let w=g,T=w.raw+`
`+e.join(`
`),R=this.list(T);o[o.length-1]=R,i=i.substring(0,i.length-g.raw.length)+R.raw,n=n.substring(0,n.length-w.raw.length)+R.raw,e=T.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:n}}}list(r){let t=this.rules.block.list.exec(r);if(t){let e=t[1].trim(),i=e.length>1,n={type:"list",raw:"",ordered:i,start:i?+e.slice(0,-1):"",loose:!1,items:[]};e=i?`\\d{1,9}\\${e.slice(-1)}`:`\\${e}`,this.options.pedantic&&(e=i?e:"[*+-]");let o=this.rules.other.listItemRegex(e),a=!1;for(;r;){let s=!1,p="",h="";if(!(t=o.exec(r))||this.rules.block.hr.test(r))break;p=t[0],r=r.substring(p.length);let x=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,R=>" ".repeat(3*R.length)),g=r.split(`
`,1)[0],w=!x.trim(),T=0;if(this.options.pedantic?(T=2,h=x.trimStart()):w?T=t[1].length+1:(T=t[2].search(this.rules.other.nonSpaceChar),T=T>4?1:T,h=x.slice(T),T+=t[1].length),w&&this.rules.other.blankLine.test(g)&&(p+=g+`
`,r=r.substring(g.length+1),s=!0),!s){let R=this.rules.other.nextBulletRegex(T),Me=this.rules.other.hrRegex(T),pe=this.rules.other.fencesBeginRegex(T),We=this.rules.other.headingBeginRegex(T),Ee=this.rules.other.htmlBeginRegex(T);for(;r;){let me=r.split(`
`,1)[0],V;if(g=me,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),V=g):V=g.replace(this.rules.other.tabCharGlobal,"    "),pe.test(g)||We.test(g)||Ee.test(g)||R.test(g)||Me.test(g))break;if(V.search(this.rules.other.nonSpaceChar)>=T||!g.trim())h+=`
`+V.slice(T);else{if(w||x.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||pe.test(x)||We.test(x)||Me.test(x))break;h+=`
`+g}!w&&!g.trim()&&(w=!0),p+=me+`
`,r=r.substring(me.length+1),x=V.slice(T)}}n.loose||(a?n.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(a=!0)),n.items.push({type:"list_item",raw:p,task:!!this.options.gfm&&this.rules.other.listIsTask.test(h),loose:!1,text:h,tokens:[]}),n.raw+=p}let l=n.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let s of n.items){if(this.lexer.state.top=!1,s.tokens=this.lexer.blockTokens(s.text,[]),s.task){if(s.text=s.text.replace(this.rules.other.listReplaceTask,""),s.tokens[0]?.type==="text"||s.tokens[0]?.type==="paragraph"){s.tokens[0].raw=s.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),s.tokens[0].text=s.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let h=this.lexer.inlineQueue.length-1;h>=0;h--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[h].src)){this.lexer.inlineQueue[h].src=this.lexer.inlineQueue[h].src.replace(this.rules.other.listReplaceTask,"");break}}let p=this.rules.other.listTaskCheckbox.exec(s.raw);if(p){let h={type:"checkbox",raw:p[0]+" ",checked:p[0]!=="[ ]"};s.checked=h.checked,n.loose?s.tokens[0]&&["paragraph","text"].includes(s.tokens[0].type)&&"tokens"in s.tokens[0]&&s.tokens[0].tokens?(s.tokens[0].raw=h.raw+s.tokens[0].raw,s.tokens[0].text=h.raw+s.tokens[0].text,s.tokens[0].tokens.unshift(h)):s.tokens.unshift({type:"paragraph",raw:h.raw,text:h.raw,tokens:[h]}):s.tokens.unshift(h)}}if(!n.loose){let p=s.tokens.filter(x=>x.type==="space"),h=p.length>0&&p.some(x=>this.rules.other.anyLine.test(x.raw));n.loose=h}}if(n.loose)for(let s of n.items){s.loose=!0;for(let p of s.tokens)p.type==="text"&&(p.type="paragraph")}return n}}html(r){let t=this.rules.block.html.exec(r);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(r){let t=this.rules.block.def.exec(r);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:i,title:n}}}table(r){let t=this.rules.block.table.exec(r);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let e=Ei(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(e.length===i.length){for(let a of i)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<e.length;a++)o.header.push({text:e[a],tokens:this.lexer.inline(e[a]),header:!0,align:o.align[a]});for(let a of n)o.rows.push(Ei(a,o.header.length).map((l,s)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[s]})));return o}}lheading(r){let t=this.rules.block.lheading.exec(r);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(r){let t=this.rules.block.paragraph.exec(r);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(r){let t=this.rules.block.text.exec(r);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(r){let t=this.rules.inline.escape.exec(r);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(r){let t=this.rules.inline.tag.exec(r);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(r){let t=this.rules.inline.link.exec(r);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let o=Ue(e.slice(0,-1),"\\");if((e.length-o.length)%2===0)return}else{let o=So(t[2],"()");if(o===-2)return;if(o>-1){let a=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let i=t[2],n="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],n=o[3])}else n=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?i=i.slice(1):i=i.slice(1,-1)),Ai(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(r,t){let e;if((e=this.rules.inline.reflink.exec(r))||(e=this.rules.inline.nolink.exec(r))){let i=(e[2]||e[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=t[i.toLowerCase()];if(!n){let o=e[0].charAt(0);return{type:"text",raw:o,text:o}}return Ai(e,n,e[0],this.lexer,this.rules)}}emStrong(r,t,e=""){let i=this.rules.inline.emStrongLDelim.exec(r);if(!(!i||i[3]&&e.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!e||this.rules.inline.punctuation.exec(e))){let n=[...i[0]].length-1,o,a,l=n,s=0,p=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,t=t.slice(-1*r.length+n);(i=p.exec(t))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(a=[...o].length,i[3]||i[4]){l+=a;continue}else if((i[5]||i[6])&&n%3&&!((n+a)%3)){s+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+s);let h=[...i[0]][0].length,x=r.slice(0,n+i.index+h+a);if(Math.min(n,a)%2){let w=x.slice(1,-1);return{type:"em",raw:x,text:w,tokens:this.lexer.inlineTokens(w)}}let g=x.slice(2,-2);return{type:"strong",raw:x,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(r){let t=this.rules.inline.code.exec(r);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(e),n=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return i&&n&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(r){let t=this.rules.inline.br.exec(r);if(t)return{type:"br",raw:t[0]}}del(r){let t=this.rules.inline.del.exec(r);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(r){let t=this.rules.inline.autolink.exec(r);if(t){let e,i;return t[2]==="@"?(e=t[1],i="mailto:"+e):(e=t[1],i=e),{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}url(r){let t;if(t=this.rules.inline.url.exec(r)){let e,i;if(t[2]==="@")e=t[0],i="mailto:"+e;else{let n;do n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(n!==t[0]);e=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(r){let t=this.rules.inline.text.exec(r);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},W=class Wt{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||he,this.options.tokenizer=this.options.tokenizer||new ft,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:N,block:mt.normal,inline:De.normal};this.options.pedantic?(e.block=mt.pedantic,e.inline=De.pedantic):this.options.gfm&&(e.block=mt.gfm,this.options.breaks?e.inline=De.breaks:e.inline=De.gfm),this.tokenizer.rules=e}static get rules(){return{block:mt,inline:De}}static lex(t,e){return new Wt(e).lex(t)}static lexInline(t,e){return new Wt(e).inlineTokens(t)}lex(t){t=t.replace(N.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let i=this.inlineQueue[e];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],i=!1){for(this.options.pedantic&&(t=t.replace(N.tabCharGlobal,"    ").replace(N.spaceLine,""));t;){let n;if(this.options.extensions?.block?.some(a=>(n=a.call({lexer:this},t,e))?(t=t.substring(n.raw.length),e.push(n),!0):!1))continue;if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length);let a=e.at(-1);n.raw.length===1&&a!==void 0?a.raw+=`
`:e.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length);let a=e.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+n.raw,a.text+=`
`+n.text,this.inlineQueue.at(-1).src=a.text):e.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length);let a=e.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+n.raw,a.text+=`
`+n.raw,this.inlineQueue.at(-1).src=a.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title},e.push(n));continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),e.push(n);continue}let o=t;if(this.options.extensions?.startBlock){let a=1/0,l=t.slice(1),s;this.options.extensions.startBlock.forEach(p=>{s=p.call({lexer:this},l),typeof s=="number"&&s>=0&&(a=Math.min(a,s))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o))){let a=e.at(-1);i&&a?.type==="paragraph"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+n.raw,a.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):e.push(n),i=o.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length);let a=e.at(-1);a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+n.raw,a.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):e.push(n);continue}if(t){let a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let i=t,n=null;if(this.tokens.links){let s=Object.keys(this.tokens.links);if(s.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)s.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,n.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let o;for(;(n=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)o=n[2]?n[2].length:0,i=i.slice(0,n.index+o)+"["+"a".repeat(n[0].length-o-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let a=!1,l="";for(;t;){a||(l=""),a=!1;let s;if(this.options.extensions?.inline?.some(h=>(s=h.call({lexer:this},t,e))?(t=t.substring(s.raw.length),e.push(s),!0):!1))continue;if(s=this.tokenizer.escape(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.tag(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.link(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(s.raw.length);let h=e.at(-1);s.type==="text"&&h?.type==="text"?(h.raw+=s.raw,h.text+=s.text):e.push(s);continue}if(s=this.tokenizer.emStrong(t,i,l)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.codespan(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.br(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.del(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.autolink(t)){t=t.substring(s.raw.length),e.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(t))){t=t.substring(s.raw.length),e.push(s);continue}let p=t;if(this.options.extensions?.startInline){let h=1/0,x=t.slice(1),g;this.options.extensions.startInline.forEach(w=>{g=w.call({lexer:this},x),typeof g=="number"&&g>=0&&(h=Math.min(h,g))}),h<1/0&&h>=0&&(p=t.substring(0,h+1))}if(s=this.tokenizer.inlineText(p)){t=t.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(l=s.raw.slice(-1)),a=!0;let h=e.at(-1);h?.type==="text"?(h.raw+=s.raw,h.text+=s.text):e.push(s);continue}if(t){let h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return e}},xt=class{options;parser;constructor(r){this.options=r||he}space(r){return""}code({text:r,lang:t,escaped:e}){let i=(t||"").match(N.notSpaceStart)?.[0],n=r.replace(N.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Y(i)+'">'+(e?n:Y(n,!0))+`</code></pre>
`:"<pre><code>"+(e?n:Y(n,!0))+`</code></pre>
`}blockquote({tokens:r}){return`<blockquote>
${this.parser.parse(r)}</blockquote>
`}html({text:r}){return r}def(r){return""}heading({tokens:r,depth:t}){return`<h${t}>${this.parser.parseInline(r)}</h${t}>
`}hr(r){return`<hr>
`}list(r){let t=r.ordered,e=r.start,i="";for(let a=0;a<r.items.length;a++){let l=r.items[a];i+=this.listitem(l)}let n=t?"ol":"ul",o=t&&e!==1?' start="'+e+'"':"";return"<"+n+o+`>
`+i+"</"+n+`>
`}listitem(r){return`<li>${this.parser.parse(r.tokens)}</li>
`}checkbox({checked:r}){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:r}){return`<p>${this.parser.parseInline(r)}</p>
`}table(r){let t="",e="";for(let n=0;n<r.header.length;n++)e+=this.tablecell(r.header[n]);t+=this.tablerow({text:e});let i="";for(let n=0;n<r.rows.length;n++){let o=r.rows[n];e="";for(let a=0;a<o.length;a++)e+=this.tablecell(o[a]);i+=this.tablerow({text:e})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:r}){return`<tr>
${r}</tr>
`}tablecell(r){let t=this.parser.parseInline(r.tokens),e=r.header?"th":"td";return(r.align?`<${e} align="${r.align}">`:`<${e}>`)+t+`</${e}>
`}strong({tokens:r}){return`<strong>${this.parser.parseInline(r)}</strong>`}em({tokens:r}){return`<em>${this.parser.parseInline(r)}</em>`}codespan({text:r}){return`<code>${Y(r,!0)}</code>`}br(r){return"<br>"}del({tokens:r}){return`<del>${this.parser.parseInline(r)}</del>`}link({href:r,title:t,tokens:e}){let i=this.parser.parseInline(e),n=Mi(r);if(n===null)return i;r=n;let o='<a href="'+r+'"';return t&&(o+=' title="'+Y(t)+'"'),o+=">"+i+"</a>",o}image({href:r,title:t,text:e,tokens:i}){i&&(e=this.parser.parseInline(i,this.parser.textRenderer));let n=Mi(r);if(n===null)return Y(e);r=n;let o=`<img src="${r}" alt="${e}"`;return t&&(o+=` title="${Y(t)}"`),o+=">",o}text(r){return"tokens"in r&&r.tokens?this.parser.parseInline(r.tokens):"escaped"in r&&r.escaped?r.text:Y(r.text)}},nn=class{strong({text:r}){return r}em({text:r}){return r}codespan({text:r}){return r}del({text:r}){return r}html({text:r}){return r}text({text:r}){return r}link({text:r}){return""+r}image({text:r}){return""+r}br(){return""}checkbox({raw:r}){return r}},Q=class Qt{options;renderer;textRenderer;constructor(t){this.options=t||he,this.options.renderer=this.options.renderer||new xt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new nn}static parse(t,e){return new Qt(e).parse(t)}static parseInline(t,e){return new Qt(e).parseInline(t)}parse(t){let e="";for(let i=0;i<t.length;i++){let n=t[i];if(this.options.extensions?.renderers?.[n.type]){let a=n,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){e+=l||"";continue}}let o=n;switch(o.type){case"space":{e+=this.renderer.space(o);break}case"hr":{e+=this.renderer.hr(o);break}case"heading":{e+=this.renderer.heading(o);break}case"code":{e+=this.renderer.code(o);break}case"table":{e+=this.renderer.table(o);break}case"blockquote":{e+=this.renderer.blockquote(o);break}case"list":{e+=this.renderer.list(o);break}case"checkbox":{e+=this.renderer.checkbox(o);break}case"html":{e+=this.renderer.html(o);break}case"def":{e+=this.renderer.def(o);break}case"paragraph":{e+=this.renderer.paragraph(o);break}case"text":{e+=this.renderer.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return e}parseInline(t,e=this.renderer){let i="";for(let n=0;n<t.length;n++){let o=t[n];if(this.options.extensions?.renderers?.[o.type]){let l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){i+=l||"";continue}}let a=o;switch(a.type){case"escape":{i+=e.text(a);break}case"html":{i+=e.html(a);break}case"link":{i+=e.link(a);break}case"image":{i+=e.image(a);break}case"checkbox":{i+=e.checkbox(a);break}case"strong":{i+=e.strong(a);break}case"em":{i+=e.em(a);break}case"codespan":{i+=e.codespan(a);break}case"br":{i+=e.br(a);break}case"del":{i+=e.del(a);break}case"text":{i+=e.text(a);break}default:{let l='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}},qe=class{options;block;constructor(r){this.options=r||he}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(r){return r}postprocess(r){return r}processAllTokens(r){return r}emStrongMask(r){return r}provideLexer(){return this.block?W.lex:W.lexInline}provideParser(){return this.block?Q.parse:Q.parseInline}},Io=class{defaults=Zt();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Q;Renderer=xt;TextRenderer=nn;Lexer=W;Tokenizer=ft;Hooks=qe;constructor(...r){this.use(...r)}walkTokens(r,t){let e=[];for(let i of r)switch(e=e.concat(t.call(this,i)),i.type){case"table":{let n=i;for(let o of n.header)e=e.concat(this.walkTokens(o.tokens,t));for(let o of n.rows)for(let a of o)e=e.concat(this.walkTokens(a.tokens,t));break}case"list":{let n=i;e=e.concat(this.walkTokens(n.items,t));break}default:{let n=i;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(o=>{let a=n[o].flat(1/0);e=e.concat(this.walkTokens(a,t))}):n.tokens&&(e=e.concat(this.walkTokens(n.tokens,t)))}}return e}use(...r){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(e=>{let i=$({},e);if(i.async=this.defaults.async||i.async||!1,e.extensions&&(e.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let o=t.renderers[n.name];o?t.renderers[n.name]=function(...a){let l=n.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[n.level];o?o.unshift(n.tokenizer):t[n.level]=[n.tokenizer],n.start&&(n.level==="block"?t.startBlock?t.startBlock.push(n.start):t.startBlock=[n.start]:n.level==="inline"&&(t.startInline?t.startInline.push(n.start):t.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(t.childTokens[n.name]=n.childTokens)}),i.extensions=t),e.renderer){let n=this.defaults.renderer||new xt(this.defaults);for(let o in e.renderer){if(!(o in n))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=e.renderer[a],s=n[a];n[a]=(...p)=>{let h=l.apply(n,p);return h===!1&&(h=s.apply(n,p)),h||""}}i.renderer=n}if(e.tokenizer){let n=this.defaults.tokenizer||new ft(this.defaults);for(let o in e.tokenizer){if(!(o in n))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=e.tokenizer[a],s=n[a];n[a]=(...p)=>{let h=l.apply(n,p);return h===!1&&(h=s.apply(n,p)),h}}i.tokenizer=n}if(e.hooks){let n=this.defaults.hooks||new qe;for(let o in e.hooks){if(!(o in n))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=e.hooks[a],s=n[a];qe.passThroughHooks.has(o)?n[a]=p=>{if(this.defaults.async&&qe.passThroughHooksRespectAsync.has(o))return F(this,null,function*(){let x=yield l.call(n,p);return s.call(n,x)});let h=l.call(n,p);return s.call(n,h)}:n[a]=(...p)=>{if(this.defaults.async)return F(this,null,function*(){let x=yield l.apply(n,p);return x===!1&&(x=yield s.apply(n,p)),x});let h=l.apply(n,p);return h===!1&&(h=s.apply(n,p)),h}}i.hooks=n}if(e.walkTokens){let n=this.defaults.walkTokens,o=e.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),n&&(l=l.concat(n.call(this,a))),l}}this.defaults=$($({},this.defaults),i)}),this}setOptions(r){return this.defaults=$($({},this.defaults),r),this}lexer(r,t){return W.lex(r,t??this.defaults)}parser(r,t){return Q.parse(r,t??this.defaults)}parseMarkdown(r){return(t,e)=>{let i=$({},e),n=$($({},this.defaults),i),o=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(n.hooks&&(n.hooks.options=n,n.hooks.block=r),n.async)return F(this,null,function*(){let a=n.hooks?yield n.hooks.preprocess(t):t,l=yield(n.hooks?yield n.hooks.provideLexer():r?W.lex:W.lexInline)(a,n),s=n.hooks?yield n.hooks.processAllTokens(l):l;n.walkTokens&&(yield Promise.all(this.walkTokens(s,n.walkTokens)));let p=yield(n.hooks?yield n.hooks.provideParser():r?Q.parse:Q.parseInline)(s,n);return n.hooks?yield n.hooks.postprocess(p):p}).catch(o);try{n.hooks&&(t=n.hooks.preprocess(t));let a=(n.hooks?n.hooks.provideLexer():r?W.lex:W.lexInline)(t,n);n.hooks&&(a=n.hooks.processAllTokens(a)),n.walkTokens&&this.walkTokens(a,n.walkTokens);let l=(n.hooks?n.hooks.provideParser():r?Q.parse:Q.parseInline)(a,n);return n.hooks&&(l=n.hooks.postprocess(l)),l}catch(a){return o(a)}}}onError(r,t){return e=>{if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,r){let i="<p>An error occurred:</p><pre>"+Y(e.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(e);throw e}}},ue=new Io;function M(r,t){return ue.parse(r,t)}M.options=M.setOptions=function(r){return ue.setOptions(r),M.defaults=ue.defaults,Pi(M.defaults),M};M.getDefaults=Zt;M.defaults=he;M.use=function(...r){return ue.use(...r),M.defaults=ue.defaults,Pi(M.defaults),M};M.walkTokens=function(r,t){return ue.walkTokens(r,t)};M.parseInline=ue.parseInline;M.Parser=Q;M.parser=Q.parse;M.Renderer=xt;M.TextRenderer=nn;M.Lexer=W;M.lexer=W.lex;M.Tokenizer=ft;M.Hooks=qe;M.parse=M;var Xa=M.options,es=M.setOptions,ts=M.use,ns=M.walkTokens,is=M.parseInline;var rs=Q.parse,os=W.lex;var Ui=(()=>{class r{constructor(e){this.sanitizer=e}transform(e){if(!e)return"";let i=M.parse(e);return this.sanitizer.bypassSecurityTrustHtml(i)}static{this.\u0275fac=function(i){return new(i||r)(D(gn,16))}}static{this.\u0275pipe=an({name:"markdown",type:r,pure:!0})}}return r})();var Ao=()=>[1,2,3,4,5];function Po(r,t){if(r&1){let e=L();c(0,"button",15),b("click",function(){let n=k(e).$implicit,o=f();return _(o.setRating(n))}),c(1,"mat-icon",16),u(2),d()()}if(r&2){let e=t.$implicit,i=f();U("active",i.rating()>=e),m(2),K(i.rating()>=e?"star":"star_border")}}function Ro(r,t){if(r&1){let e=L();c(0,"button",17),b("click",function(){let n=k(e).$implicit,o=f();return _(o.toggleTag(n))}),u(1),d()}if(r&2){let e=t.$implicit,i=f();U("selected",i.selectedTags().includes(e))("bg-indigo-50",i.selectedTags().includes(e))("text-indigo-600",i.selectedTags().includes(e))("border-indigo-200",i.selectedTags().includes(e))("bg-white",!i.selectedTags().includes(e))("text-slate-600",!i.selectedTags().includes(e))("border-slate-200",!i.selectedTags().includes(e))("hover:border-indigo-300",!i.selectedTags().includes(e)),m(),S(" ",e," ")}}function Bo(r,t){if(r&1&&(c(0,"div",9)(1,"div",18)(2,"mat-icon",19),u(3,"link"),d(),c(4,"span"),u(5,"Feedback linked to payment:"),d()(),c(6,"code",20),u(7),d()()),r&2){let e=f();m(7),S(" ",e.data.paymentTxHash," ")}}function $o(r,t){r&1&&(c(0,"div",13)(1,"mat-icon",21),u(2,"refresh"),d(),c(3,"span"),u(4,"Submitting..."),d()())}function Fo(r,t){r&1&&u(0," Submit Feedback ")}var Wi=(()=>{class r{constructor(e,i,n){this._dialogRef=e,this.data=i,this._walletService=n,this.rating=C(0),this.comment=C(""),this.availableTags=["fast","accurate","helpful","reliable","easy-to-use"],this.selectedTags=C([]),this.isSubmitting=C(!1)}setRating(e){this.rating.set(e)}toggleTag(e){let i=this.selectedTags();i.includes(e)?this.selectedTags.set(i.filter(n=>n!==e)):this.selectedTags.set([...i,e])}submit(){return F(this,null,function*(){if(this.rating()!==0){this.isSubmitting.set(!0);try{let e=this.data.agentTokenId||1,i=yield this._walletService.submitFeedback(e,this.rating(),this.selectedTags(),this.comment(),this.data.paymentTxHash||null);console.log("Feedback transaction sent:",i.hash),this._dialogRef.close({success:!0,txHash:i.hash,tx:i})}catch(e){console.error("Feedback error:",e),this._dialogRef.close({success:!1,error:e})}finally{this.isSubmitting.set(!1)}}})}close(){this._dialogRef.close()}static{this.\u0275fac=function(i){return new(i||r)(D(Ke),D(Ge),D(nt))}}static{this.\u0275cmp=fe({type:r,selectors:[["app-agent-feedback"]],decls:24,vars:7,consts:[[1,"close-button",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"rating-stars","flex","justify-center","gap-2","mb-6"],[1,"star-button","transition-transform","hover:scale-110","focus:outline-none",3,"active"],[1,"feedback-tags","flex","flex-wrap","justify-center","gap-2","mb-6"],[1,"tag","px-3","py-1.5","rounded-full","text-xs","font-medium","border","transition-all",3,"selected","bg-indigo-50","text-indigo-600","border-indigo-200","bg-white","text-slate-600","border-slate-200","hover:border-indigo-300"],[1,"comment-section","mb-4"],["placeholder","Tell us about your experience...","rows","4",1,"w-full","p-4","rounded-xl","border","border-slate-200","dark:border-slate-700","bg-slate-50","dark:bg-slate-800","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:ring-2","focus:ring-indigo-500/20","focus:border-indigo-500","outline-none","resize-none","transition-all",3,"ngModelChange","ngModel","disabled"],[1,"payment-link-info","mb-6","p-3","bg-slate-50","dark:bg-slate-800","rounded-lg","text-xs","text-slate-500","dark:text-slate-400","border","border-slate-100","dark:border-slate-700"],[1,"feedback-actions","flex","gap-3"],["mat-stroked-button","",1,"flex-1","!h-11","!rounded-xl","border-slate-300","dark:border-slate-600",3,"click","disabled"],["mat-flat-button","","color","primary",1,"flex-1","!h-11","!rounded-xl","!bg-indigo-600","hover:!bg-indigo-700","text-white",3,"click","disabled"],[1,"flex","items-center","justify-center","gap-2"],[1,"feedback-note","mt-4","text-center","text-[10px]","text-slate-400"],[1,"star-button","transition-transform","hover:scale-110","focus:outline-none",3,"click"],[1,"!w-10","!h-10","!text-[40px]"],[1,"tag","px-3","py-1.5","rounded-full","text-xs","font-medium","border","transition-all",3,"click"],[1,"flex","items-center","gap-2","mb-1"],[1,"!w-4","!h-4","!text-[16px]"],[1,"block","bg-slate-100","dark:bg-slate-900","p-2","rounded","border","border-slate-200","dark:border-slate-700","font-mono","break-all"],[1,"animate-spin","!w-5","!h-5","!text-[20px]"]],template:function(i,n){i&1&&(c(0,"button",0),b("click",function(){return n.close()}),c(1,"mat-icon"),u(2,"close"),d()(),c(3,"div",1)(4,"h2"),u(5,"Rate Experience"),d()(),c(6,"div",2)(7,"div",3),ee(8,Po,3,3,"button",4,wt),d(),c(10,"div",5),ee(11,Ro,2,17,"button",6,wt),d(),c(13,"div",7)(14,"textarea",8),Re("ngModelChange",function(a){return Pe(n.comment,a)||(n.comment=a),a}),d()(),A(15,Bo,8,1,"div",9),c(16,"div",10)(17,"button",11),b("click",function(){return n.close()}),u(18," Cancel "),d(),c(19,"button",12),b("click",function(){return n.submit()}),A(20,$o,5,0,"div",13)(21,Fo,1,0),d()(),c(22,"div",14),u(23," \u{1F4A1} Your feedback will be recorded on-chain via ERC8004 Reputation Registry "),d()()),i&2&&(m(8),te(un(6,Ao)),m(3),te(n.availableTags),m(3),Ae("ngModel",n.comment),z("disabled",n.isSubmitting()),m(),y(n.data.paymentTxHash?15:-1),m(2),z("disabled",n.isSubmitting()),m(2),z("disabled",n.isSubmitting()||n.rating()===0),m(),y(n.isSubmitting()?20:21))},dependencies:[xe,tt,Ye,Xe,et,_e,ke,Ce,we,be],styles:["[_nghost-%COMP%]{display:block;background:#fff;border-radius:1.5rem;padding:1.5rem;max-width:480px;margin:0 auto;position:relative;overflow:hidden}[_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;padding-top:.5rem}[_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#0f172a;margin:0;letter-spacing:-.01em;line-height:1.5}[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]{position:absolute;top:1.25rem;right:1.25rem;color:#94a3b8;background:transparent;width:32px;height:32px;border:none;cursor:pointer;border-radius:50%;transition:all .2s;display:flex;align-items:center;justify-content:center;z-index:10}[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#475569}[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.star-button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0;color:#e2e8f0;transition:all .2s cubic-bezier(.4,0,.2,1)}.star-button.active[_ngcontent-%COMP%]{color:#f59e0b;filter:drop-shadow(0 0 4px rgba(245,158,11,.3))}.star-button[_ngcontent-%COMP%]:hover{transform:scale(1.15)}.tag[_ngcontent-%COMP%]{outline:none}.tag.selected[_ngcontent-%COMP%]{border-color:#818cf8;box-shadow:0 2px 4px #6366f11a}.tag[_ngcontent-%COMP%]:hover:not(.selected){background-color:#f8fafc}textarea[_ngcontent-%COMP%]{font-family:inherit}.dark[_nghost-%COMP%], .dark   [_nghost-%COMP%]{background:#0f172a;border:1px solid #1e293b}.dark[_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff}.dark[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background:#1e293b;color:#fff}.dark[_nghost-%COMP%]   .star-button[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .star-button[_ngcontent-%COMP%]{color:#334155}.dark[_nghost-%COMP%]   .star-button.active[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .star-button.active[_ngcontent-%COMP%]{color:#fbbf24}"]})}}return r})();function Oo(r,t){r&1&&(c(0,"div",17),u(1,"Insufficient Funds"),d())}function Lo(r,t){if(r&1&&(c(0,"div",29)(1,"div",33)(2,"mat-icon",23),u(3,"data_object"),d()(),c(4,"div",34)(5,"div",25),u(6,"Parameters"),d(),c(7,"div",35),u(8),d()()()),r&2){let e=f();m(8),S(" ",e.data.details," ")}}var Qi=(()=>{class r{constructor(e,i){this.dialogRef=e,this.data=i}get newBalance(){let e=parseFloat(this.data.currentBalance||"0"),i=parseFloat(this.data.amount||"0");return e-i}confirm(){this.dialogRef.close(!0)}close(){this.dialogRef.close(!1)}static{this.\u0275fac=function(i){return new(i||r)(D(Ke),D(Ge))}}static{this.\u0275cmp=fe({type:r,selectors:[["app-payment-confirmation"]],decls:58,vars:20,consts:[[1,"bg-white","dark:bg-slate-900","rounded-2xl","max-w-md","w-full","overflow-hidden"],[1,"p-6","pb-2"],[1,"text-xl","font-bold","dark:text-white","flex","items-center","gap-2"],[1,"w-10","h-10","rounded-full","bg-slate-100","dark:bg-slate-800","flex","items-center","justify-center"],[1,"text-slate-900","dark:text-white"],[1,"p-6","pt-2"],[1,"text-center","py-6"],[1,"text-xs","text-slate-500","uppercase","tracking-wider","font-bold","mb-2"],[1,"text-5xl","font-bold","text-slate-900","dark:text-white","flex","items-center","justify-center","gap-1"],[1,"text-lg","text-slate-400","font-normal","self-end","mb-1.5","ml-1"],[1,"bg-slate-50","dark:bg-slate-800/50","rounded-xl","p-4","mb-6","border","border-slate-100","dark:border-slate-700","space-y-3"],[1,"flex","justify-between","items-center"],[1,"text-sm","text-slate-500","font-medium"],[1,"font-mono","text-sm","dark:text-slate-300"],[1,"w-full","h-px","bg-slate-200","dark:bg-slate-700"],[1,"text-sm","font-bold","text-slate-700","dark:text-slate-200"],[1,"font-mono","text-sm","font-bold"],[1,"text-xs","text-red-500","text-right","font-medium","mt-1"],[1,"mb-8"],[1,"text-xs","text-slate-400","uppercase","font-bold","tracking-wider","mb-3","block","px-1"],[1,"bg-white","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","rounded-xl","overflow-hidden"],[1,"p-3","border-b","border-slate-100","dark:border-slate-700","flex","items-start","gap-3"],[1,"w-8","h-8","rounded-lg","bg-blue-50","dark:bg-blue-900/20","text-blue-600","flex","items-center","justify-center","shrink-0"],[1,"!w-4","!h-4","!text-[16px]"],[1,"min-w-0"],[1,"text-[10px]","text-slate-400","uppercase","font-bold"],[1,"text-sm","font-mono","text-slate-700","dark:text-slate-300","break-all","leading-tight"],[1,"w-8","h-8","rounded-lg","bg-purple-50","dark:bg-purple-900/20","text-purple-600","flex","items-center","justify-center","shrink-0"],[1,"text-xs","font-mono","text-slate-600","dark:text-slate-400","break-all","leading-tight"],[1,"p-3","bg-slate-50","dark:bg-slate-800/50","flex","items-start","gap-3"],[1,"flex","gap-3"],["mat-stroked-button","",1,"flex-1","!h-12","!rounded-xl","!border-slate-200","dark:!border-slate-700","dark:text-white",3,"click"],["mat-flat-button","","color","primary",1,"flex-[2]","!h-12","!rounded-xl","text-lg","shadow-lg","shadow-blue-500/20",3,"click","disabled"],[1,"w-8","h-8","rounded-lg","bg-emerald-50","dark:bg-emerald-900/20","text-emerald-600","flex","items-center","justify-center","shrink-0"],[1,"min-w-0","flex-1"],[1,"text-xs","text-slate-600","dark:text-slate-400","mt-1","font-mono","bg-white","dark:bg-slate-900","border","border-slate-200","dark:border-slate-700","rounded","p-2"]],template:function(i,n){i&1&&(c(0,"div",0)(1,"div",1)(2,"h2",2)(3,"div",3)(4,"mat-icon",4),u(5,"account_balance_wallet"),d()(),u(6," Confirm Payment "),d()(),c(7,"div",5)(8,"div",6)(9,"div",7),u(10,"Total Cost"),d(),c(11,"div",8),u(12),c(13,"span",9),u(14,"AVAX"),d()()(),c(15,"div",10)(16,"div",11)(17,"span",12),u(18,"Current Balance"),d(),c(19,"span",13),u(20),O(21,"number"),d()(),q(22,"div",14),c(23,"div",11)(24,"span",15),u(25,"New Balance"),d(),c(26,"span",16),u(27),O(28,"number"),d()(),A(29,Oo,2,0,"div",17),d(),c(30,"div",18)(31,"label",19),u(32,"Service Details"),d(),c(33,"div",20)(34,"div",21)(35,"div",22)(36,"mat-icon",23),u(37,"api"),d()(),c(38,"div",24)(39,"div",25),u(40,"Endpoint"),d(),c(41,"div",26),u(42),d()()(),c(43,"div",21)(44,"div",27)(45,"mat-icon",23),u(46,"wallet"),d()(),c(47,"div",24)(48,"div",25),u(49,"Receiver"),d(),c(50,"div",28),u(51),d()()(),A(52,Lo,9,1,"div",29),d()(),c(53,"div",30)(54,"button",31),b("click",function(){return n.close()}),u(55," Cancel "),d(),c(56,"button",32),b("click",function(){return n.confirm()}),u(57," Confirm Payment "),d()()()()),i&2&&(m(12),S(" ",n.data.amount," "),m(8),S("",ae(21,14,n.data.currentBalance,"1.4-4")," AVAX"),m(6),U("text-amber-500",n.newBalance<.1&&n.newBalance>=0)("text-red-500",n.newBalance<0)("text-emerald-600",n.newBalance>=.1),m(),S(" ",ae(28,17,n.newBalance,"1.4-4")," AVAX "),m(2),y(n.newBalance<0?29:-1),m(13),S(" ",n.data.endpoint||"Unknown Endpoint"," "),m(9),S(" ",n.data.receiver," "),m(),y(n.data.details?52:-1),m(4),z("disabled",n.newBalance<0))},dependencies:[xe,Ze,be,_e,ke,Ce,we],encapsulation:2})}}return r})();var Vo=["scrollContainer"],No=(r,t)=>t.id;function Do(r,t){r&1&&(c(0,"div",9),u(1,"No history yet. Start a chat!"),d())}function Uo(r,t){if(r&1){let e=L();c(0,"input",41),Re("ngModelChange",function(n){k(e);let o=f(2);return Pe(o.renameInput,n)||(o.renameInput=n),_(n)}),b("click",function(n){return k(e),_(n.stopPropagation())})("blur",function(){k(e);let n=f().$implicit,o=f();return _(o.saveRename(n))})("keyup.enter",function(){k(e);let n=f().$implicit,o=f();return _(o.saveRename(n))}),d()}if(r&2){let e=f(2);Ae("ngModel",e.renameInput)}}function qo(r,t){if(r&1){let e=L();c(0,"div",42)(1,"div",43),u(2),d(),c(3,"div",44),u(4),O(5,"date"),d()(),c(6,"div",45)(7,"button",46),b("click",function(n){k(e);let o=f().$implicit,a=f();return _(a.startRenaming(o,n))}),c(8,"mat-icon",47),u(9,"edit"),d()(),c(10,"button",48),b("click",function(n){k(e);let o=f().$implicit,a=f();return _(a.deleteConversation(o,n))}),c(11,"mat-icon",47),u(12,"delete"),d()()()}if(r&2){let e=f().$implicit;m(2),S(" ",e.title," "),m(2),S(" ",ae(5,2,e.updated_at,"MMM d, h:mm a")," ")}}function jo(r,t){if(r&1){let e=L();c(0,"div",39),b("click",function(){let n=k(e).$implicit,o=f();return _(o.selectConversation(n.id))}),A(1,Uo,1,1,"input",40)(2,qo,13,5),d()}if(r&2){let e=t.$implicit,i=f();U("bg-white",i.currentConversationId()===e.id)("dark:bg-slate-900",i.currentConversationId()===e.id)("shadow-sm",i.currentConversationId()===e.id)("border-slate-200",i.currentConversationId()===e.id)("dark:border-slate-800",i.currentConversationId()===e.id)("hover:bg-slate-200",i.currentConversationId()!==e.id)("dark:hover:bg-slate-900",i.currentConversationId()!==e.id),m(),y(i.isRenamingId()===e.id?1:2)}}function Ho(r,t){r&1&&q(0,"div",17)}function Wo(r,t){if(r&1){let e=L();c(0,"div",49),b("click",function(){k(e);let n=f();return _(n.toggleWalletModal())}),c(1,"div",50),u(2),O(3,"number"),d(),c(4,"div",51)(5,"mat-icon",52),u(6,"account_balance_wallet"),d()()()}if(r&2){let e=f();m(2),S(" ",ae(3,1,e.walletBalance(),"1.4-4")," AVAX ")}}function Qo(r,t){r&1&&(c(0,"div",64),q(1,"mat-progress-spinner",69),u(2," Confirming... "),d())}function Zo(r,t){r&1&&(c(0,"div",65)(1,"mat-icon",70),u(2,"check_circle"),d(),u(3," On-Chain "),d())}function Jo(r,t){if(r&1&&(c(0,"div",68)(1,"label",71),u(2,"Transaction Hash"),d(),c(3,"a",72)(4,"span",73),u(5),d(),c(6,"div",74)(7,"span",75),u(8,"VIEW"),d(),c(9,"mat-icon",70),u(10,"open_in_new"),d()()()()),r&2){let e=t;m(3),z("href","https://testnet.snowtrace.io/tx/"+e,X),m(2),K(e)}}function Ko(r,t){if(r&1&&(c(0,"div",53)(1,"div",56),u(2," AI "),d(),c(3,"div",57)(4,"div",58)(5,"div",59)(6,"div",60)(7,"div",61)(8,"mat-icon",62),u(9,"star"),d()(),c(10,"span",63),u(11,"Proof of Feedback"),d()(),A(12,Qo,3,0,"div",64)(13,Zo,4,0,"div",65),d(),c(14,"div",66)(15,"div",67),u(16," Processing your reputation feedback on correct execution. "),d(),A(17,Jo,11,2,"div",68),d()()()()),r&2){let e,i=f().$implicit,n=f();m(12),y(i.content.includes("Waiting")?12:13),m(5),y((e=n.extractTxHash(i.content))?17:-1,e)}}function Go(r,t){r&1&&(c(0,"div",54)(1,"div",76)(2,"mat-icon",34),u(3,"verified"),d(),u(4," Reputation Recorded Successfully "),d()())}function Yo(r,t){r&1&&(c(0,"div",64),q(1,"mat-progress-spinner",69),u(2," Processing... "),d())}function Xo(r,t){r&1&&(c(0,"div",65)(1,"mat-icon",70),u(2,"check_circle"),d(),u(3," Confirmed "),d())}function ea(r,t){if(r&1&&(c(0,"div",68)(1,"label",71),u(2,"Transaction Hash"),d(),c(3,"a",72)(4,"span",73),u(5),d(),c(6,"div",74)(7,"span",75),u(8,"VIEW"),d(),c(9,"mat-icon",70),u(10,"open_in_new"),d()()()()),r&2){let e=t;m(3),z("href","https://testnet.snowtrace.io/tx/"+e,X),m(2),K(e)}}function ta(r,t){if(r&1&&(c(0,"div",53)(1,"div",56),u(2," AI "),d(),c(3,"div",57)(4,"div",58)(5,"div",59)(6,"div",60)(7,"div",77)(8,"mat-icon",78),u(9,"receipt_long"),d()(),c(10,"span",63),u(11,"Payment Receipt"),d(),c(12,"span",79),u(13,"AVAX"),d()(),A(14,Yo,3,0,"div",64)(15,Xo,4,0,"div",65),d(),c(16,"div",66)(17,"p",67),u(18," Transaction initiated on chain. "),d(),A(19,ea,11,2,"div",68),d()()()()),r&2){let e,i=f().$implicit,n=f();m(14),y(i.content.includes("Waiting")?14:15),m(5),y((e=n.extractTxHash(i.content))?19:-1,e)}}function na(r,t){r&1&&(c(0,"mat-icon",81),u(1,"person"),d())}function ia(r,t){r&1&&u(0," AI ")}function ra(r,t){if(r&1){let e=L();c(0,"img",88),b("click",function(n){let o=k(e).$implicit,a=f(4);return n.stopPropagation(),_(a.window.open(a.getImageUrl(o),"_blank"))}),d()}if(r&2){let e=t.$implicit,i=f(4);z("src",i.getImageUrl(e),X)}}function oa(r,t){if(r&1&&(c(0,"div",85),ee(1,ra,1,1,"img",87,Qe),d()),r&2){let e=f(2).$implicit;m(),te(e.images)}}function aa(r,t){if(r&1){let e=L();c(0,"div",86)(1,"div",89)(2,"span",90),u(3,"\u26A1"),d(),u(4),O(5,"transloco"),d(),c(6,"div",91),u(7),d(),c(8,"div",92),u(9),d(),c(10,"button",93),b("click",function(){k(e);let n=f(2).$index,o=f();return _(o.confirmPayment(n))}),u(11),O(12,"transloco"),d()()}if(r&2){let e=f(2).$implicit;m(4),S(" ",H(5,4,"chat.payment.required")," "),m(3),S(" ",e.payment_required.amount," AVAX "),m(2),S(" To: ",e.payment_required.receiver_address," "),m(2),S(" ",H(12,6,"chat.payment.payBtn")," ")}}function sa(r,t){if(r&1&&(c(0,"div",96)(1,"div",60)(2,"div",98)(3,"mat-icon",34),u(4,"verified"),d()(),c(5,"div",99),u(6," Validated On-Chain "),d()(),c(7,"a",100),u(8," View TX "),c(9,"mat-icon",70),u(10,"open_in_new"),d()()()),r&2){let e=f(3).$implicit;m(7),z("href","https://testnet.snowtrace.io/tx/"+e.proof,X)}}function la(r,t){if(r&1){let e=L();c(0,"button",101),b("click",function(){k(e);let n=f(4);return _(n.openFeedbackModal())}),c(1,"mat-icon",70),u(2,"star_outline"),d(),u(3," Rate this "),d()}}function ca(r,t){if(r&1&&(c(0,"div",94)(1,"pre",95),u(2),O(3,"json"),d()(),A(4,sa,11,1,"div",96)(5,la,4,0,"button",97)),r&2){let e=f(2).$implicit,i=f();m(2),K(H(3,3,e.data)),m(2),y(e.proof?4:-1),m(),y(i.chatMode()==="x402"&&e.role==="assistant"?5:-1)}}function da(r,t){if(r&1&&(c(0,"div",53)(1,"div",80),A(2,na,2,0,"mat-icon",81)(3,ia,1,0),d(),c(4,"div",82)(5,"div",83),q(6,"div",84),O(7,"markdown"),A(8,oa,3,0,"div",85)(9,aa,13,8,"div",86)(10,ca,6,5),d()()()),r&2){let e=f().$implicit;U("flex-row-reverse",e.role==="user"),m(),U("bg-slate-900",e.role==="user")("text-white",e.role==="user")("bg-slate-200",e.role!=="user")("text-slate-700",e.role!=="user")("dark:bg-slate-700",e.role!=="user")("dark:text-slate-50",e.role!=="user"),m(),y(e.role==="user"?2:3),m(3),U("bg-slate-900",e.role==="user")("text-white",e.role==="user")("border-slate-800",e.role==="user")("rounded-tr-sm",e.role==="user")("bg-white",e.role!=="user")("text-slate-700",e.role!=="user")("dark:bg-slate-800",e.role!=="user")("dark:text-slate-200",e.role!=="user")("border-slate-200",e.role!=="user")("dark:border-slate-700",e.role!=="user")("rounded-tl-sm",e.role!=="user"),m(),z("innerHTML",H(7,41,e.content),on),m(2),y(e.images&&e.images.length>0?8:-1),m(),y(e.payment_required?9:-1),m(),y(e.data?10:-1)}}function ua(r,t){if(r&1&&A(0,Ko,18,2,"div",53)(1,Go,5,0,"div",54)(2,ta,20,2,"div",53)(3,da,11,43,"div",55),r&2){let e=t.$implicit;y(e.role==="system"&&e.content.includes("Feedback submitted")?0:e.role==="system"&&e.content.includes("Thank you for your feedback")?1:e.role==="system"&&e.content.includes("Payment sent!")?2:3)}}function ha(r,t){if(r&1&&(c(0,"div",108),u(1),O(2,"transloco"),d()),r&2){let e=f(2);m(),S(" ",H(2,1,e.currentThinkingStep())," ")}}function pa(r,t){if(r&1&&(c(0,"div",25)(1,"div",102),u(2," AI "),d(),c(3,"div",103)(4,"div",104),q(5,"div",105)(6,"div",106)(7,"div",107),d(),A(8,ha,3,3,"div",108),d()()),r&2){let e=f();m(8),y(e.thinkingSteps().length>0?8:-1)}}function ma(r,t){if(r&1){let e=L();c(0,"div",111),b("click",function(){let n=k(e).$implicit,o=f(2);return _(o.openImagePreview(n))}),q(1,"img",112),c(2,"button",113),b("click",function(n){let o=k(e).$index,a=f(2);return n.stopPropagation(),_(a.removeAttachment(o))}),c(3,"mat-icon",114),u(4,"close"),d()()()}if(r&2){let e=t.$implicit;m(),z("src",e,X)}}function ga(r,t){if(r&1&&(c(0,"div",27)(1,"div",109),ee(2,ma,5,1,"div",110,Qe),d()()),r&2){let e=f();m(2),te(e.pendingAttachments())}}function fa(r,t){r&1&&q(0,"mat-progress-spinner",33)}function xa(r,t){r&1&&(c(0,"mat-icon",34),u(1,"arrow_upward"),d())}function ba(r,t){if(r&1){let e=L();c(0,"div",115),b("click",function(){k(e);let n=f();return _(n.closeImagePreview())}),c(1,"button",116),b("click",function(){k(e);let n=f();return _(n.closeImagePreview())}),c(2,"mat-icon",117),u(3,"close"),d()(),c(4,"img",118),b("click",function(n){return k(e),_(n.stopPropagation())}),d()()}if(r&2){let e=f();m(4),z("src",e.previewImage(),X)}}function ka(r,t){r&1&&q(0,"mat-progress-spinner",126)}function _a(r,t){if(r&1&&(c(0,"div",127)(1,"div",128),u(2," \u{1F916} "),d(),c(3,"div")(4,"h3",129),u(5),d(),c(6,"p",130),u(7),d()()(),c(8,"div",131)(9,"div",132)(10,"div",133),u(11),d(),c(12,"div",134),u(13,"Rating"),d()(),c(14,"div",135)(15,"div",133),u(16),d(),c(17,"div",134),u(18,"Reviews"),d()(),c(19,"div",135)(20,"div",133),u(21),d(),c(22,"div",134),u(23,"Status"),d()()(),c(24,"div",136),u(25),d()),r&2){let e,i,n,o,a,l,s=f(2);m(5),S(" ",(e=s.agentInfo())==null||e.identity==null?null:e.identity.name," "),m(2),K((i=s.agentInfo())==null||i.identity==null?null:i.identity.description),m(4),S(" ",((n=s.agentInfo())==null||n.reputation==null||n.reputation.averageRating==null?null:n.reputation.averageRating.toFixed(1))||"0.0"," "),m(5),S(" ",((o=s.agentInfo())==null||o.reputation==null?null:o.reputation.totalFeedbacks)||0," "),m(5),S(" ",!((a=s.agentInfo())==null||a.identity==null)&&a.identity.active?"ON":"OFF"," "),m(4),S(" ",(l=s.agentInfo())==null||l.identity==null?null:l.identity.agentAddress," ")}}function wa(r,t){if(r&1){let e=L();c(0,"div",119),b("click",function(){k(e);let n=f();return _(n.toggleAgentInfoModal())}),c(1,"div",120),b("click",function(n){return k(e),_(n.stopPropagation())}),c(2,"div",121)(3,"div",122)(4,"h2",123),u(5),O(6,"transloco"),d(),c(7,"button",124),b("click",function(){k(e);let n=f();return _(n.toggleAgentInfoModal())}),c(8,"mat-icon"),u(9,"close"),d()()(),c(10,"div",125),A(11,ka,1,0,"mat-progress-spinner",126)(12,_a,26,6),d()()()()}if(r&2){let e=f();m(5),S(" ",H(6,2,"chat.agentInfo.title")," "),m(6),y(e.isLoadingAgentInfo()?11:12)}}function Ca(r,t){if(r&1&&(c(0,"div",140),q(1,"img",152),d()),r&2){let e=f(2);m(),z("src",e.walletQrCode(),X)}}function ya(r,t){if(r&1){let e=L();c(0,"div",119),b("click",function(){k(e);let n=f();return _(n.toggleWalletModal())}),c(1,"div",137),b("click",function(n){return k(e),_(n.stopPropagation())}),c(2,"button",138),b("click",function(){k(e);let n=f();return _(n.toggleWalletModal())}),c(3,"mat-icon"),u(4,"close"),d()(),c(5,"h2",139),u(6),O(7,"transloco"),d(),A(8,Ca,2,1,"div",140),c(9,"div",141)(10,"label",142),u(11,"Address"),d(),c(12,"div",143)(13,"code",144),u(14),d(),c(15,"button",145),b("click",function(){k(e);let n=f();return _(n.copyAddress())}),c(16,"mat-icon",146),u(17,"content_copy"),d()()()(),c(18,"div",147)(19,"label",142),u(20,"Balance"),d(),c(21,"div",148),u(22),O(23,"number"),c(24,"span",149),u(25,"AVAX"),d()()(),c(26,"button",150),b("click",function(){k(e);let n=f();return _(n.refreshBalance())}),u(27,"Refresh"),d(),c(28,"button",151),b("click",function(){k(e);let n=f();return _(n.resetWallet())}),u(29," Reset Wallet "),d()()()}if(r&2){let e=f();m(6),S(" ",H(7,4,"chat.walletModal.title")," "),m(2),y(e.walletQrCode()?8:-1),m(6),K(e.walletAddress()),m(8),S(" ",ae(23,6,e.walletBalance(),"1.4-4")," ")}}function va(r,t){if(r&1&&(c(0,"div",38)(1,"mat-icon",153),u(2,"check_circle"),d(),u(3),d()),r&2){let e=f();m(3),S(" ",e.toastMessage()," ")}}var Ji=(()=>{class r{constructor(e,i,n){this.http=e,this.walletService=i,this._matDialog=n,this.window=window,this.baseUrl=Je.baseUrl,this.smartAgentUrl=Je.smartAgentUrl,this.apiUrl=`${Je.smartAgentUrl}/api/agent`,this.messages=C([]),this.userInput=C(""),this.isLoading=C(!1),this.walletAddress=C(""),this.walletBalance=C("0"),this.showWalletModal=C(!1),this.chatMode=C("x402"),this.showAgentInfoModal=C(!1),this.agentInfo=C(null),this.isLoadingAgentInfo=C(!1),this.agentCardUrl=`${this.apiUrl}/agent-card.json`,this.showPaymentConfirmationModal=C(!1),this.pendingPayment=C(null),this.isProcessingPayment=C(!1),this.showPaymentDetails=C(!1),this.lastPaymentTx=C(null),this.thinkingSteps=C([]),this.currentThinkingStep=C(""),this.conversations=C([]),this.currentConversationId=C(null),this.isSidebarOpen=C(!0),this.isRenamingId=C(null),this.renameInput=C(""),this.pendingAttachments=C([]),this.walletQrCode=C(""),this.showToast=C(!1),this.toastMessage=C(""),this.previewImage=C(null)}ngOnInit(){return F(this,null,function*(){this.walletAddress.set(this.walletService.getAddress()),yield this.refreshBalance();let e=this.walletAddress(),i=localStorage.getItem("lastWalletAddress");e!==i&&(console.log("Wallet changed, clearing session."),localStorage.removeItem("currentConversationId"),localStorage.setItem("lastWalletAddress",e||""),this.currentConversationId.set(null)),this.loadAgentInfo();let n=localStorage.getItem("chatMode"),o=!!this.walletService.getAddress(),a=!!localStorage.getItem("accessToken"),l=parseFloat(this.walletBalance()||"0");n&&(n==="x402"&&o||n==="credits"&&a)?this.chatMode.set(n):a&&!o?this.setChatMode("credits"):o&&a?l<.01?this.setChatMode("credits"):this.setChatMode("x402"):o&&this.setChatMode("x402"),this.loadConversations();let s=localStorage.getItem("currentConversationId");s?this.selectConversation(s):this.startNewChat(!1)})}loadConversations(){let e={};this.chatMode()==="x402"&&this.walletAddress()?e.walletAddress=this.walletAddress():this.chatMode()==="credits"&&(e.walletAddress=this.getUserId()),this.http.get(`${this.apiUrl}/conversations`,{params:e}).subscribe({next:i=>this.conversations.set(i),error:i=>console.error("Failed to load conversations",i)})}selectConversation(e){this.currentConversationId.set(e),localStorage.setItem("currentConversationId",e),this.isLoading.set(!0);let i="";this.chatMode()==="x402"?i=this.walletAddress():i=this.getUserId();let n={walletAddress:i};this.http.get(`${this.apiUrl}/history/${e}`,{params:n}).subscribe({next:o=>{this.messages.set(o.messages||[]),this.isLoading.set(!1),this.scrollToBottom()},error:o=>{console.error("Failed to load history",o),(o.status===403||o.status===404)&&(localStorage.removeItem("currentConversationId"),this.currentConversationId.set(null),this.messages.set([])),this.isLoading.set(!1)}})}startNewChat(e=!0){e&&localStorage.removeItem("currentConversationId"),this.currentConversationId.set(null),this.userInput.set(""),this.pendingAttachments.set([]),this.thinkingSteps.set([]),this.currentThinkingStep.set(""),this.isLoading.set(!1),this.messages.set([]);let i=this.agentInfo()?.identity,n=i?`Hello! I am ${i.name}. ${i.description} How can I assist you today?`:"Hello! I am your Verifik AI Agent powered by Gemini. I can help you validate identities using the x402 protocol on Avalanche. How can I assist you today?";if(this.messages.set([{role:"assistant",content:n}]),e){let o={mode:this.chatMode(),walletAddress:this.chatMode()==="credits"?this.getUserId():this.walletAddress()};this.http.post(`${this.apiUrl}/conversations`,o).subscribe({next:a=>{this.currentConversationId.set(a.id),localStorage.setItem("currentConversationId",a.id),this.loadConversations()},error:a=>console.error("Failed to create new chat",a)})}}startRenaming(e,i){i.stopPropagation(),this.isRenamingId.set(e.id),this.renameInput.set(e.title)}saveRename(e){let i=this.renameInput().trim();if(!i||i===e.title){this.isRenamingId.set(null);return}let n="";this.chatMode()==="x402"?n=this.walletAddress():n=this.getUserId(),this.http.patch(`${this.apiUrl}/conversations/${e.id}`,{title:i,walletAddress:n}).subscribe({next:()=>{this.conversations.update(o=>o.map(a=>a.id===e.id?Z($({},a),{title:i}):a)),this.isRenamingId.set(null)},error:o=>console.error("Rename failed",o)})}deleteConversation(e,i){if(i.stopPropagation(),!confirm("Delete this chat?"))return;let n="";this.chatMode()==="x402"?n=this.walletAddress():n=this.getUserId(),this.http.delete(`${this.apiUrl}/conversations/${e.id}`,{params:{walletAddress:n}}).subscribe({next:()=>{this.conversations.update(o=>o.filter(a=>a.id!==e.id)),this.currentConversationId()===e.id&&this.startNewChat()},error:o=>console.error("Delete failed",o)})}toggleSidebar(){this.isSidebarOpen.update(e=>!e)}loadAgentInfo(){return F(this,null,function*(){this.isLoadingAgentInfo.set(!0);try{this.http.get(`${this.apiUrl}/info`).subscribe({next:e=>{this.agentInfo.set(e),this.isLoadingAgentInfo.set(!1)},error:e=>{console.warn("Failed to load agent info:",e),this.isLoadingAgentInfo.set(!1)}})}catch(e){console.warn("Error loading agent info:",e),this.isLoadingAgentInfo.set(!1)}})}toggleAgentInfoModal(){this.showAgentInfoModal.update(e=>!e)}openAuthModal(){this._matDialog.open(vn,{panelClass:"auth-modal-dialog",width:"400px",maxWidth:"100vw"})}setChatMode(e){this.chatMode.set(e),localStorage.setItem("chatMode",e),this.currentConversationId.set(null),localStorage.removeItem("currentConversationId"),this.messages.set([]),this.refreshBalance(),this.loadConversations(),this.startNewChat(!1)}onPaste(e){return F(this,null,function*(){let i=e.clipboardData?.items;if(i){for(let n=0;n<i.length;n++)if(i[n].type.indexOf("image")!==-1){let o=i[n].getAsFile();if(o){let a=yield this.fileToBase64(o);this.pendingAttachments.update(l=>[...l,a])}}}})}onFileSelected(e){let i=e.target;i.files&&Array.from(i.files).forEach(n=>F(this,null,function*(){let o=yield this.fileToBase64(n);this.pendingAttachments.update(a=>[...a,o])})),i.value=""}removeAttachment(e){this.pendingAttachments.update(i=>i.filter((n,o)=>o!==e))}fileToBase64(e){return new Promise((i,n)=>{let o=new FileReader;o.readAsDataURL(e),o.onload=()=>i(o.result),o.onerror=a=>n(a)})}sendMessage(){return F(this,null,function*(){let e=this.userInput(),i=this.pendingAttachments();if(!e.trim()&&i.length===0)return;let n=this.chatMode()==="credits",o=!!this.walletService.getAddress(),a=!!localStorage.getItem("accessToken");if(!o&&!a){this.openAuthModal();return}if(!n&&!o){this.openAuthModal();return}if(n&&!a){this.openAuthModal();return}let l={role:"user",content:e,images:i};this.messages.update(s=>[...s,l]),this.userInput.set(""),this.pendingAttachments.set([]),this.isLoading.set(!0),this.scrollToBottom(),this.startThinkingSimulation();try{yield this.callAgent(e,null,null,i)}catch(s){this.handleError(s)}})}callAgent(a){return F(this,arguments,function*(e,i=null,n=null,o=[]){let l=this.chatMode()==="credits",s=l?localStorage.getItem("accessToken"):null,p={message:e,conversationId:this.currentConversationId(),paymentTx:l?null:i,paymentWallet:l?this.getUserId():this.walletAddress(),paymentAmount:l?null:n,mode:this.chatMode(),userToken:s,images:o};this.http.post(`${this.apiUrl}/chat`,p).subscribe({next:h=>{this.isLoading.set(!1),this.thinkingSteps.set([]),this.currentThinkingStep.set(""),h.conversationId&&!this.currentConversationId()&&(this.currentConversationId.set(h.conversationId),localStorage.setItem("currentConversationId",h.conversationId),this.loadConversations());let x={role:h.role,content:h.content,tool_call:h.tool_call,payment_required:h.payment_required,data:h.data,proof:h.proof,images:h.images};if(this.messages.update(g=>[...g,x]),this.scrollToBottom(),x.data&&x.role==="assistant"){let g=this.messages().find(w=>w.role==="system"&&w.content.includes("TX:"));if(g){let w=g.content.match(/TX: (0x[a-fA-F0-9]+)/);w&&this.lastPaymentTx.set(w[1])}}},error:h=>{this.handleError(h)}})})}startThinkingSimulation(){let e=["agentThinking.steps.analysing","agentThinking.steps.identifying","agentThinking.steps.checking","agentThinking.steps.consulting","agentThinking.steps.preparing"];this.thinkingSteps.set([]),this.currentThinkingStep.set("agentThinking.header");let i=0,n=setInterval(()=>{if(!this.isLoading()||i>=e.length){clearInterval(n);return}let o=e[i];this.thinkingSteps.update(a=>[...a,o]),this.currentThinkingStep.set(o),this.scrollToBottom(),i++},800)}openFeedbackModal(){this._matDialog.open(Wi,{panelClass:"agent-feedback-dialog",backdropClass:"backdrop-blur-sm",data:{agentTokenId:1,paymentTxHash:this.lastPaymentTx()}}).afterClosed().subscribe(i=>F(this,null,function*(){if(i&&i.success){this.messages.update(n=>[...n,{role:"system",content:`Feedback submitted! Transaction: ${i.txHash}. Waiting for confirmation...`}]),this.scrollToBottom();try{yield i.tx.wait(),this.messages.update(n=>n.map(o=>o.role==="system"&&o.content.includes(i.txHash)&&o.content.includes("Waiting")?Z($({},o),{content:`Feedback submitted! Transaction: ${i.txHash}. Validated.`}):o)),this.scrollToBottom(),yield this.loadAgentInfo()}catch(n){console.error("Transaction confirmation error:",n),this.messages.update(o=>[...o,{role:"system",content:"\u26A0\uFE0F Transaction was sent but confirmation failed. Please check the explorer."}]),this.scrollToBottom()}}else i&&i.error&&this.handleError(i.error)}))}refreshBalance(){this.walletService.getBalance().then(e=>this.walletBalance.set(e))}getImageUrl(e){return e?e.startsWith("http")||e.startsWith("data:")?e:e.startsWith("/api")?`${this.smartAgentUrl}${e}`:`${this.baseUrl}${e}`:""}getUserId(){try{let i=localStorage.getItem("verifik_account");if(i){let n=JSON.parse(i);if(n&&n._id)return n._id}}catch{console.warn("Failed to parse verifik_account from local storage")}let e=localStorage.getItem("accessToken");if(!e)return"";try{let i=JSON.parse(atob(e.split(".")[1]));return i.clientId||i._id||i.id||i.sub||"authenticated_user"}catch(i){return console.error("Failed to parse token",i),"authenticated_user"}}togglePaymentDetails(){this.showPaymentDetails.update(e=>!e)}confirmPayment(e){let i=this.messages()[e];if(!i.payment_required)return;this._matDialog.open(Qi,{panelClass:"payment-confirmation-dialog",backdropClass:"backdrop-blur-sm",data:{amount:i.payment_required.amount,currentBalance:this.walletBalance(),receiver:i.payment_required.receiver_address,endpoint:i.payment_required.endpoint||i.payment_required.toolName||"Unknown",details:i.payment_required.details}}).afterClosed().subscribe(o=>F(this,null,function*(){o&&(yield this.executePayment(i.payment_required))}))}executePayment(e){return F(this,null,function*(){this.isProcessingPayment.set(!0);let i=e.amount,n=e.receiver_address,o=e.serviceId||"cedula-validation",a=e.requestId||`req_${Date.now()}`;try{let{tx:l}=yield this.walletService.payForService(n,o,a,i);this.messages.update(s=>[...s,{role:"system",content:`Payment sent! TX: ${l.hash}. Waiting for confirmation...`}]),yield l.wait(),this.lastPaymentTx.set(l.hash),this.messages.update(s=>s.map(p=>p.role==="system"&&p.content.includes(l.hash)&&p.content.includes("Waiting")?Z($({},p),{content:`Payment sent! TX: ${l.hash}. Confirmed.`}):p)),this.isLoading.set(!0),this.startThinkingSimulation(),yield this.callAgent("Payment complete. Please proceed.",l.hash,i),yield this.refreshBalance()}catch(l){this.handleError(l)}finally{this.isProcessingPayment.set(!1)}})}handleError(e){this.isLoading.set(!1),console.error(e),this.messages.update(i=>[...i,{role:"system",content:"Error: "+(e.message||"Something went wrong")}]),this.scrollToBottom()}toggleWalletModal(){this.showWalletModal.update(e=>!e),this.showWalletModal()&&this.walletAddress()&&this.generateQrCode(this.walletAddress())}generateQrCode(e){Zi.toDataURL(e,{width:200,margin:1},(i,n)=>{i||this.walletQrCode.set(n)})}openImagePreview(e){this.previewImage.set(e)}closeImagePreview(){this.previewImage.set(null)}copyAddress(){return F(this,null,function*(){try{yield navigator.clipboard.writeText(this.walletAddress()),this.showToastNotification("Address copied to clipboard!")}catch(e){console.error(e)}})}showToastNotification(e){this.toastMessage.set(e),this.showToast.set(!0),setTimeout(()=>this.showToast.set(!1),3e3)}resetWallet(){return F(this,null,function*(){confirm("Are you sure you want to reset your wallet?")&&(this.walletService.resetWallet(),this.walletAddress.set(""),localStorage.setItem("lastWalletAddress",""),this.startNewChat(!0),this.conversations.set([]),yield this.refreshBalance(),this.showWalletModal.set(!1))})}scrollToBottom(){setTimeout(()=>{this.scrollContainer&&(this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight)},100)}extractTxHash(e){if(!e)return null;let i=e.match(/Transaction: (0x[a-fA-F0-9]+)/);return i?i[1]:null}static{this.\u0275fac=function(i){return new(i||r)(D(mn),D(nt),D(fn))}}static{this.\u0275cmp=fe({type:r,selectors:[["app-chat"]],viewQuery:function(i,n){if(i&1&&sn(Vo,5),i&2){let o;ln(o=cn())&&(n.scrollContainer=o.first)}},decls:64,vars:49,consts:[["scrollContainer",""],["fileInput",""],[1,"flex","h-screen","w-full","bg-white","dark:bg-slate-900","overflow-hidden","relative"],[1,"w-[280px]","bg-slate-50","dark:bg-slate-950","border-r","border-slate-200","dark:border-slate-800","flex","flex-col","transition-all","duration-300","shrink-0","z-20"],[1,"h-16","px-4","border-b","border-slate-200","dark:border-slate-800","flex","items-center","justify-between","shadow-sm","z-10"],[1,"flex","items-center","gap-2","font-bold","text-slate-700","dark:text-slate-200"],[1,"text-slate-500"],["matTooltip","New Chat",1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","hover:bg-slate-200","dark:hover:bg-slate-800","transition-colors","text-slate-600","dark:text-slate-400",3,"click"],[1,"flex-1","overflow-y-auto","p-3","space-y-1"],[1,"text-center","py-8","text-slate-400","text-sm"],[1,"group","flex","items-center","justify-between","p-3","rounded-xl","cursor-pointer","transition-all","border","border-transparent",3,"bg-white","dark:bg-slate-900","shadow-sm","border-slate-200","dark:border-slate-800","hover:bg-slate-200","dark:hover:bg-slate-900"],[1,"flex-1","flex","flex-col","h-full","min-w-0","relative","bg-white","dark:bg-slate-900"],[1,"h-16","border-b","border-slate-200","dark:border-slate-800","bg-white/80","dark:bg-slate-900/80","backdrop-blur-md","px-4","flex","items-center","justify-between","shrink-0","z-10"],[1,"flex","items-center","gap-3"],[1,"p-2","rounded-lg","hover:bg-slate-100","dark:hover:bg-slate-800","text-slate-500",3,"click"],[1,"flex","items-center","gap-3","cursor-pointer","group",3,"click"],[1,"w-9","h-9","rounded-full","bg-slate-900","text-white","flex","items-center","justify-center","font-bold","text-xs","shadow-sm","relative","group-hover:scale-105","transition-transform"],[1,"absolute","-bottom-0.5","-right-0.5","w-2.5","h-2.5","bg-green-500","border-2","border-white","rounded-full"],[1,"font-bold","text-slate-900","dark:text-white","text-sm","group-hover:text-blue-600","transition-colors"],[1,"text-[10px]","text-slate-500","font-medium","hidden","sm:block"],[1,"flex","items-center","bg-slate-100","dark:bg-slate-800","rounded-lg","p-0.5","border","border-slate-200","dark:border-slate-700","hidden","sm:flex"],[1,"px-3","py-1.5","rounded-md","text-xs","font-medium","transition-all",3,"click"],[1,"flex","items-center","gap-2","px-3","py-1.5","rounded-full","bg-slate-50","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","cursor-pointer","hover:border-slate-300","transition-colors","hover:shadow-sm"],[1,"flex-1","overflow-y-auto","messages-container","p-4","scroll-smooth"],[1,"max-w-4xl","mx-auto","space-y-6","pb-4"],[1,"message","flex","gap-4"],[1,"border-t","border-slate-200","dark:border-slate-800","bg-white","dark:bg-slate-900","p-4","shrink-0","z-10"],[1,"max-w-4xl","mx-auto","mb-3","pl-12"],[1,"max-w-4xl","mx-auto","flex","gap-3","items-center","relative"],["type","file","hidden","","multiple","","accept","image/*",3,"change"],["mat-icon-button","","matTooltip","Attach image",1,"text-slate-400","hover:text-slate-600","dark:hover:text-slate-200","transition-colors",3,"click"],["type","text",1,"flex-1","h-12","pl-4","pr-12","rounded-xl","border","border-slate-200","dark:border-slate-700","bg-slate-50","dark:bg-slate-800","text-slate-900","dark:text-white","focus:ring-2","focus:ring-slate-900/10","focus:border-slate-400","outline-none","transition-all","placeholder:text-slate-400","shadow-sm",3,"ngModelChange","keyup.enter","paste","ngModel","placeholder"],[1,"absolute","right-2","top-2","h-8","w-8","flex","items-center","justify-center","rounded-lg","bg-slate-900","text-white","hover:bg-slate-700","disabled:opacity-50","disabled:bg-slate-200","disabled:text-slate-400","transition-all","shadow-md",3,"click","disabled"],["mode","indeterminate","diameter","16","color","accent"],[1,"!w-4","!h-4","!text-[16px]"],[1,"text-center","mt-2","text-[10px]","text-slate-400"],[1,"fixed","inset-0","z-[70]","flex","items-center","justify-center","bg-black/90","backdrop-blur-md","p-4","animate-fadeIn"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-slate-900/50","backdrop-blur-sm","p-4","animate-fadeIn"],[1,"fixed","bottom-6","left-1/2","transform","-translate-x-1/2","z-[60]","bg-slate-800","text-white","px-4","py-2","rounded-full","shadow-lg","flex","items-center","gap-2","text-sm","animate-slideUpFade"],[1,"group","flex","items-center","justify-between","p-3","rounded-xl","cursor-pointer","transition-all","border","border-transparent",3,"click"],["type","text",1,"w-full","text-sm","bg-white","dark:bg-slate-900","border","border-blue-500","rounded","px-2","py-1","outline-none",3,"ngModel"],["type","text",1,"w-full","text-sm","bg-white","dark:bg-slate-900","border","border-blue-500","rounded","px-2","py-1","outline-none",3,"ngModelChange","click","blur","keyup.enter","ngModel"],[1,"flex-1","min-w-0","pr-2"],[1,"truncate","text-sm","font-medium","text-slate-700","dark:text-slate-300"],[1,"text-[10px]","text-slate-400","mt-0.5"],[1,"opacity-0","group-hover:opacity-100","flex","gap-1","transition-opacity"],[1,"p-1","hover:bg-blue-50","dark:hover:bg-blue-900/30","rounded","text-slate-400","hover:text-blue-500","transition-colors",3,"click"],[1,"!w-4","!h-4","!text-[16px]","leading-none","flex","items-center","justify-center"],[1,"p-1","hover:bg-red-50","dark:hover:bg-red-900/30","rounded","text-slate-400","hover:text-red-500","transition-colors",3,"click"],[1,"flex","items-center","gap-2","px-3","py-1.5","rounded-full","bg-slate-50","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","cursor-pointer","hover:border-slate-300","transition-colors","hover:shadow-sm",3,"click"],[1,"text-xs","font-medium","text-slate-600","dark:text-slate-300","font-mono"],[1,"w-6","h-6","rounded-full","bg-blue-100","dark:bg-blue-900/30","flex","items-center","justify-center","text-blue-600","dark:text-blue-400"],[1,"!w-3.5","!h-3.5","!text-[14px]"],[1,"message","flex","gap-4","animate-fadeIn"],[1,"flex","justify-center","my-4","animate-fadeIn"],[1,"message","flex","gap-4","animate-fadeIn",3,"flex-row-reverse"],[1,"w-8","h-8","rounded-full","flex-shrink-0","flex","items-center","justify-center","text-xs","font-bold","bg-slate-200","text-slate-700","dark:bg-slate-700","dark:text-slate-50"],[1,"max-w-[85%]","sm:max-w-lg","w-full"],[1,"bg-white","dark:bg-slate-800","rounded-2xl","rounded-tl-sm","p-4","shadow-sm","border","border-slate-200","dark:border-slate-700","w-full"],[1,"flex","flex-wrap","items-center","justify-between","mb-3","pb-3","border-b","border-slate-100","dark:border-slate-700","gap-2"],[1,"flex","items-center","gap-2"],[1,"w-6","h-6","rounded-full","bg-yellow-100","flex","items-center","justify-center"],[1,"text-yellow-600","!w-4","!h-4","!text-[16px]"],[1,"text-sm","font-bold","text-slate-800","dark:text-white"],[1,"flex","items-center","gap-1.5","text-xs","font-semibold","text-amber-600","bg-amber-50","px-2","py-1","rounded-lg","border","border-amber-100"],[1,"flex","items-center","gap-1.5","text-xs","font-semibold","text-emerald-600","bg-emerald-50","px-2","py-1","rounded-lg","border","border-emerald-100"],[1,"space-y-3"],[1,"text-sm","text-slate-600","dark:text-slate-300"],[1,"flex","flex-col","gap-1.5"],["diameter","12","mode","indeterminate",1,"mr-1"],[1,"!w-3","!h-3","!text-[12px]"],[1,"text-[10px]","uppercase","tracking-wider","font-semibold","text-slate-400"],["target","_blank",1,"group","flex","items-center","justify-between","p-2.5","bg-slate-50","dark:bg-slate-900","rounded-lg","border","border-slate-200","dark:border-slate-700","hover:border-blue-300","hover:bg-blue-50/50","transition-all","cursor-pointer","text-decoration-none",3,"href"],[1,"font-mono","text-xs","text-slate-600","dark:text-slate-400","truncate","mr-2"],[1,"flex","items-center","gap-1","text-slate-400","group-hover:text-blue-500"],[1,"text-[10px]","font-bold"],[1,"flex","items-center","gap-2","px-4","py-2","bg-emerald-50","border","border-emerald-100","text-emerald-800","rounded-full","text-sm","font-medium","shadow-sm"],[1,"w-6","h-6","rounded-full","bg-blue-50","dark:bg-blue-900/20","flex","items-center","justify-center"],[1,"text-blue-600","dark:text-blue-400","!w-4","!h-4","!text-[16px]"],[1,"px-2","py-0.5","rounded-full","bg-slate-100","dark:bg-slate-700","text-slate-500","text-[10px]","font-bold","uppercase","tracking-wider"],[1,"w-8","h-8","rounded-full","flex-shrink-0","flex","items-center","justify-center","text-xs","font-bold"],[1,"!w-4","!h-4","!text-[16px]","flex","items-center","justify-center"],[1,"max-w-[85%]"],[1,"message-bubble","p-4","rounded-2xl","shadow-sm","border"],[1,"markdown-body","text-sm","leading-relaxed","whitespace-pre-wrap","font-sans",3,"innerHTML"],[1,"flex","flex-wrap","gap-2","mt-3"],[1,"mt-4","p-4","bg-slate-50","dark:bg-slate-900/50","rounded-xl","border","border-slate-200","dark:border-slate-700"],[1,"max-w-[200px]","h-auto","rounded-lg","border","border-slate-200","dark:border-slate-700","cursor-pointer","hover:opacity-90","transition-opacity",3,"src"],[1,"max-w-[200px]","h-auto","rounded-lg","border","border-slate-200","dark:border-slate-700","cursor-pointer","hover:opacity-90","transition-opacity",3,"click","src"],[1,"flex","items-center","gap-2","mb-2","text-slate-900","dark:text-white","font-semibold"],[1,"text-amber-500"],[1,"text-xl","font-bold","mb-2","text-slate-800","dark:text-slate-100"],[1,"text-xs","text-slate-500","mb-3","break-all","font-mono"],["mat-flat-button","","color","primary",1,"w-full",3,"click"],[1,"mt-3","p-3","bg-slate-100","dark:bg-slate-950","rounded-lg","text-xs","font-mono","overflow-x-auto","border","border-slate-200","dark:border-slate-800"],[1,"whitespace-pre-wrap"],[1,"mt-3","p-3","bg-green-50","dark:bg-green-900/20","border","border-green-200","dark:border-green-800","rounded-lg","flex","items-center","justify-between"],[1,"mt-3","text-xs","text-slate-400","hover:text-yellow-500","flex","items-center","gap-1","transition-colors"],[1,"w-6","h-6","rounded-full","bg-green-100","text-green-600","flex","items-center","justify-center"],[1,"text-xs","text-green-800","dark:text-green-300","font-medium"],["target","_blank",1,"text-xs","text-green-600","hover:underline","flex","items-center","gap-1",3,"href"],[1,"mt-3","text-xs","text-slate-400","hover:text-yellow-500","flex","items-center","gap-1","transition-colors",3,"click"],[1,"w-8","h-8","rounded-full","bg-slate-900","text-white","flex-shrink-0","flex","items-center","justify-center","text-xs","font-bold"],[1,"message-bubble","p-4","rounded-2xl","rounded-tl-sm","bg-white","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","shadow-sm"],[1,"flex","items-center","gap-1.5"],[1,"w-1.5","h-1.5","bg-slate-400","rounded-full","animate-bounce"],[1,"w-1.5","h-1.5","bg-slate-400","rounded-full","animate-bounce","delay-150"],[1,"w-1.5","h-1.5","bg-slate-400","rounded-full","animate-bounce","delay-300"],[1,"mt-2","text-xs","text-slate-400","border-t","border-slate-100","dark:border-slate-700","pt-2","animate-fadeIn"],[1,"flex","gap-3","overflow-x-auto","pb-2"],[1,"relative","group","w-20","h-20","shrink-0","cursor-zoom-in"],[1,"relative","group","w-20","h-20","shrink-0","cursor-zoom-in",3,"click"],[1,"w-full","h-full","object-cover","rounded-xl","border","border-slate-200","dark:border-slate-700","shadow-sm",3,"src"],[1,"absolute","top-1","right-1","w-6","h-6","bg-black/50","hover:bg-red-500","text-white","rounded-full","flex","items-center","justify-center","backdrop-blur-sm","transition-colors","shadow-sm",3,"click"],[1,"!w-4","!h-4","!text-[14px]","flex","items-center","justify-center"],[1,"fixed","inset-0","z-[70]","flex","items-center","justify-center","bg-black/90","backdrop-blur-md","p-4","animate-fadeIn",3,"click"],[1,"absolute","top-4","right-4","text-white/70","hover:text-white","transition-colors",3,"click"],[1,"!w-8","!h-8","!text-[32px]"],[1,"max-w-full","max-h-[90vh]","rounded-lg","shadow-2xl","animate-scaleIn","object-contain",3,"click","src"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-slate-900/50","backdrop-blur-sm","p-4","animate-fadeIn",3,"click"],[1,"bg-white","dark:bg-slate-900","w-full","max-w-lg","rounded-2xl","shadow-xl","max-h-[90vh]","overflow-y-auto",3,"click"],[1,"p-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","dark:text-white"],[1,"text-slate-400","hover:text-slate-600",3,"click"],[1,"space-y-4"],["mode","indeterminate","diameter","30"],[1,"flex","items-start","gap-4"],[1,"w-16","h-16","rounded-full","bg-slate-100","flex","items-center","justify-center","text-2xl"],[1,"font-bold","text-lg","dark:text-white"],[1,"text-sm","text-slate-500"],[1,"grid","grid-cols-3","gap-2","bg-slate-50","dark:bg-slate-800","p-3","rounded-lg"],[1,"text-center"],[1,"font-bold","text-xl","dark:text-white"],[1,"text-[10px]","text-slate-500","uppercase"],[1,"text-center","border-l","border-slate-200","dark:border-slate-700"],[1,"p-3","bg-slate-50","dark:bg-slate-800","rounded-lg","text-xs","font-mono","break-all","text-slate-600","dark:text-slate-300"],[1,"w-full","max-w-sm","mx-auto","p-6","bg-white","dark:bg-slate-900","rounded-2xl","shadow-2xl","relative","animate-slideUp",3,"click"],[1,"absolute","right-4","top-4","text-slate-400","hover:text-slate-600",3,"click"],[1,"text-xl","font-bold","mb-4","dark:text-white"],[1,"flex","justify-center","mb-4"],[1,"mb-4"],[1,"text-xs","text-slate-500","uppercase"],[1,"p-3","bg-slate-50","dark:bg-slate-800","rounded-lg","flex","gap-2","items-center"],[1,"text-xs","flex-1","break-all","dark:text-slate-300"],[3,"click"],[1,"text-slate-400","hover:text-blue-500","!w-4","!h-4","text-[16px]"],[1,"mb-6"],[1,"text-3xl","font-bold","dark:text-white"],[1,"text-sm","font-normal","text-slate-400"],["mat-stroked-button","",1,"w-full","mb-2",3,"click"],["mat-stroked-button","","color","warn",1,"w-full",3,"click"],[1,"w-32","h-32","rounded-lg","border",3,"src"],[1,"!w-4","!h-4","text-[16px]"]],template:function(i,n){if(i&1){let o=L();c(0,"div",2)(1,"aside",3)(2,"div",4)(3,"div",5)(4,"mat-icon",6),u(5,"history"),d(),c(6,"span"),u(7,"Your Chats"),d()(),c(8,"button",7),b("click",function(){return k(o),_(n.startNewChat())}),c(9,"mat-icon"),u(10,"add_circle_outline"),d()()(),c(11,"div",8),A(12,Do,2,0,"div",9),ee(13,jo,3,15,"div",10,No),d()(),c(15,"main",11)(16,"div",12)(17,"div",13)(18,"button",14),b("click",function(){return k(o),_(n.toggleSidebar())}),c(19,"mat-icon"),u(20),d()(),c(21,"div",15),b("click",function(){return k(o),_(n.toggleAgentInfoModal())}),c(22,"div",16),u(23," AI "),A(24,Ho,1,0,"div",17),d(),c(25,"div")(26,"div",18),u(27),d(),c(28,"div",19),u(29),O(30,"transloco"),d()()()(),c(31,"div",13)(32,"div",20)(33,"button",21),b("click",function(){return k(o),_(n.setChatMode("credits"))}),u(34),O(35,"transloco"),d(),c(36,"button",21),b("click",function(){return k(o),_(n.setChatMode("x402"))}),u(37," x402 "),d()(),A(38,Wo,7,4,"div",22),d()(),c(39,"div",23,0)(41,"div",24),ee(42,ua,4,1,null,null,Qe),A(44,pa,9,1,"div",25),d()(),c(45,"div",26),A(46,ga,4,0,"div",27),c(47,"div",28)(48,"input",29,1),b("change",function(l){return k(o),_(n.onFileSelected(l))}),d(),c(50,"button",30),b("click",function(){k(o);let l=dn(49);return _(l.click())}),c(51,"mat-icon"),u(52,"attach_file"),d()(),c(53,"input",31),O(54,"transloco"),Re("ngModelChange",function(l){return k(o),Pe(n.userInput,l)||(n.userInput=l),_(l)}),b("keyup.enter",function(){return k(o),_(n.sendMessage())})("paste",function(l){return k(o),_(n.onPaste(l))}),d(),c(55,"button",32),b("click",function(){return k(o),_(n.sendMessage())}),A(56,fa,1,0,"mat-progress-spinner",33)(57,xa,2,0,"mat-icon",34),d()(),c(58,"div",35),u(59," Verifik Agent can make mistakes. Verify important information. "),d()()(),A(60,ba,5,1,"div",36)(61,wa,13,4,"div",37)(62,ya,30,9,"div",37)(63,va,4,1,"div",38),d()}if(i&2){let o,a;m(),U("-ml-[280px]",!n.isSidebarOpen()),m(11),y(n.conversations().length===0?12:-1),m(),te(n.conversations()),m(7),K(n.isSidebarOpen()?"menu_open":"menu"),m(4),y((o=n.agentInfo())!=null&&o.identity?24:-1),m(3),S(" ",((a=n.agentInfo())==null||a.identity==null?null:a.identity.name)||"Verifik Agent"," "),m(2),S(" ",H(30,43,"chat.header.subtitle")," "),m(4),U("bg-white",n.chatMode()==="credits")("text-slate-900",n.chatMode()==="credits")("shadow-sm",n.chatMode()==="credits")("dark:bg-slate-700",n.chatMode()==="credits")("dark:text-white",n.chatMode()==="credits")("text-slate-500",n.chatMode()!=="credits"),m(),S(" ",H(35,45,"chat.mode.credits")," "),m(2),U("bg-white",n.chatMode()==="x402")("text-slate-900",n.chatMode()==="x402")("shadow-sm",n.chatMode()==="x402")("dark:bg-slate-700",n.chatMode()==="x402")("dark:text-white",n.chatMode()==="x402")("text-slate-500",n.chatMode()!=="x402"),m(2),y(n.chatMode()==="x402"&&n.walletAddress()?38:-1),m(4),te(n.messages()),m(2),y(n.isLoading()?44:-1),m(2),y(n.pendingAttachments().length>0?46:-1),m(7),Ae("ngModel",n.userInput),z("placeholder",H(54,47,"chat.inputPlaceholder")),m(2),z("disabled",n.isLoading()||!n.userInput().trim()&&n.pendingAttachments().length===0),m(),y(n.isLoading()?56:57),m(4),y(n.previewImage()?60:-1),m(),y(n.showAgentInfoModal()?61:-1),m(),y(n.showWalletModal()?62:-1),m(),y(n.showToast()?63:-1)}},dependencies:[xe,pn,Ze,hn,tt,Ye,Xe,et,Ce,we,_e,ke,xn,yn,Cn,wn,_n,kn,bn,be,Ui],styles:[".message[_ngcontent-%COMP%]{display:flex;animation:_ngcontent-%COMP%_fadeIn .3s ease-out;width:100%}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_slideUpFade{0%{opacity:0;transform:translate(-50%,20px)}to{opacity:1;transform:translate(-50%)}}.markdown-body[_ngcontent-%COMP%]{font-family:Inter,system-ui,sans-serif;line-height:1.6}.markdown-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.75rem}.markdown-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.markdown-body[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#0000001a;padding:.2em .4em;border-radius:4px;font-family:monospace;font-size:.85em}.markdown-body[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#1e293b;color:#e2e8f0;padding:1rem;border-radius:8px;overflow-x:auto;margin:1rem 0}.markdown-body[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:none;padding:0;color:inherit}.markdown-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .markdown-body[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin-left:1.5rem;margin-bottom:1rem;list-style-type:disc}.markdown-body[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700;color:inherit}.markdown-body[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .markdown-body[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .markdown-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .markdown-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;margin-top:1.5rem;margin-bottom:.5rem;line-height:1.3}.markdown-body[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.markdown-body[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}.markdown-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#94a3b880;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8cc}.dark[_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .dark   [_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#47556980}.animate-fadeIn[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.animate-slideUp[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1) forwards}.animate-slideUpFade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUpFade .3s cubic-bezier(.16,1,.3,1) forwards}.animate-bounce[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 1s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.delay-150[_ngcontent-%COMP%]{animation-delay:.15s}.delay-300[_ngcontent-%COMP%]{animation-delay:.3s}"]})}}return r})();var el=[{path:"",component:Ji}];export{el as default};
