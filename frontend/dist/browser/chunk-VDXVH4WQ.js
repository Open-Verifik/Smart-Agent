import{a as tt,b as et,c as it}from"./chunk-XNSJH4YT.js";import{a as nt}from"./chunk-RMLZJYUH.js";import{a as at}from"./chunk-QBCI64VH.js";import"./chunk-RWGVQTSA.js";import{a as K,b as Q,c as W,d as X}from"./chunk-2VLOPLLR.js";import{a as Y,b as Z}from"./chunk-XQDPKUEO.js";import{a as q,b as J}from"./chunk-DLAWIIUM.js";import{a as N,c as O,d as G}from"./chunk-IHQN5EVA.js";import{d as R,i as P}from"./chunk-YGFCFPCR.js";import"./chunk-7OJEUY43.js";import"./chunk-2NRSUFHY.js";import"./chunk-YM2RJPUK.js";import{U as z,V as j,X as A,Z as U,_ as H}from"./chunk-AFVGM62N.js";import{Cb as k,Db as w,Eb as n,Fb as a,Ga as I,Gb as E,Kb as B,Mb as f,Nb as _,Wa as o,Wb as L,Xb as r,Yb as g,Yc as F,Zb as s,Zc as $,_b as M,cd as D,fb as y,ga as T,lb as v,oc as p,pc as m,qa as h,qc as V,ra as C,sb as b,zb as x}from"./chunk-DCQLSIRV.js";import"./chunk-MG3ERZGY.js";function ot(t,d){let e;return(e=d._id)!==null&&e!==void 0?e:d.id}var lt=(t,d)=>d._id;function ct(t,d){if(t&1){let e=B();n(0,"button",10),f("click",function(){h(e);let i=_();return C(i.createConfiguration())}),n(1,"mat-icon",11),r(2,"add"),a(),r(3),p(4,"transloco"),a()}t&2&&(o(3),s(" ",m(4,1,"smartBatchLanding.createConfiguration")," "))}function pt(t,d){t&1&&(n(0,"button",12),p(1,"transloco"),n(2,"mat-icon",11),r(3,"add"),a(),r(4),p(5,"transloco"),a()),t&2&&(b("matTooltip",m(1,2,"smartBatchLanding.createTemplateFirstHint")),o(4),s(" ",m(5,4,"smartBatchLanding.createTemplate")," "))}function mt(t,d){if(t&1){let e=B();n(0,"button",10),f("click",function(){let i;h(e);let c=_(2);return C(c.createTemplate((i=(i=c.configurations()[0]._id)!==null&&i!==void 0?i:c.configurations()[0].id)!==null&&i!==void 0?i:""))}),n(1,"mat-icon",11),r(2,"add"),a(),r(3),p(4,"transloco"),a()}t&2&&(o(3),s(" ",m(4,1,"smartBatchLanding.createTemplate")," "))}function dt(t,d){if(t&1){let e=B();n(0,"button",16),f("click",function(){let i,c=h(e).$implicit,u=_(3);return C(u.createTemplate((i=(i=c._id)!==null&&i!==void 0?i:c.id)!==null&&i!==void 0?i:""))}),r(1),a()}if(t&2){let e=d.$implicit;o(),s(" ",e.name," ")}}function st(t,d){if(t&1&&(n(0,"button",13)(1,"mat-icon",11),r(2,"add"),a(),r(3),p(4,"transloco"),n(5,"mat-icon",14),r(6,"arrow_drop_down"),a()(),n(7,"mat-menu",null,0),k(9,dt,2,1,"button",15,ot),a()),t&2){let e=L(8),l=_(2);b("matMenuTriggerFor",e),o(3),s(" ",m(4,2,"smartBatchLanding.createTemplate")," "),o(6),w(l.configurations())}}function _t(t,d){if(t&1&&v(0,pt,6,6,"button",12)(1,mt,5,3,"button",9)(2,st,11,4),t&2){let e=_();x(e.configurations().length===0?0:e.configurations().length===1?1:2)}}function ut(t,d){t&1&&(n(0,"div",17),E(1,"mat-spinner",20),n(2,"p",21),r(3),p(4,"transloco"),a()()),t&2&&(o(3),s(" ",m(4,1,"smartBatchLanding.loadingConfigurations")," "))}function xt(t,d){if(t&1){let e=B();n(0,"div",18)(1,"div",22)(2,"mat-icon",23),r(3,"layers"),a()(),n(4,"h3",24),r(5),p(6,"transloco"),a(),n(7,"p",25),r(8),p(9,"transloco"),a(),n(10,"button",26),f("click",function(){h(e);let i=_(2);return C(i.createConfiguration())}),r(11),p(12,"transloco"),a()()}t&2&&(o(5),s(" ",m(6,3,"smartBatchLanding.noConfigurations")," "),o(3),s(" ",m(9,5,"smartBatchLanding.noConfigurationsDesc")," "),o(3),s(" ",m(12,7,"smartBatchLanding.createFirstConfiguration")," "))}function ft(t,d){t&1&&(n(0,"span",39),r(1),p(2,"transloco"),a()),t&2&&(o(),s(" ",m(2,1,"smartBatchLanding.inactive")," "))}function gt(t,d){if(t&1){let e=B();n(0,"div",28),f("click",function(){let i,c=h(e).$implicit,u=_(3);return C(u.openDashboard((i=(i=c._id)!==null&&i!==void 0?i:c.id)!==null&&i!==void 0?i:""))}),n(1,"div",29)(2,"button",30),p(3,"transloco"),f("click",function(i){let c,u=h(e).$implicit,S=_(3);return C(S.editConfiguration((c=(c=u._id)!==null&&c!==void 0?c:u.id)!==null&&c!==void 0?c:"",i))}),n(4,"mat-icon",31),r(5,"edit"),a()(),n(6,"button",32),p(7,"transloco"),f("click",function(i){let c,u=h(e).$implicit,S=_(3);return C(S.deleteConfiguration((c=(c=u._id)!==null&&c!==void 0?c:u.id)!==null&&c!==void 0?c:"",i))}),n(8,"mat-icon",31),r(9,"delete"),a()()(),n(10,"div",33)(11,"div",34)(12,"span",35),r(13),a(),n(14,"div")(15,"h3",36),r(16),a(),n(17,"div",37)(18,"span",38),r(19),p(20,"uppercase"),p(21,"uppercase"),a(),v(22,ft,3,3,"span",39),a()()()(),n(23,"p",40),r(24),p(25,"transloco"),a(),n(26,"div",41)(27,"div")(28,"span",42),r(29),p(30,"transloco"),a(),n(31,"span",43),r(32),a()(),n(33,"div")(34,"span",42),r(35),p(36,"transloco"),a(),n(37,"span",44),r(38),a()()()()}if(t&2){let e=d.$implicit,l=_(3);o(2),b("matTooltip",m(3,12,"smartBatchLanding.edit")),o(4),b("matTooltip",m(7,14,"smartBatchLanding.delete")),o(7),g(l.getCountryFlag(e.country)),o(3),s(" ",e.name," "),o(3),M(" ",m(20,16,e.inputFormat)," \u2192 ",m(21,18,e.outputFormat)," "),o(3),x(e.isActive?-1:22),o(2),s(" ",e.description||m(25,20,"smartBatchLanding.noDescription")," "),o(5),g(m(30,22,"smartBatchLanding.steps")),o(3),g(e.steps.length),o(3),g(m(36,24,"smartBatchLanding.strategy")),o(3),g(e.mergeStrategy.replace("-"," "))}}function ht(t,d){if(t&1&&(n(0,"div",19),k(1,gt,39,26,"div",27,ot),a()),t&2){let e=_(2);o(),w(e.configurations())}}function Ct(t,d){if(t&1&&v(0,ut,5,3,"div",17)(1,xt,13,9,"div",18)(2,ht,3,0,"div",19),t&2){let e=_();x(e.isLoading()?0:e.configurations().length===0?1:2)}}function vt(t,d){t&1&&(n(0,"div",17),E(1,"mat-spinner",20),n(2,"p",21),r(3),p(4,"transloco"),a()()),t&2&&(o(3),s(" ",m(4,1,"smartBatchLanding.loadingTemplates")," "))}function bt(t,d){t&1&&(n(0,"div",18)(1,"div",22)(2,"mat-icon",23),r(3,"description"),a()(),n(4,"h3",24),r(5),p(6,"transloco"),a(),n(7,"p",45),r(8),p(9,"transloco"),a(),n(10,"p",46),r(11),p(12,"transloco"),a()()),t&2&&(o(5),s(" ",m(6,3,"smartBatchLanding.noTemplates")," "),o(3),s(" ",m(9,5,"smartBatchLanding.noTemplatesDesc")," "),o(3),s(" ",m(12,7,"smartBatchLanding.noTemplatesHint")," "))}function Bt(t,d){if(t&1&&(n(0,"span",38),r(1),a()),t&2){let e=_().$implicit;o(),s(" ",e.pageSize," ")}}function St(t,d){if(t&1&&r(0),t&2){let e=_().$implicit,l=_(3);s(" ",l.getConfigName(e.batchConfiguration)," ")}}function Tt(t,d){t&1&&(r(0),p(1,"transloco")),t&2&&s(" ",m(1,1,"smartBatchLanding.standalone")," ")}function kt(t,d){if(t&1&&(n(0,"p",52),r(1),p(2,"date"),a()),t&2){let e=_().$implicit;o(),s(" ",V(2,1,e.createdAt,"medium")," ")}}function wt(t,d){if(t&1){let e=B();n(0,"div",47)(1,"div",29)(2,"button",30),p(3,"transloco"),f("click",function(i){let c=h(e).$implicit,u=_(3);return C(u.openTemplateEditor(c,i))}),n(4,"mat-icon",31),r(5,"edit"),a()(),n(6,"button",32),p(7,"transloco"),f("click",function(i){let c,u=h(e).$implicit,S=_(3);return C(S.deleteTemplate((c=u._id)!==null&&c!==void 0?c:"",i))}),n(8,"mat-icon",31),r(9,"delete"),a()()(),n(10,"h3",48),r(11),a(),n(12,"div",49)(13,"span",38),r(14),p(15,"uppercase"),a(),v(16,Bt,2,1,"span",38),a(),n(17,"p",50),r(18),p(19,"transloco"),a(),n(20,"div",41)(21,"div")(22,"span",42),r(23),p(24,"transloco"),a(),n(25,"span",43),r(26),a()(),n(27,"div")(28,"span",42),r(29),p(30,"transloco"),a(),n(31,"span",51),v(32,St,1,1)(33,Tt,2,3),a()()(),v(34,kt,3,4,"p",52),a()}if(t&2){let e,l,i=d.$implicit;o(2),b("matTooltip",m(3,11,"smartBatchLanding.edit")),o(4),b("matTooltip",m(7,13,"smartBatchLanding.delete")),o(5),s(" ",i.name," "),o(3),s(" ",m(15,15,(e=i.pdfEngine)!==null&&e!==void 0?e:"pdfkit")," "),o(2),x(i.pageSize?16:-1),o(2),s(" ",i.description||m(19,17,"smartBatchLanding.noDescription")," "),o(5),g(m(24,19,"smartBatchLanding.sections")),o(3),g((l=i.sections==null?null:i.sections.length)!==null&&l!==void 0?l:0),o(3),g(m(30,21,"smartBatchLanding.linkedTo")),o(3),x(i.batchConfiguration?32:33),o(2),x(i.createdAt?34:-1)}}function Et(t,d){if(t&1&&(n(0,"div",19),k(1,wt,35,23,"div",47,lt),a()),t&2){let e=_(2);o(),w(e.templates())}}function It(t,d){if(t&1&&v(0,vt,5,3,"div",17)(1,bt,13,9,"div",18)(2,Et,3,0,"div",19),t&2){let e=_();x(e.isLoadingTemplates()?0:e.templates().length===0?1:2)}}var rt=(()=>{class t{constructor(){this._smartBatchService=T(nt),this._smartReportService=T(at),this._router=T(R),this._transloco=T(N),this.configurations=this._smartBatchService.configurations,this.isLoading=this._smartBatchService.isLoading,this.activeTab=I("configurations"),this.templates=this._smartReportService.templates,this.isLoadingTemplates=this._smartReportService.isLoading}ngOnInit(){this._smartBatchService.getConfigurations().subscribe({next:()=>{},error:e=>console.error("[SmartBatch] getConfigurations error",e)}),this._smartReportService.getTemplates().subscribe({error:e=>console.error("[SmartBatch] getTemplates error",e)})}setActiveTab(e){this.activeTab.set(e)}createConfiguration(){this._router.navigate(["smart-batch/create"])}createTemplate(e){e&&this._router.navigate(["smart-batch",e,"report-builder"])}deleteConfiguration(e,l){l.stopPropagation(),confirm("Are you sure you want to delete this configuration?")&&this._smartBatchService.deleteConfiguration(e).subscribe()}deleteTemplate(e,l){l.stopPropagation();let i=this._transloco.translate("smartBatchLanding.deleteConfirmation");confirm(i)&&this._smartReportService.deleteTemplate(e).subscribe()}openTemplateEditor(e,l){l.stopPropagation();let i=e.batchConfiguration;if(!i){alert("This template is not linked to a configuration. Open it from a configuration's report builder.");return}let c=e._id??e.id??"";c&&this._router.navigate(["smart-batch",i,"report-builder",c])}getConfigName(e){return this.configurations().find(i=>(i._id??i.id)===e)?.name??e}editConfiguration(e,l){l.stopPropagation(),this._router.navigate(["smart-batch/edit",e])}openDashboard(e){let l=`/smart-batch/${e}`;if(!e){console.warn("[SmartBatch] openDashboard: id is falsy, skipping navigation");return}this._router.navigateByUrl(l).then(i=>{i||console.warn("[SmartBatch] navigateByUrl returned false - route may not have matched")},i=>{console.error("[SmartBatch] navigateByUrl failed",{targetUrl:l,err:i})})}getCountryFlag(e){let l={colombia:"\u{1F1E8}\u{1F1F4}",col:"\u{1F1E8}\u{1F1F4}",co:"\u{1F1E8}\u{1F1F4}","united states":"\u{1F1FA}\u{1F1F8}",usa:"\u{1F1FA}\u{1F1F8}",us:"\u{1F1FA}\u{1F1F8}",peru:"\u{1F1F5}\u{1F1EA}",pe:"\u{1F1F5}\u{1F1EA}",world:"\u{1F310}",mexico:"\u{1F1F2}\u{1F1FD}",mx:"\u{1F1F2}\u{1F1FD}",brazil:"\u{1F1E7}\u{1F1F7}",br:"\u{1F1E7}\u{1F1F7}",chile:"\u{1F1E8}\u{1F1F1}",cl:"\u{1F1E8}\u{1F1F1}",argentina:"\u{1F1E6}\u{1F1F7}",ar:"\u{1F1E6}\u{1F1F7}",ecuador:"\u{1F1EA}\u{1F1E8}",ec:"\u{1F1EA}\u{1F1E8}",venezuela:"\u{1F1FB}\u{1F1EA}",ve:"\u{1F1FB}\u{1F1EA}",bolivia:"\u{1F1E7}\u{1F1F4}",bo:"\u{1F1E7}\u{1F1F4}",uruguay:"\u{1F1FA}\u{1F1FE}",uy:"\u{1F1FA}\u{1F1FE}",paraguay:"\u{1F1F5}\u{1F1FE}",py:"\u{1F1F5}\u{1F1FE}",panama:"\u{1F1F5}\u{1F1E6}",pa:"\u{1F1F5}\u{1F1E6}","costa rica":"\u{1F1E8}\u{1F1F7}",cr:"\u{1F1E8}\u{1F1F7}",guatemala:"\u{1F1EC}\u{1F1F9}",gt:"\u{1F1EC}\u{1F1F9}",honduras:"\u{1F1ED}\u{1F1F3}",hn:"\u{1F1ED}\u{1F1F3}","el salvador":"\u{1F1F8}\u{1F1FB}",sv:"\u{1F1F8}\u{1F1FB}","dominican republic":"\u{1F1E9}\u{1F1F4}","rep\xFAblica dominicana":"\u{1F1E9}\u{1F1F4}","republica dominicana":"\u{1F1E9}\u{1F1F4}",do:"\u{1F1E9}\u{1F1F4}",canada:"\u{1F1E8}\u{1F1E6}",ca:"\u{1F1E8}\u{1F1E6}",spain:"\u{1F1EA}\u{1F1F8}",es:"\u{1F1EA}\u{1F1F8}"},i=(e||"").trim().toLowerCase();return l[i]??"\u{1F3F3}\uFE0F"}static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275cmp=y({type:t,selectors:[["smart-batch"]],decls:21,vars:17,consts:[["createTemplateMenu","matMenu"],[1,"flex","flex-col","w-full","h-full","bg-[#f8fafc]","dark:bg-[#0f172a]","p-6","gap-6"],[1,"text-2xl","font-bold","tracking-tight","text-slate-900","dark:text-white"],[1,"mt-1","text-slate-500","dark:text-slate-400"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-4"],[1,"!rounded-lg",3,"change","value"],["value","configurations"],["value","templates"],[1,"flex","gap-2"],["mat-flat-button","","color","primary",1,"!rounded-lg","!px-6","!py-2"],["mat-flat-button","","color","primary",1,"!rounded-lg","!px-6","!py-2",3,"click"],[1,"mr-2","icon-size-5"],["mat-flat-button","","color","primary","disabled","",1,"!rounded-lg","!px-6","!py-2",3,"matTooltip"],["mat-flat-button","","color","primary",1,"!rounded-lg","!px-6","!py-2",3,"matMenuTriggerFor"],[1,"ml-2","icon-size-5"],["mat-menu-item",""],["mat-menu-item","",3,"click"],[1,"flex","flex-col","items-center","justify-center","flex-1"],[1,"flex","flex-col","items-center","justify-center","flex-1","border-2","border-dashed","border-slate-200","dark:border-slate-800","rounded-2xl","p-12","text-center"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["diameter","48"],[1,"mt-4","text-slate-500"],[1,"w-20","h-20","bg-slate-50","dark:bg-slate-900","rounded-full","flex","items-center","justify-center","mb-6"],[1,"text-slate-400","icon-size-10"],[1,"text-lg","font-medium","text-slate-900","dark:text-white"],[1,"text-slate-500","dark:text-slate-400","max-w-sm","mt-2","mb-6"],["mat-stroked-button","","color","primary",3,"click"],[1,"group","relative","bg-white","dark:bg-slate-900","rounded-2xl","border","border-slate-200","dark:border-slate-800","p-6","transition-all","hover:shadow-md","hover:border-blue-500/50","cursor-pointer"],[1,"group","relative","bg-white","dark:bg-slate-900","rounded-2xl","border","border-slate-200","dark:border-slate-800","p-6","transition-all","hover:shadow-md","hover:border-blue-500/50","cursor-pointer",3,"click"],[1,"absolute","top-4","right-4","opacity-0","group-hover:opacity-100","transition-opacity","flex","gap-1"],["mat-icon-button","",3,"click","matTooltip"],[1,"icon-size-5"],["mat-icon-button","","color","warn",3,"click","matTooltip"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-center","gap-3"],[1,"text-2xl"],[1,"font-semibold","text-slate-900","dark:text-white","line-clamp-1"],[1,"flex","items-center","gap-2","mt-0.5"],[1,"text-xs","font-medium","px-2","py-0.5","rounded-full","bg-slate-100","dark:bg-slate-800","text-slate-600","dark:text-slate-400"],[1,"text-xs","font-medium","px-2","py-0.5","rounded-full","bg-red-100","dark:bg-red-900/30","text-red-600","dark:text-red-400"],[1,"text-sm","text-slate-500","dark:text-slate-400","mb-6","line-clamp-2","min-h-[2.5rem]"],[1,"grid","grid-cols-2","gap-4","pt-4","border-t","border-slate-100","dark:border-slate-800"],[1,"block","text-xs","text-slate-400","font-medium","uppercase","tracking-wider"],[1,"text-lg","font-semibold","text-slate-900","dark:text-white"],[1,"text-sm","font-medium","text-slate-700","dark:text-slate-300","capitalize","truncate"],[1,"text-slate-500","dark:text-slate-400","max-w-sm","mt-2"],[1,"text-slate-400","dark:text-slate-500","text-sm","max-w-sm","mt-2"],[1,"group","relative","bg-white","dark:bg-slate-900","rounded-2xl","border","border-slate-200","dark:border-slate-800","p-6","transition-all","hover:shadow-md","hover:border-blue-500/50"],[1,"font-semibold","text-slate-900","dark:text-white","line-clamp-1","pr-16"],[1,"flex","flex-wrap","gap-2","mt-2"],[1,"text-sm","text-slate-500","dark:text-slate-400","mt-4","mb-4","line-clamp-2","min-h-[2.5rem]"],[1,"text-sm","font-medium","text-slate-700","dark:text-slate-300","truncate","block"],[1,"text-xs","text-slate-400","mt-3"]],template:function(l,i){l&1&&(n(0,"div",1)(1,"div")(2,"h1",2),r(3),p(4,"transloco"),a(),n(5,"p",3),r(6),p(7,"transloco"),a()(),n(8,"div",4)(9,"mat-button-toggle-group",5),f("change",function(u){return i.setActiveTab(u.value)}),n(10,"mat-button-toggle",6),r(11),p(12,"transloco"),a(),n(13,"mat-button-toggle",7),r(14),p(15,"transloco"),a()(),n(16,"div",8),v(17,ct,5,3,"button",9)(18,_t,3,1),a()(),v(19,Ct,3,1)(20,It,3,1),a()),l&2&&(o(3),s(" ",m(4,9,"smartBatchLanding.title")," "),o(3),s(" ",m(7,11,"smartBatchLanding.subtitle")," "),o(3),b("value",i.activeTab()),o(2),g(m(12,13,"smartBatchLanding.configurationsTab")),o(3),g(m(15,15,"smartBatchLanding.reportTemplatesTab")),o(3),x(i.activeTab()==="configurations"?17:-1),o(),x(i.activeTab()==="templates"?18:-1),o(),x(i.activeTab()==="configurations"?19:-1),o(),x(i.activeTab()==="templates"?20:-1))},dependencies:[D,F,$,G,O,P,A,j,z,it,tt,et,X,Q,K,W,H,U,J,q,Z,Y],encapsulation:2})}}return t})();var te=[{path:"",component:rt},{path:"create",loadComponent:()=>import("./chunk-BIWCRF4N.js").then(t=>t.CreateBatchConfigComponent)},{path:"edit/:id",loadComponent:()=>import("./chunk-BIWCRF4N.js").then(t=>t.CreateBatchConfigComponent)},{path:":configId",loadComponent:()=>import("./chunk-HCEYVSPY.js").then(t=>t.BatchDashboardComponent)},{path:":configId/batch/new",loadComponent:()=>import("./chunk-JW2ZGRI5.js").then(t=>t.CreateBatchComponent)},{path:":configId/batch/:batchId",loadComponent:()=>import("./chunk-JBIFUFTC.js").then(t=>t.BatchProcessingComponent)},{path:":configId/report-builder",loadComponent:()=>import("./chunk-3EQXKSUY.js").then(t=>t.ReportBuilderComponent)},{path:":configId/report-builder/:templateId",loadComponent:()=>import("./chunk-3EQXKSUY.js").then(t=>t.ReportBuilderComponent)},{path:":configId/batch/:batchId/report",loadComponent:()=>import("./chunk-O4AQCRXZ.js").then(t=>t.ReportViewerComponent)}];export{te as default};
