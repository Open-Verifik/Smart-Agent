import{a as mt,b as ct}from"./chunk-V4WDSBZU.js";import{a as ut,b as _t,c as gt}from"./chunk-ZHZ2M2HW.js";import{a as at,b as lt,c as pt,d as st,e as dt}from"./chunk-BDKC4BTW.js";import{a as rt}from"./chunk-NROCMDI2.js";import{j as Xe}from"./chunk-QQNGCN5G.js";import"./chunk-SB3LRQOP.js";import"./chunk-NJIOGT5G.js";import"./chunk-3RK6DDJD.js";import{a as nt,b as ot}from"./chunk-LLQ6WMTJ.js";import"./chunk-QD66ZOCP.js";import{a as tt,b as it}from"./chunk-OYMRB6S7.js";import"./chunk-VC5VKYY6.js";import"./chunk-7RWCIHFI.js";import{c as Ze,d as et}from"./chunk-IEVXMBCH.js";import{a as ke,c as Ee,d as Te,e as Be,f as Ie,g as De,h as Y}from"./chunk-BJAZCYPM.js";import{a as je,b as Oe}from"./chunk-53WRULVM.js";import{a as Me,c as Le,d as Ae}from"./chunk-YTRC6VXI.js";import{b as we,d as Se,i as Re}from"./chunk-QIQIZ3Q6.js";import{e as Pe}from"./chunk-DHV22PVR.js";import{d as Ve,l as Fe,m as Ne}from"./chunk-CTJ3YQQD.js";import"./chunk-ZAUDAUJV.js";import{B as qe,b as Ye,c as $e,e as K,h as ze,i as He,m as We,p as Ue,r as Ke,s as Ge,y as Je,z as Qe}from"./chunk-QWR6CIPV.js";import"./chunk-MVN6OMHF.js";import{U as $,V as z,X as H,Z as W,_ as U}from"./chunk-KMUH6FME.js";import{$c as Ce,Bb as ue,Cb as M,Db as L,Dc as q,Eb as n,Fb as o,Ga as E,Gb as k,Kb as y,Mb as x,Nb as m,Rb as _e,Sa as G,Sb as ge,Tb as xe,Wa as r,Xb as l,Yb as h,Zb as f,_b as O,bd as ye,cd as X,fb as j,ga as T,gc as he,hc as fe,ic as ve,lb as R,oc as s,pc as d,qa as _,qc as Q,ra as g,rc as be,sb as v,tb as J,ub as I,zb as C}from"./chunk-BMVGBJ55.js";import{a as B,b as A}from"./chunk-66YHNWRR.js";function Z(a,u=""){let e=[];for(let[i,t]of Object.entries(a)){let p=u?`${u}.${i}`:i;if(t!=null&&typeof t=="object"&&!Array.isArray(t))e.push({path:p,value:"",type:"object"}),e.push(...Z(t,p));else{let c=t==null?"\u2014":typeof t=="string"?t:Array.isArray(t)?JSON.stringify(t):String(t);e.push({path:p,value:c.length>60?c.slice(0,60)+"\u2026":c,type:"leaf"})}}return e}function xt(a){let u=[];return a.inputData&&Object.keys(a.inputData).length>0&&(u.push({path:"inputData",value:"",type:"object"}),u.push(...Z(a.inputData,"inputData"))),a.results&&Object.keys(a.results).length>0&&(u.push({path:"results",value:"",type:"object"}),u.push(...Z(a.results,"results"))),u}var Ct=["canvas"],ht=(()=>{class a{constructor(){this._dialogRef=T(ke),this.isDrawing=!1,this.lastX=0,this.lastY=0,this.scaleX=1,this.scaleY=1}ngAfterViewInit(){let e=this.canvasRef.nativeElement,i=e.getBoundingClientRect(),t=e.getContext("2d");t&&(this.ctx=t,this.scaleX=e.width/i.width,this.scaleY=e.height/i.height,this.ctx.lineWidth=2,this.ctx.lineCap="round",this.ctx.strokeStyle="#000000")}startDrawing(e){this.isDrawing=!0;let i=this.canvasRef.nativeElement.getBoundingClientRect();this.scaleX=this.canvasRef.nativeElement.width/i.width,this.scaleY=this.canvasRef.nativeElement.height/i.height,this.lastX=(e.clientX-i.left)*this.scaleX,this.lastY=(e.clientY-i.top)*this.scaleY}draw(e){if(!this.isDrawing)return;let i=this.canvasRef.nativeElement.getBoundingClientRect(),t=(e.clientX-i.left)*this.scaleX,p=(e.clientY-i.top)*this.scaleY;this._drawLine(this.lastX,this.lastY,t,p),this.lastX=t,this.lastY=p}startDrawingTouch(e){e.cancelable&&e.preventDefault(),this.isDrawing=!0;let i=this.canvasRef.nativeElement.getBoundingClientRect();this.scaleX=this.canvasRef.nativeElement.width/i.width,this.scaleY=this.canvasRef.nativeElement.height/i.height;let t=e.touches[0];this.lastX=(t.clientX-i.left)*this.scaleX,this.lastY=(t.clientY-i.top)*this.scaleY}drawTouch(e){if(e.cancelable&&e.preventDefault(),!this.isDrawing)return;let i=this.canvasRef.nativeElement.getBoundingClientRect(),t=e.touches[0],p=(t.clientX-i.left)*this.scaleX,c=(t.clientY-i.top)*this.scaleY;this._drawLine(this.lastX,this.lastY,p,c),this.lastX=p,this.lastY=c}stopDrawing(){this.isDrawing=!1}clearCanvas(){let e=this.canvasRef.nativeElement;this.ctx.clearRect(0,0,e.width,e.height)}save(){let e=this.canvasRef.nativeElement.toDataURL("image/png");this._dialogRef.close(e)}_drawLine(e,i,t,p){this.ctx.beginPath(),this.ctx.moveTo(e,i),this.ctx.lineTo(t,p),this.ctx.stroke()}static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275cmp=j({type:a,selectors:[["signature-pad-dialog"]],viewQuery:function(i,t){if(i&1&&_e(Ct,5),i&2){let p;ge(p=xe())&&(t.canvasRef=p.first)}},decls:16,vars:0,consts:[["canvas",""],["mat-dialog-title","",1,"flex","items-center","justify-between"],["mat-icon-button","","mat-dialog-close",""],[1,"border","border-gray-300","rounded-lg","overflow-hidden","bg-white","touch-none"],["width","600","height","300",1,"block","w-full","h-auto","cursor-crosshair",3,"mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend"],[1,"text-xs","text-gray-500","mt-2","text-center"],["align","end",1,"gap-2"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(i,t){if(i&1){let p=y();n(0,"h2",1),l(1," Draw Signature "),n(2,"button",2)(3,"mat-icon"),l(4,"close"),o()()(),n(5,"mat-dialog-content")(6,"div",3)(7,"canvas",4,0),x("mousedown",function(b){return _(p),g(t.startDrawing(b))})("mousemove",function(b){return _(p),g(t.draw(b))})("mouseup",function(){return _(p),g(t.stopDrawing())})("mouseleave",function(){return _(p),g(t.stopDrawing())})("touchstart",function(b){return _(p),g(t.startDrawingTouch(b))})("touchmove",function(b){return _(p),g(t.drawTouch(b))})("touchend",function(){return _(p),g(t.stopDrawing())}),o()(),n(9,"p",5),l(10," Use your mouse or finger to sign above. "),o()(),n(11,"mat-dialog-actions",6)(12,"button",7),x("click",function(){return _(p),g(t.clearCanvas())}),l(13,"Clear"),o(),n(14,"button",8),x("click",function(){return _(p),g(t.save())}),l(15,"Save Signature"),o()()}},dependencies:[X,H,z,$,Y,Te,Be,De,Ie,U,W],styles:["canvas[_ngcontent-%COMP%]{touch-action:none}"]})}}return a})();var yt=(a,u)=>({sections:a,primaryColor:u}),wt=a=>({num:a}),St=()=>["left","center","right"],Rt=(a,u)=>u.type,kt=(a,u)=>u.id,Et=(a,u)=>u.path;function Tt(a,u){a&1&&(n(0,"mat-icon",74),l(1,"refresh"),o(),l(2),s(3,"transloco")),a&2&&(r(2),f(" ",d(3,1,"smartReport.sendingSample")," "))}function Bt(a,u){a&1&&(n(0,"mat-icon",75),l(1,"send"),o(),l(2),s(3,"transloco")),a&2&&(r(2),f(" ",d(3,1,"smartReport.sendSample")," "))}function It(a,u){a&1&&(n(0,"mat-icon",74),l(1,"refresh"),o(),l(2),s(3,"transloco")),a&2&&(r(2),f(" ",d(3,1,"smartReport.saving")," "))}function Dt(a,u){a&1&&(n(0,"mat-icon",75),l(1,"save"),o(),l(2),s(3,"transloco")),a&2&&(r(2),f(" ",d(3,1,"smartReport.saveTemplate")," "))}function Pt(a,u){if(a&1){let e=y();n(0,"div",4),k(1,"img",76),n(2,"button",77),x("click",function(){_(e);let t=m();return g(t.removeLogo())}),l(3),s(4,"transloco"),o()()}if(a&2){let e=m();r(),v("src",e.logoUrl(),G),r(2),f(" ",d(4,2,"smartReport.remove")," ")}}function Vt(a,u){if(a&1){let e=y();n(0,"label",78)(1,"mat-icon",79),l(2,"upload"),o(),l(3),s(4,"transloco"),n(5,"input",80),x("change",function(t){_(e);let p=m();return g(p.onLogoUpload(t))}),o()(),n(6,"p",81),l(7,"PNG, JPG, SVG \xB7 max 500KB"),o()}a&2&&(r(3),f(" ",d(4,1,"smartReport.uploadLogo")," "))}function Ft(a,u){a&1&&(n(0,"mat-form-field",43)(1,"mat-label"),l(2),s(3,"transloco"),o(),n(4,"mat-select",82)(5,"mat-option",83),l(6,"\u2196 Top Left"),o(),n(7,"mat-option",84),l(8,"\u2191 Top Center"),o(),n(9,"mat-option",85),l(10,"\u2197 Top Right"),o(),n(11,"mat-option",86),l(12,"\u2199 Bottom Left"),o(),n(13,"mat-option",87),l(14,"\u2193 Bottom Center"),o(),n(15,"mat-option",88),l(16,"\u2198 Bottom Right"),o()()()),a&2&&(r(2),h(d(3,1,"smartReport.pageNumberPosition")))}function Nt(a,u){a&1&&(n(0,"div"),k(1,"input",96),s(2,"transloco"),o()),a&2&&(r(),v("placeholder",d(2,1,"smartReport.watermarkTextPlaceholder")))}function Mt(a,u){a&1&&(n(0,"p",91),l(1),s(2,"transloco"),o()),a&2&&(r(),f(" ",d(2,1,"smartReport.watermarkLogoHint")," "))}function Lt(a,u){if(a&1){let e=y();n(0,"div",45)(1,"div",89)(2,"button",90),x("click",function(){let t;_(e);let p=m();return g((t=p.templateForm.get("watermarkType"))==null?null:t.setValue("text"))}),l(3),s(4,"transloco"),o(),n(5,"button",90),x("click",function(){let t;_(e);let p=m();return g((t=p.templateForm.get("watermarkType"))==null?null:t.setValue("logo"))}),l(6),s(7,"transloco"),o()(),R(8,Nt,3,3,"div")(9,Mt,3,3,"p",91),n(10,"div")(11,"div",92)(12,"label",64),l(13),s(14,"transloco"),o(),n(15,"span",93),l(16),s(17,"number"),o()(),k(18,"input",94),o(),n(19,"div")(20,"label",95),l(21),s(22,"transloco"),o(),n(23,"div",89)(24,"button",90),x("click",function(){let t;_(e);let p=m();return g((t=p.templateForm.get("watermarkPattern"))==null?null:t.setValue("single"))}),l(25),s(26,"transloco"),o(),n(27,"button",90),x("click",function(){let t;_(e);let p=m();return g((t=p.templateForm.get("watermarkPattern"))==null?null:t.setValue("repeated"))}),l(28),s(29,"transloco"),o()()()()}if(a&2){let e,i,t,p,c,b,w,D,P,V,F,S=m();r(2),I("bg-indigo-50",((e=S.templateForm.get("watermarkType"))==null?null:e.value)==="text")("border-indigo-300",((i=S.templateForm.get("watermarkType"))==null?null:i.value)==="text"),r(),f(" ",d(4,25,"smartReport.watermarkText")," "),r(2),I("bg-indigo-50",((t=S.templateForm.get("watermarkType"))==null?null:t.value)==="logo")("border-indigo-300",((p=S.templateForm.get("watermarkType"))==null?null:p.value)==="logo"),r(),f(" ",d(7,27,"smartReport.watermarkLogo")," "),r(2),C(((c=S.templateForm.get("watermarkType"))==null?null:c.value)==="text"?8:-1),r(),C(((b=S.templateForm.get("watermarkType"))==null?null:b.value)==="logo"&&!S.logoUrl()?9:-1),r(4),h(d(14,29,"smartReport.watermarkOpacity")),r(3),f("",Q(17,31,((w=S.templateForm.get("watermarkOpacity"))==null?null:w.value)*100,"1.0-0"),"%"),r(5),h(d(22,34,"smartReport.watermarkPattern")),r(3),I("bg-indigo-50",((D=S.templateForm.get("watermarkPattern"))==null?null:D.value)==="single")("border-indigo-300",((P=S.templateForm.get("watermarkPattern"))==null?null:P.value)==="single"),r(),f(" ",d(26,36,"smartReport.watermarkSingle")," "),r(2),I("bg-indigo-50",((V=S.templateForm.get("watermarkPattern"))==null?null:V.value)==="repeated")("border-indigo-300",((F=S.templateForm.get("watermarkPattern"))==null?null:F.value)==="repeated"),r(),f(" ",d(29,38,"smartReport.watermarkRepeated")," ")}}function At(a,u){if(a&1){let e=y();n(0,"div",51)(1,"div")(2,"label",95),l(3),s(4,"transloco"),o(),n(5,"div",97),k(6,"input",98),s(7,"transloco"),n(8,"button",99),x("click",function(){_(e);let t=m();return g(t.showPassword=!t.showPassword)}),n(9,"mat-icon",100),l(10),o()()(),n(11,"p",101),l(12),s(13,"transloco"),o()()()}if(a&2){let e=m();r(3),h(d(4,5,"smartReport.securityPassword")),r(3),v("type",e.showPassword?"text":"password")("placeholder",d(7,7,"smartReport.securityPasswordPlaceholder")),r(4),h(e.showPassword?"visibility_off":"visibility"),r(2),f(" ",d(13,9,"smartReport.securityPasswordHint")," ")}}function jt(a,u){if(a&1){let e=y();n(0,"div",103),k(1,"img",104),n(2,"button",105),x("click",function(){_(e);let t=m(2);return g(t.templateForm.patchValue({signatureImage:null}))}),n(3,"mat-icon",100),l(4,"close"),o()()(),n(5,"p",64),l(6," Drag signature in preview to position it. "),o()}if(a&2){let e,i=m(2);r(),v("src",(e=i.templateForm.get("signatureImage"))==null?null:e.value,G)}}function Ot(a,u){if(a&1){let e=y();n(0,"button",106),x("click",function(){_(e);let t=m(2);return g(t.openSignatureDialog())}),n(1,"mat-icon",107),l(2,"edit"),o(),l(3," Draw Signature "),o()}}function Xt(a,u){if(a&1&&(n(0,"div",51),R(1,jt,7,1)(2,Ot,4,0,"button",102),o()),a&2){let e,i=m();r(),C((e=i.templateForm.get("signatureImage"))!=null&&e.value?1:2)}}function Yt(a,u){a&1&&(n(0,"p",56),l(1),s(2,"transloco"),o()),a&2&&(r(),f(" ",d(2,1,"smartReport.openFromReportViewer")," "))}function $t(a,u){if(a&1){let e=y();n(0,"div",108)(1,"code",110),l(2),o(),n(3,"span",111),l(4),o(),n(5,"button",112),s(6,"transloco"),x("click",function(){_(e);let t=m().$implicit,p=m(2);return g(p.copyPathToClipboard(t.path))}),n(7,"mat-icon",113),l(8,"content_copy"),o()()()}if(a&2){let e=m().$implicit;r(2),h(e.path),r(),v("title",e.value),r(),h(e.value),r(),v("matTooltip",d(6,4,"smartReport.copyPath"))}}function zt(a,u){if(a&1){let e=y();n(0,"div",109)(1,"span",39),l(2),o(),n(3,"button",112),s(4,"transloco"),x("click",function(){_(e);let t=m().$implicit,p=m(2);return g(p.copyPathToClipboard(t.path))}),n(5,"mat-icon",113),l(6,"content_copy"),o()()()}if(a&2){let e=m().$implicit;r(2),h(e.path),r(),v("matTooltip",d(4,2,"smartReport.copyPathForTable"))}}function Ht(a,u){if(a&1&&R(0,$t,9,6,"div",108)(1,zt,7,4,"div",109),a&2){let e=u.$implicit;C(e.type==="leaf"?0:1)}}function Wt(a,u){if(a&1&&(n(0,"div",57),M(1,Ht,2,1,null,null,Et),o()),a&2){let e=m();r(),L(e.helperDataPaths())}}function Ut(a,u){if(a&1){let e=y();n(0,"button",114),x("click",function(){let t=_(e).$implicit,p=m();return g(p.addSection(t.type))}),n(1,"mat-icon",115),l(2),o(),l(3),s(4,"transloco"),o()}if(a&2){let e=u.$implicit;r(2),h(e.icon),r(),f(" ",d(4,2,e.labelKey)," ")}}function Kt(a,u){a&1&&(n(0,"div",67)(1,"mat-icon",116),l(2,"add_box"),o(),n(3,"p",117),l(4),s(5,"transloco"),o()()),a&2&&(r(4),f(" ",d(5,1,"smartReport.addSectionsFromAbove")," "))}function Gt(a,u){if(a&1&&l(0),a&2){let e=m().$implicit;f(" ",e.label," ")}}function Jt(a,u){if(a&1&&(l(0),s(1,"slice")),a&2){let e=m().$implicit;O(" ",be(1,2,e.staticContent,0,30),"",e.staticContent.length>30?"...":""," ")}}function Qt(a,u){if(a&1&&l(0),a&2){let e=m().$implicit;f(" ",e.dataPath," ")}}function qt(a,u){if(a&1&&(l(0),s(1,"transloco")),a&2){let e=m().$implicit;f(" ",Q(1,1,"smartReport.sectionNumber",fe(4,wt,e.order+1))," ")}}function Zt(a,u){if(a&1){let e=y();n(0,"div",118),x("click",function(){let t=_(e).$implicit,p=m();return g(p.selectSection(t))}),n(1,"div",119)(2,"mat-icon",120),l(3,"drag_indicator"),o()(),n(4,"div",121)(5,"mat-icon",79),l(6),o()(),n(7,"div",122)(8,"p",123),l(9),o(),n(10,"p",124),R(11,Gt,1,1)(12,Jt,2,6)(13,Qt,1,1)(14,qt,2,6),o()(),n(15,"div",125)(16,"button",126),s(17,"transloco"),x("click",function(t){let p=_(e).$implicit;return m().duplicateSection(p),g(t.stopPropagation())}),n(18,"mat-icon",127),l(19,"content_copy"),o()(),n(20,"button",126),s(21,"transloco"),x("click",function(t){let p=_(e).$implicit;return m().deleteSection(p.id),g(t.stopPropagation())}),n(22,"mat-icon",128),l(23,"delete"),o()()()()}if(a&2){let e,i,t,p,c,b=u.$implicit,w=m();I("ring-2",((e=w.currentSelectedSection())==null?null:e.id)===b.id)("ring-indigo-500",((i=w.currentSelectedSection())==null?null:i.id)===b.id)("bg-indigo-50",((t=w.currentSelectedSection())==null?null:t.id)===b.id),r(4),J("background",((p=w.templateForm.get("primaryColor"))==null?null:p.value)+"15"),r(),J("color",(c=w.templateForm.get("primaryColor"))==null?null:c.value),r(),h(w.getSectionIcon(b.type)),r(3),f(" ",w.getSectionLabel(b.type)," "),r(2),C(b.label?11:b.staticContent?12:b.dataPath?13:14),r(5),v("matTooltip",d(17,15,"smartReport.duplicate")),r(4),v("matTooltip",d(21,17,"smartReport.delete"))}}function ei(a,u){if(a&1){let e=y();n(0,"div")(1,"label",36),l(2),s(3,"transloco"),o(),n(4,"input",133),s(5,"transloco"),x("input",function(t){_(e);let p=m(),c=m();return g(c.updateSection(p.id,{staticContent:t.target.value,label:t.target.value}))}),o()()}if(a&2){let e=m();r(2),h(d(3,3,"smartReport.titleText")),r(2),v("value",e.staticContent||"")("placeholder",d(5,5,"smartReport.reportTitle"))}}function ti(a,u){if(a&1){let e=y();n(0,"div")(1,"label",36),l(2),s(3,"transloco"),o(),n(4,"textarea",134),s(5,"transloco"),x("input",function(t){_(e);let p=m(),c=m();return g(c.updateSection(p.id,{staticContent:t.target.value}))}),o()()}if(a&2){let e=m();r(2),h(d(3,3,"smartReport.content")),r(2),v("value",e.staticContent||"")("placeholder",d(5,5,"smartReport.enterTextContent"))}}function ii(a,u){if(a&1){let e=y();n(0,"div")(1,"label",36),l(2),s(3,"transloco"),o(),n(4,"input",133),s(5,"transloco"),x("input",function(t){_(e);let p=m(),c=m();return g(c.updateSection(p.id,{label:t.target.value}))}),o()(),n(6,"div")(7,"label",36),l(8),s(9,"transloco"),o(),n(10,"input",135),s(11,"transloco"),x("input",function(t){_(e);let p=m(),c=m();return g(c.updateSection(p.id,{dataPath:t.target.value}))}),o(),n(12,"p",81),l(13),s(14,"transloco"),o()()}if(a&2){let e=m();r(2),h(d(3,7,"smartReport.label")),r(2),v("value",e.label||"")("placeholder",d(5,9,"smartReport.fieldLabel")),r(4),h(d(9,11,"smartReport.dataPath")),r(2),v("value",e.dataPath||"")("placeholder",d(11,13,"smartReport.dataPathPlaceholder")),r(3),f(" ",d(14,15,"smartReport.dotSeparatedPath")," ")}}function ni(a,u){if(a&1){let e=y();n(0,"div")(1,"label",36),l(2),s(3,"transloco"),o(),n(4,"input",133),s(5,"transloco"),x("input",function(t){_(e);let p=m(),c=m();return g(c.updateSection(p.id,{label:t.target.value}))}),o()(),n(6,"div")(7,"label",36),l(8),s(9,"transloco"),o(),n(10,"input",136),x("input",function(t){_(e);let p=m(),c=m();return g(c.updateSection(p.id,{dataPath:t.target.value}))}),o(),n(11,"p",81),l(12),s(13,"transloco"),o()()}if(a&2){let e=m();r(2),h(d(3,6,"smartReport.tableTitle")),r(2),v("value",e.label||"")("placeholder",d(5,8,"smartReport.tableLabel")),r(4),h(d(9,10,"smartReport.dataPathObject")),r(2),v("value",e.dataPath||""),r(2),f(" ",d(13,12,"smartReport.pathToObject")," ")}}function oi(a,u){if(a&1){let e=y();n(0,"div")(1,"label",36),l(2),s(3,"transloco"),o(),n(4,"input",137),x("input",function(t){_(e);let p=m(),c=m();return g(c.updateSection(p.id,{staticContent:t.target.value}))}),o()(),n(5,"div")(6,"label",36),l(7),s(8,"transloco"),o(),n(9,"input",133),s(10,"transloco"),x("input",function(t){_(e);let p=m(),c=m();return g(c.updateSection(p.id,{label:t.target.value}))}),o()()}if(a&2){let e=m();r(2),h(d(3,5,"smartReport.imageUrl")),r(2),v("value",e.staticContent||""),r(3),h(d(8,7,"smartReport.altText")),r(2),v("value",e.label||"")("placeholder",d(10,9,"smartReport.companyLogo"))}}function ri(a,u){if(a&1){let e=y();n(0,"div")(1,"label",36),l(2),s(3,"transloco"),o(),n(4,"input",138),x("input",function(t){_(e);let p=m(2);return g(p.updateSectionStyle("padding",t.target.value))}),o()()}if(a&2){let e=m();r(2),h(d(3,2,"smartReport.heightPx")),r(2),v("value",(e.style==null?null:e.style.padding)||16)}}function ai(a,u){if(a&1){let e=y();n(0,"div")(1,"label",36),l(2),s(3,"transloco"),o(),n(4,"input",139),x("input",function(t){_(e);let p=m(2);return g(p.updateStyleColor(t.target.value))}),o()()}if(a&2){let e=m();r(2),h(d(3,2,"smartReport.color")),r(2),v("value",(e.style==null?null:e.style.color)||"#E5E7EB")}}function li(a,u){if(a&1){let e=y();n(0,"button",142),x("click",function(){let t=_(e).$implicit,p=m(3);return g(p.updateTextAlign(t))}),n(1,"mat-icon",79),l(2),o()()}if(a&2){let e=u.$implicit,i=m(2);I("bg-indigo-50",(i.style==null?null:i.style.textAlign)===e)("border-indigo-300",(i.style==null?null:i.style.textAlign)===e),r(2),f("format_align_",e,"")}}function pi(a,u){if(a&1){let e=y();n(0,"div",132)(1,"h4",39),l(2),s(3,"transloco"),o(),n(4,"div")(5,"label",95),l(6),s(7,"transloco"),o(),n(8,"div",89),M(9,li,3,5,"button",140,ue),o()(),n(11,"div")(12,"label",95),l(13),s(14,"transloco"),o(),n(15,"input",141),x("input",function(t){_(e);let p=m(2);return g(p.updateFontSize(+t.target.value))}),o()(),n(16,"div")(17,"label",95),l(18),s(19,"transloco"),o(),n(20,"div",89)(21,"button",142),x("click",function(){_(e);let t=m(2);return g(t.updateFontWeight("normal"))}),l(22),s(23,"transloco"),o(),n(24,"button",143),x("click",function(){_(e);let t=m(2);return g(t.updateFontWeight("bold"))}),l(25),s(26,"transloco"),o()()(),n(27,"div",4)(28,"label",64),l(29),s(30,"transloco"),o(),n(31,"input",144),x("input",function(t){_(e);let p=m(2);return g(p.updateStyleColor(t.target.value))}),o()()()}if(a&2){let e=m();r(2),f(" ",d(3,17,"smartReport.style")," "),r(4),h(d(7,19,"smartReport.textAlign")),r(3),L(he(31,St)),r(4),h(d(14,21,"smartReport.fontSize")),r(2),v("value",(e.style==null?null:e.style.fontSize)||14),r(3),h(d(19,23,"smartReport.fontWeight")),r(3),I("bg-indigo-50",(e.style==null?null:e.style.fontWeight)!=="bold")("border-indigo-300",(e.style==null?null:e.style.fontWeight)!=="bold"),r(),f(" ",d(23,25,"smartReport.normal")," "),r(2),I("bg-indigo-50",(e.style==null?null:e.style.fontWeight)==="bold")("border-indigo-300",(e.style==null?null:e.style.fontWeight)==="bold"),r(),f(" ",d(26,27,"smartReport.bold")," "),r(4),h(d(30,29,"smartReport.textColor")),r(2),v("value",(e.style==null?null:e.style.color)||"#111827")}}function si(a,u){if(a&1){let e=y();n(0,"div",14)(1,"div",129)(2,"h3",63),l(3),s(4,"transloco"),o(),n(5,"button",130),x("click",function(){_(e);let t=m();return g(t.selectedSection.set(null))}),n(6,"mat-icon",115),l(7,"close"),o()()(),n(8,"div",131),R(9,ei,6,7,"div")(10,ti,6,7,"div")(11,ii,15,17)(12,ni,14,14)(13,oi,11,11)(14,ri,5,4,"div")(15,ai,5,4,"div")(16,pi,32,32,"div",132),o()()}if(a&2){let e=u,i=m();r(3),O(" ",d(4,10,"smartReport.edit")," ",i.getSectionLabel(e.type)," "),r(6),C(e.type==="header"?9:-1),r(),C(e.type==="text"?10:-1),r(),C(e.type==="field"?11:-1),r(),C(e.type==="table"?12:-1),r(),C(e.type==="image"?13:-1),r(),C(e.type==="spacer"?14:-1),r(),C(e.type==="divider"?15:-1),r(),C(e.type==="header"||e.type==="text"||e.type==="field"?16:-1)}}var Zi=(()=>{class a{constructor(){this._route=T(we),this._router=T(Se),this._fb=T(Qe),this._snack=T(tt),this._reportService=T(rt),this._dialog=T(Ee),this._previewDataService=T(ut),this._transloco=T(Me),this.configId=E(null),this.templateId=E(null),this.template=E(null),this.isLoading=E(!1),this.isSaving=E(!1),this.isSendingSample=E(!1),this.logoUrl=E(null),this.activeTab=E("design"),this.showPassword=!1,this.sections=E([]),this.selectedSection=E(null),this.currentSelectedSection=q(()=>{let e=this.selectedSection();return e?this.sections().find(i=>i.id===e.id)??null:null}),this.sectionTypes=[{type:"header",labelKey:"smartReport.sectionHeader",icon:"title"},{type:"text",labelKey:"smartReport.sectionText",icon:"notes"},{type:"field",labelKey:"smartReport.sectionField",icon:"data_object"},{type:"table",labelKey:"smartReport.sectionTable",icon:"table_chart"},{type:"image",labelKey:"smartReport.sectionImage",icon:"image"},{type:"divider",labelKey:"smartReport.sectionDivider",icon:"horizontal_rule"},{type:"spacer",labelKey:"smartReport.sectionSpacer",icon:"space_bar"}],this.previewData=E({batchName:"Background Check - Batch #47",rowIndex:0,inputData:{documentNumber:"1032386359",documentType:"CC",fullName:"JOHN DOE SMITH"},results:{1:{fullName:"JOHN DOE SMITH",firstName:"JOHN",lastName:"DOE SMITH",documentNumber:"1032386359",documentType:"CC",birthDate:"1990-05-15",gender:"Male",nationality:"Colombian",email:"john.doe@example.com",phone:"+57 300 123 4567",address:"Calle 100 #15-20, Bogota"},2:{isValid:!0,score:.95,status:"VERIFIED",verifiedAt:"2026-02-10T14:30:00Z"}}}),this._hasPreviewDataFromNavigation=!1,this.onPreviewSectionClick=e=>{this.selectSection(e)},this.helperDataPaths=q(()=>xt(this.previewData())),this.templateForm=this._fb.group({name:["",[K.required,K.maxLength(150)]],description:["",K.maxLength(500)],primaryColor:["#4F46E5"],pageSize:["A4"],orientation:["portrait"],pdfEngine:["puppeteer"],legend:[""],showPageNumbers:[!1],pageNumberPosition:["bottom-center"],watermarkEnabled:[!1],watermarkType:["text"],watermarkText:["CONFIDENTIAL"],watermarkOpacity:[.08],watermarkPattern:["single"],securityEnabled:[!1],securityPassword:[""],signatureEnabled:[!1],signatureImage:[null],signatureX:[0],signatureY:[0],signatureWidth:[100],signatureHeight:[50]})}ngOnInit(){this._applyPreviewDataFromRouterState(),this._route.params.subscribe(e=>{this.configId.set(e.configId),this.templateId.set(e.templateId),this.templateId()?this._loadTemplate():this._initDefaultSections()})}_applyPreviewDataFromRouterState(){let e=this._previewDataService.consumePendingPreviewData();if(e||(e=this._router.getCurrentNavigation()?.extras?.state?.previewData??void 0),e&&(e.inputData||e.results)){let i={batchName:e.batchName??"Batch",rowIndex:e.rowIndex??0,inputData:e.inputData??{},results:e.results??{}};this.previewData.set(i),this._hasPreviewDataFromNavigation=!0}}_loadTemplate(){let e=this.templateId();e&&(this.isLoading.set(!0),this._reportService.getTemplate(e).subscribe({next:i=>{this.template.set(i),this.sections.set(i.sections||[]),!this._hasPreviewDataFromNavigation&&i.sampleData&&(i.sampleData.inputData||i.sampleData.results)&&this.previewData.set({batchName:i.sampleData.batchName??"Batch",rowIndex:i.sampleData.rowIndex??0,inputData:i.sampleData.inputData??{},results:i.sampleData.results??{}}),this.templateForm.patchValue({name:i.name,description:i.description,primaryColor:i.primaryColor||"#4F46E5",pageSize:i.pageSize||"A4",orientation:i.orientation||"portrait",pdfEngine:i.pdfEngine||"puppeteer",legend:i.legend||"",showPageNumbers:i.showPageNumbers||!1,pageNumberPosition:i.pageNumberPosition||"bottom-center",watermarkEnabled:i.watermark?.enabled||!1,watermarkType:i.watermark?.type||"text",watermarkText:i.watermark?.text||"CONFIDENTIAL",watermarkOpacity:i.watermark?.opacity??.08,watermarkPattern:i.watermark?.pattern||"single",securityEnabled:i.security?.enabled||!1,securityPassword:i.security?.enabled?"******":"",signatureEnabled:i.signature?.enabled||!1,signatureImage:i.signature?.image||null,signatureX:i.signature?.x||0,signatureY:i.signature?.y||0,signatureWidth:i.signature?.width||100,signatureHeight:i.signature?.height||50}),this.logoUrl.set(i.logo||null),this.isLoading.set(!1)},error:i=>{console.error("Failed to load template:",i),this.isLoading.set(!1),this._snack.open("Failed to load template","Close",{duration:3e3})}}))}_initDefaultSections(){this.sections.set([{id:this._generateId(),type:"header",order:0,label:"Verification Report",staticContent:"Verification Report",style:{fontSize:22,fontWeight:"bold",textAlign:"center"}},{id:this._generateId(),type:"divider",order:1,style:{color:"#4F46E5"}},{id:this._generateId(),type:"field",order:2,label:"Document Number",dataPath:"results.1.documentNumber"},{id:this._generateId(),type:"field",order:3,label:"Full Name",dataPath:"results.1.fullName"}])}onDrop(e){let i=[...this.sections()];at(i,e.previousIndex,e.currentIndex),i.forEach((t,p)=>t.order=p),this.sections.set(i)}addSection(e){let i={header:{staticContent:"Section Title",style:{fontSize:18,fontWeight:"bold",textAlign:"left"}},text:{staticContent:"Enter your text here...",style:{fontSize:12}},field:{label:"New Field",dataPath:""},table:{label:"Data Table",dataPath:"results.1"},image:{staticContent:"",style:{textAlign:"center"}},divider:{style:{color:this.templateForm.get("primaryColor")?.value||"#4F46E5"}},spacer:{style:{padding:"16"}}},t=B({id:this._generateId(),type:e,order:this.sections().length},i[e]);this.sections.update(p=>[...p,t]),this.selectSection(t)}selectSection(e){this.selectedSection.set(B({},e))}updateSection(e,i){this.sections.update(p=>p.map(c=>c.id===e?B(B({},c),i):c));let t=this.selectedSection();t?.id===e&&this.selectedSection.set(B(B({},t),i))}deleteSection(e){this.sections.update(i=>{let t=i.filter(p=>p.id!==e);return t.forEach((p,c)=>p.order=c),t}),this.selectedSection()?.id===e&&this.selectedSection.set(null)}duplicateSection(e){let i=A(B({},e),{id:this._generateId(),order:this.sections().length,label:e.label?e.label+" (copy)":void 0});this.sections.update(t=>[...t,i])}updateSectionStyle(e,i){let t=this.currentSelectedSection();t&&this.updateSection(t.id,{style:A(B({},t.style),{[e]:i})})}updateTextAlign(e){this.updateSectionStyle("textAlign",e)}updateFontSize(e){this.updateSectionStyle("fontSize",e)}updateFontWeight(e){this.updateSectionStyle("fontWeight",e)}updateStyleColor(e){this.updateSectionStyle("color",e)}updateBgColor(e){this.updateSectionStyle("backgroundColor",e)}save(e){if(this.templateForm.invalid){this._snack.open("Please fill in all required fields","Close",{duration:3e3});return}this.isSaving.set(!0);let i=this.templateForm.value,t=A(B({},i),{sections:this.sections(),batchConfiguration:this.configId()||void 0,sampleData:this.previewData(),logo:this.logoUrl()||void 0,watermark:{enabled:i.watermarkEnabled??!1,type:i.watermarkType||"text",text:i.watermarkText||"CONFIDENTIAL",opacity:i.watermarkOpacity??.08,pattern:i.watermarkPattern||"single"},security:{enabled:i.securityEnabled??!1,password:i.securityPassword||""},signature:{enabled:i.signatureEnabled??!1,image:i.signatureImage||"",x:i.signatureX||0,y:i.signatureY||0,width:i.signatureWidth||100,height:i.signatureHeight||50}});delete t.watermarkEnabled,delete t.watermarkType,delete t.watermarkText,delete t.watermarkOpacity,delete t.watermarkPattern,delete t.securityEnabled,delete t.securityPassword,delete t.signatureEnabled,delete t.signatureImage,delete t.signatureX,delete t.signatureY,delete t.signatureWidth,delete t.signatureHeight;let p=this.templateId();p?this._reportService.updateTemplate(p,t).subscribe({next:()=>{this._snack.open("Template saved!","Close",{duration:3e3}),this.isSaving.set(!1),e&&e()},error:c=>{console.error("Save failed:",c),this._snack.open("Failed to save template","Close",{duration:3e3}),this.isSaving.set(!1)}}):this._reportService.createTemplate(t).subscribe({next:c=>{this._snack.open("Template created!","Close",{duration:3e3}),this.isSaving.set(!1),e&&e(),this._router.navigate(["/smart-batch",this.configId(),"report-builder",c._id])},error:c=>{console.error("Create failed:",c),this._snack.open("Failed to create template","Close",{duration:3e3}),this.isSaving.set(!1)}})}sendSample(){if(!this.templateId()){this._snack.open(this._transloco.translate("smartReport.saveTemplateFirst"),"Close",{duration:3500});return}let i=`Sample Report: ${this.templateForm.get("name")?.value||"Template Preview"}`;this._dialog.open(gt,{panelClass:"send-sample-dialog",maxWidth:"560px",width:"95vw",disableClose:!1,autoFocus:!0,data:{defaultSubject:i,isSample:!0}}).afterClosed().subscribe(p=>{if(!p?.recipients?.length)return;let c=()=>{this.isSendingSample.set(!0);let b=this.templateId();b&&this._reportService.sendTemplateSample(b,{recipients:p.recipients,subject:p.subject,language:"en",sampleData:this.previewData()}).subscribe({next:w=>{w.success?this._snack.open(this._transloco.translate("smartReport.samplePdfSentSuccess"),"Close",{duration:3500}):this._snack.open(w.error||this._transloco.translate("smartReport.failedToSendSamplePdf"),"Close",{duration:4e3}),this.isSendingSample.set(!1)},error:w=>{console.error("Send sample failed:",w),this._snack.open(this._transloco.translate("smartReport.failedToSendSamplePdf"),"Close",{duration:4e3}),this.isSendingSample.set(!1)}})};this.templateForm.dirty?this.save(()=>c()):c()})}goBack(){let e=this.configId();e?this._router.navigate(["/smart-batch",e]):this._router.navigate(["/smart-batch"])}getSectionIcon(e){return this.sectionTypes.find(i=>i.type===e)?.icon||"help"}getSectionLabel(e){let i=this.sectionTypes.find(t=>t.type===e)?.labelKey;return i?this._transloco.translate(i):e}copyPathToClipboard(e){navigator.clipboard.writeText(e).then(()=>this._snack.open(`${this._transloco.translate("smartReport.copied")}: ${e}`,"Close",{duration:2e3}),()=>this._snack.open(this._transloco.translate("smartReport.failedToCopy"),"Close",{duration:2e3}))}onLogoUpload(e){let t=e.target.files?.[0];if(!t)return;if(t.size>512e3){this._snack.open("Logo file must be less than 500KB","Close",{duration:3500});return}let p=new FileReader;p.onload=()=>{this.logoUrl.set(p.result)},p.readAsDataURL(t)}removeLogo(){this.logoUrl.set(null)}onSignaturePositionChange(e){this.templateForm.patchValue({signatureX:Math.round(e.x),signatureY:Math.round(e.y)}),this.templateForm.markAsDirty()}onSignatureSizeChange(e){this.templateForm.patchValue({signatureWidth:Math.round(e.width),signatureHeight:Math.round(e.height)}),this.templateForm.markAsDirty()}openSignatureDialog(){this._dialog.open(ht,{width:"640px",disableClose:!0,autoFocus:!1}).afterClosed().subscribe(e=>{e&&(this.templateForm.patchValue({signatureImage:e,signatureEnabled:!0}),this.templateForm.markAsDirty())})}_generateId(){return"section_"+Math.random().toString(36).substring(2,11)}static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275cmp=j({type:a,selectors:[["report-builder"]],decls:169,vars:120,consts:[[1,"min-h-screen","w-full","bg-gray-50"],[1,"bg-white","border-b","border-gray-200","sticky","top-0","z-20"],[1,"max-w-[1600px]","mx-auto","px-4","sm:px-6","lg:px-8","py-3"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],["mat-icon-button","",3,"click","matTooltip"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-xs","text-gray-500"],["mat-stroked-button","",1,"!rounded-xl",3,"click","disabled","matTooltip"],[1,"inline-flex","items-center","gap-2"],["mat-flat-button","",1,"!rounded-xl","!bg-indigo-600","!text-white",3,"click","disabled"],[1,"max-w-[1600px]","mx-auto","px-4","sm:px-6","lg:px-8","py-6"],[1,"flex","gap-6","items-start"],[1,"w-full","lg:w-[440px]","shrink-0","space-y-4"],[1,"bg-white","rounded-2xl","border","border-gray-200","p-5"],[1,"text-sm","font-semibold","text-gray-900","mb-4"],[1,"space-y-4",3,"formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","name",3,"placeholder"],[1,"grid","grid-cols-3","gap-3"],["appearance","outline"],["formControlName","pageSize"],["value","A4"],["value","Letter"],["value","Legal"],["formControlName","orientation"],["value","portrait"],["value","landscape"],["formControlName","pdfEngine"],["value","puppeteer"],["value","pdfkit"],[1,"flex","items-center","gap-4"],[1,"text-sm","text-gray-600"],["type","color","formControlName","primaryColor",1,"w-9","h-9","rounded-lg","border","border-gray-200","cursor-pointer"],[1,"pt-3","border-t","border-gray-100"],[1,"text-xs","font-medium","text-gray-500","mb-2","block"],[1,"text-xs","font-medium","text-gray-500","mb-1","block"],["formControlName","legend","rows","2",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-xs","text-gray-600","resize-none",3,"placeholder"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-xs","font-medium","text-gray-500"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox","formControlName","showPageNumbers",1,"sr-only","peer"],[1,"w-9","h-5","bg-gray-200","peer-focus:outline-none","rounded-full","peer","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-4","after:w-4","after:transition-all","peer-checked:bg-indigo-600"],["appearance","outline",1,"w-full","!text-xs"],["type","checkbox","formControlName","watermarkEnabled",1,"sr-only","peer"],[1,"space-y-3"],[1,"p-4","bg-gray-50","rounded-xl","border","border-gray-100","space-y-4"],[1,"flex","items-center","gap-2"],[1,"text-gray-400","!w-5","!h-5","!text-[20px]"],[1,"text-sm","font-medium","text-gray-700"],["formControlName","securityEnabled","color","primary"],[1,"space-y-4","pt-2","border-t","border-gray-200"],["formControlName","signatureEnabled","color","primary"],[1,"bg-white","rounded-2xl","border","border-gray-200","p-4"],[1,"text-sm","font-semibold","text-gray-900","mb-2"],[1,"text-xs","text-gray-500","mb-3"],[1,"text-xs","text-gray-400","italic"],[1,"max-h-[240px]","overflow-y-auto","space-y-1","pr-1"],[1,"text-sm","font-semibold","text-gray-900","mb-3"],[1,"flex","flex-wrap","gap-2"],[1,"inline-flex","items-center","gap-1.5","px-3","py-2","rounded-lg","border","border-gray-200","hover:border-indigo-300","hover:bg-indigo-50","transition-colors","text-sm","text-gray-700"],[1,"bg-white","rounded-2xl","border","border-gray-200"],[1,"px-5","py-3","border-b","border-gray-100","flex","items-center","justify-between"],[1,"text-sm","font-semibold","text-gray-900"],[1,"text-xs","text-gray-400"],[1,"text-xs","font-medium","text-gray-400"],["cdkDropList","",1,"p-3","min-h-[200px]",3,"cdkDropListDropped"],[1,"flex","flex-col","items-center","justify-center","h-40","text-gray-300"],["cdkDrag","",1,"flex","items-center","gap-2","bg-white","border","rounded-lg","px-3","py-2.5","mb-2","cursor-pointer","hover:border-indigo-300","transition-colors","group",3,"ring-2","ring-indigo-500","bg-indigo-50"],[1,"flex-1","min-w-0"],[1,"sticky","top-20"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","font-semibold","text-gray-500"],[3,"signaturePositionChange","signatureSizeChange","template","previewData","primaryColor","orientation","clickable","selectedSectionId","sectionClick","logoUrl","legend","showPageNumbers","pageNumberPosition","watermarkEnabled","watermarkType","watermarkText","watermarkOpacity","watermarkPattern","signatureEnabled","signatureImage","signatureX","signatureY","signatureWidth","signatureHeight"],[1,"animate-spin","!text-lg"],[1,"!text-lg"],["alt","Logo",1,"h-10","max-w-[160px]","object-contain","rounded","border","border-gray-200","bg-gray-50","p-1",3,"src"],["type","button",1,"text-xs","text-red-500","hover:text-red-700","transition-colors",3,"click"],[1,"inline-flex","items-center","gap-2","px-3","py-2","rounded-lg","border","border-dashed","border-gray-300","hover:border-indigo-300","hover:bg-indigo-50","transition-colors","cursor-pointer","text-sm","text-gray-500"],[1,"!text-base"],["type","file","accept","image/png,image/jpeg,image/svg+xml,image/webp",1,"hidden",3,"change"],[1,"text-xs","text-gray-400","mt-1"],["formControlName","pageNumberPosition"],["value","top-left"],["value","top-center"],["value","top-right"],["value","bottom-left"],["value","bottom-center"],["value","bottom-right"],[1,"flex","gap-1"],["type","button",1,"flex-1","py-2","rounded-lg","border","text-xs","transition-colors",3,"click"],[1,"text-xs","text-amber-500"],[1,"flex","items-center","justify-between","mb-1"],[1,"text-xs","text-gray-500","font-mono"],["type","range","formControlName","watermarkOpacity","min","0.01","max","0.5","step","0.01",1,"w-full","h-1.5","bg-gray-200","rounded-lg","appearance-none","cursor-pointer","accent-indigo-600"],[1,"text-xs","text-gray-400","mb-1","block"],["type","text","formControlName","watermarkText","maxlength","100",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-xs",3,"placeholder"],[1,"relative"],["formControlName","securityPassword",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm","pr-10",3,"type","placeholder"],["type","button",1,"absolute","right-2","top-1/2","-translate-y-1/2","text-gray-400","hover:text-gray-600",3,"click"],[1,"!w-4","!h-4","!text-[16px]"],[1,"text-[10px]","text-gray-400","mt-1"],["type","button","mat-stroked-button","","color","primary",1,"w-full"],[1,"relative","group","border","border-gray-200","rounded-lg","p-2","bg-white","flex","justify-center"],[1,"h-16","object-contain",3,"src"],["type","button",1,"absolute","top-1","right-1","p-1","bg-red-50","text-red-500","rounded-full","hover:bg-red-100","opacity-0","group-hover:opacity-100","transition-opacity",3,"click"],["type","button","mat-stroked-button","","color","primary",1,"w-full",3,"click"],[1,"mr-2"],[1,"group","flex","items-center","gap-2","py-1.5","px-2","rounded","hover:bg-gray-50","text-xs"],[1,"group","flex","items-center","gap-2","pt-1.5","pb-0.5"],[1,"flex-1","min-w-0","truncate","text-gray-700","font-mono"],[1,"text-gray-400","truncate","max-w-[120px]",3,"title"],["mat-icon-button","",1,"!w-6","!h-6","!rounded","opacity-0","group-hover:opacity-100","transition-opacity",3,"click","matTooltip"],[1,"!text-sm","!w-4","!h-4"],[1,"inline-flex","items-center","gap-1.5","px-3","py-2","rounded-lg","border","border-gray-200","hover:border-indigo-300","hover:bg-indigo-50","transition-colors","text-sm","text-gray-700",3,"click"],[1,"!text-base","text-gray-400"],[1,"!text-4xl","!w-10","!h-10","mb-2"],[1,"text-sm"],["cdkDrag","",1,"flex","items-center","gap-2","bg-white","border","rounded-lg","px-3","py-2.5","mb-2","cursor-pointer","hover:border-indigo-300","transition-colors","group",3,"click"],["cdkDragHandle","",1,"shrink-0","w-6","h-6","rounded","flex","items-center","justify-center","cursor-grab","text-gray-300","hover:text-gray-500"],[1,"!text-sm"],[1,"shrink-0","w-7","h-7","rounded-md","flex","items-center","justify-center"],[1,"min-w-0","flex-1"],[1,"text-sm","font-medium","text-gray-800","truncate"],[1,"text-xs","text-gray-400","truncate"],[1,"shrink-0","flex","items-center","gap-0.5","opacity-0","group-hover:opacity-100","transition-opacity"],["mat-icon-button","",1,"!w-7","!h-7",3,"click","matTooltip"],[1,"!text-sm","text-gray-400"],[1,"!text-sm","text-red-400"],[1,"flex","items-center","justify-between","mb-4"],["mat-icon-button","",1,"!w-7","!h-7",3,"click"],[1,"space-y-4"],[1,"pt-3","border-t","border-gray-100","space-y-3"],["type","text",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm",3,"input","value","placeholder"],["rows","4",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm",3,"input","value","placeholder"],["type","text",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm","font-mono",3,"input","value","placeholder"],["type","text","placeholder","results.1",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm","font-mono",3,"input","value"],["type","text","placeholder","https://example.com/logo.png",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm","font-mono",3,"input","value"],["type","number","min","4","max","200",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm",3,"input","value"],["type","color",1,"w-9","h-9","rounded-lg","border","border-gray-200","cursor-pointer",3,"input","value"],[1,"flex-1","py-2","rounded-lg","border","text-sm","transition-colors",3,"bg-indigo-50","border-indigo-300"],["type","number","min","8","max","72",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm",3,"input","value"],[1,"flex-1","py-2","rounded-lg","border","text-sm","transition-colors",3,"click"],[1,"flex-1","py-2","rounded-lg","border","text-sm","font-bold","transition-colors",3,"click"],["type","color",1,"w-8","h-8","rounded","border","border-gray-200","cursor-pointer",3,"input","value"]],template:function(i,t){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),s(6,"transloco"),x("click",function(){return t.goBack()}),n(7,"mat-icon"),l(8,"arrow_back"),o()(),n(9,"div")(10,"h1",6),l(11),s(12,"transloco"),o(),n(13,"p",7),l(14),s(15,"transloco"),o()()(),n(16,"div",4)(17,"button",8),s(18,"transloco"),x("click",function(){return t.sendSample()}),n(19,"span",9),R(20,Tt,4,3)(21,Bt,4,3),o()(),n(22,"button",10),x("click",function(){return t.save()}),n(23,"span",9),R(24,It,4,3)(25,Dt,4,3),o()()()()()(),n(26,"div",11)(27,"div",12)(28,"div",13)(29,"div",14)(30,"h3",15),l(31),s(32,"transloco"),o(),n(33,"form",16)(34,"mat-form-field",17)(35,"mat-label"),l(36),s(37,"transloco"),o(),k(38,"input",18),s(39,"transloco"),o(),n(40,"div",19)(41,"mat-form-field",20)(42,"mat-label"),l(43),s(44,"transloco"),o(),n(45,"mat-select",21)(46,"mat-option",22),l(47,"A4"),o(),n(48,"mat-option",23),l(49,"Letter"),o(),n(50,"mat-option",24),l(51,"Legal"),o()()(),n(52,"mat-form-field",20)(53,"mat-label"),l(54),s(55,"transloco"),o(),n(56,"mat-select",25)(57,"mat-option",26),l(58),s(59,"transloco"),o(),n(60,"mat-option",27),l(61),s(62,"transloco"),o()()(),n(63,"mat-form-field",20)(64,"mat-label"),l(65),s(66,"transloco"),o(),n(67,"mat-select",28)(68,"mat-option",29),l(69,"Puppeteer"),o(),n(70,"mat-option",30),l(71,"PDFKit"),o()()()(),n(72,"div",31)(73,"label",32),l(74),s(75,"transloco"),o(),k(76,"input",33),o(),n(77,"div",34)(78,"label",35),l(79),s(80,"transloco"),o(),R(81,Pt,5,4,"div",4)(82,Vt,8,3),o(),n(83,"div",34)(84,"label",36),l(85),s(86,"transloco"),o(),k(87,"textarea",37),s(88,"transloco"),o(),n(89,"div",34)(90,"div",38)(91,"label",39),l(92),s(93,"transloco"),o(),n(94,"label",40),k(95,"input",41)(96,"div",42),o()(),R(97,Ft,17,3,"mat-form-field",43),o(),n(98,"div",34)(99,"div",38)(100,"label",39),l(101),s(102,"transloco"),o(),n(103,"label",40),k(104,"input",44)(105,"div",42),o()(),R(106,Lt,30,40,"div",45),o(),n(107,"div",46)(108,"div",3)(109,"div",47)(110,"mat-icon",48),l(111,"lock"),o(),n(112,"span",49),l(113),s(114,"transloco"),o()(),k(115,"mat-slide-toggle",50),o(),R(116,At,14,11,"div",51),o(),n(117,"div",46)(118,"div",3)(119,"div",47)(120,"mat-icon",48),l(121,"draw"),o(),n(122,"span",49),l(123,"Signature"),o()(),k(124,"mat-slide-toggle",52),o(),R(125,Xt,3,1,"div",51),o()()(),n(126,"div",53)(127,"h3",54),l(128),s(129,"transloco"),o(),n(130,"p",55),l(131),s(132,"transloco"),o(),R(133,Yt,3,3,"p",56)(134,Wt,3,0,"div",57),o(),n(135,"div",53)(136,"h3",58),l(137),s(138,"transloco"),o(),n(139,"div",59),M(140,Ut,5,4,"button",60,Rt),o()(),n(142,"div",61)(143,"div",62)(144,"div")(145,"h3",63),l(146),s(147,"transloco"),o(),n(148,"p",64),l(149),s(150,"transloco"),o()(),n(151,"span",65),l(152),s(153,"transloco"),o()(),n(154,"div",66),x("cdkDropListDropped",function(c){return t.onDrop(c)}),R(155,Kt,6,3,"div",67),M(156,Zt,24,19,"div",68,kt),o()(),R(158,si,17,12,"div",14),o(),n(159,"div",69)(160,"div",70)(161,"div",71)(162,"h3",72),l(163),s(164,"transloco"),o(),n(165,"span",64),l(166),s(167,"transloco"),o()(),n(168,"report-preview",73),x("signaturePositionChange",function(c){return t.onSignaturePositionChange(c)})("signatureSizeChange",function(c){return t.onSignatureSizeChange(c)}),o()()()()()()),i&2){let p,c,b,w,D,P,V,F,S,ee,te,ie,ne,oe,re,N,ae,le,pe,se,de,me,ce;r(5),v("matTooltip",d(6,63,"smartReport.back")),r(6),f(" ",d(12,65,t.templateId()?"smartReport.editReportTemplate":"smartReport.newReportTemplate")," "),r(3),f(" ",d(15,67,"smartReport.designReportLayout")," "),r(3),v("disabled",!t.templateId()||t.isSendingSample())("matTooltip",t.templateId()?"":d(18,69,"smartReport.saveTemplateFirst")),r(3),C(t.isSendingSample()?20:21),r(2),v("disabled",t.isSaving()),r(2),C(t.isSaving()?24:25),r(7),f(" ",d(32,71,"smartReport.templateSettings")," "),r(2),v("formGroup",t.templateForm),r(3),h(d(37,73,"smartReport.templateName")),r(2),v("placeholder",d(39,75,"smartReport.templateNamePlaceholder")),r(5),h(d(44,77,"smartReport.pageSize")),r(11),h(d(55,79,"smartReport.orientation")),r(4),h(d(59,81,"smartReport.portrait")),r(3),h(d(62,83,"smartReport.landscape")),r(4),h(d(66,85,"smartReport.pdfEngine")),r(9),f("",d(75,87,"smartReport.primaryColor"),":"),r(5),h(d(80,89,"smartReport.workspaceLogo")),r(2),C(t.logoUrl()?81:82),r(4),h(d(86,91,"smartReport.footerLegend")),r(2),v("placeholder",d(88,93,"smartReport.footerLegendPlaceholder")),r(5),h(d(93,95,"smartReport.pageNumbers")),r(5),C((p=t.templateForm.get("showPageNumbers"))!=null&&p.value?97:-1),r(4),h(d(102,97,"smartReport.watermark")),r(5),C((c=t.templateForm.get("watermarkEnabled"))!=null&&c.value?106:-1),r(7),h(d(114,99,"smartReport.securityTitle")),r(3),C((b=t.templateForm.get("securityEnabled"))!=null&&b.value?116:-1),r(9),C((w=t.templateForm.get("signatureEnabled"))!=null&&w.value?125:-1),r(3),f(" ",d(129,101,"smartReport.helperData")," "),r(3),f(" ",d(132,103,"smartReport.helperDataHint")," "),r(2),C(t.helperDataPaths().length===0?133:134),r(4),f(" ",d(138,105,"smartReport.addSections")," "),r(3),L(t.sectionTypes),r(6),f(" ",d(147,107,"smartReport.reportLayout")," "),r(3),f(" ",d(150,109,"smartReport.dragToReorder")," "),r(3),O("",t.sections().length," ",d(153,111,"smartReport.sections"),""),r(3),C(t.sections().length===0?155:-1),r(),L(t.sections()),r(2),C((D=t.currentSelectedSection())?158:-1,D),r(5),f(" ",d(164,113,"smartReport.preview")," "),r(3),h(d(167,115,"smartReport.livePreviewWithSample")),r(2),v("template",ve(117,yt,t.sections(),(P=t.templateForm.get("primaryColor"))==null?null:P.value))("previewData",t.previewData())("primaryColor",((V=t.templateForm.get("primaryColor"))==null?null:V.value)||"#4F46E5")("orientation",((F=t.templateForm.get("orientation"))==null?null:F.value)||"portrait")("clickable",!0)("selectedSectionId",(S=(S=t.currentSelectedSection())==null?null:S.id)!==null&&S!==void 0?S:null)("sectionClick",t.onPreviewSectionClick)("logoUrl",t.logoUrl())("legend",((ee=t.templateForm.get("legend"))==null?null:ee.value)||"")("showPageNumbers",((te=t.templateForm.get("showPageNumbers"))==null?null:te.value)||!1)("pageNumberPosition",((ie=t.templateForm.get("pageNumberPosition"))==null?null:ie.value)||"bottom-center")("watermarkEnabled",((ne=t.templateForm.get("watermarkEnabled"))==null?null:ne.value)||!1)("watermarkType",((oe=t.templateForm.get("watermarkType"))==null?null:oe.value)||"text")("watermarkText",((re=t.templateForm.get("watermarkText"))==null?null:re.value)||"CONFIDENTIAL")("watermarkOpacity",(N=(N=t.templateForm.get("watermarkOpacity"))==null?null:N.value)!==null&&N!==void 0?N:.08)("watermarkPattern",((ae=t.templateForm.get("watermarkPattern"))==null?null:ae.value)||"single")("signatureEnabled",((le=t.templateForm.get("signatureEnabled"))==null?null:le.value)||!1)("signatureImage",((pe=t.templateForm.get("signatureImage"))==null?null:pe.value)||null)("signatureX",((se=t.templateForm.get("signatureX"))==null?null:se.value)||0)("signatureY",((de=t.templateForm.get("signatureY"))==null?null:de.value)||0)("signatureWidth",((me=t.templateForm.get("signatureWidth"))==null?null:me.value)||100)("signatureHeight",((ce=t.templateForm.get("signatureHeight"))==null?null:ce.value)||50)}},dependencies:[X,ye,Ce,Re,qe,We,$e,Ue,Ye,ze,He,Je,Ke,Ge,dt,st,pt,lt,H,z,$,Y,U,W,Ne,Fe,Ve,et,Ze,ot,nt,Pe,Oe,je,it,ct,mt,Ae,Le,_t],encapsulation:2,data:{animation:[Xe]}})}}return a})();export{Zi as ReportBuilderComponent};
