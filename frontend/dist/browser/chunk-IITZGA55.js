import{a as Me,b as Ie}from"./chunk-57TBPTP6.js";import{a as Ee,b as Te,c as ke,d as Re,e as Fe}from"./chunk-WYCCYY5Z.js";import{j as Ce}from"./chunk-M2EUSKUB.js";import"./chunk-3RK6DDJD.js";import"./chunk-NJIOGT5G.js";import{a as ye,b as we}from"./chunk-EA7553OK.js";import"./chunk-5EMO6V7L.js";import{a as he,b as ve}from"./chunk-O7BLLMPM.js";import"./chunk-CUN3WPHV.js";import"./chunk-7RWCIHFI.js";import{c as X,d as Q}from"./chunk-KZVB35JW.js";import{a as ce,b as ue,c as _e,f as D}from"./chunk-NCGURMCY.js";import{a as be,b as Se}from"./chunk-QAYTNEMP.js";import{b as se,d as pe,i as me}from"./chunk-5HIRALMD.js";import{e as xe}from"./chunk-YQHVOEV4.js";import{D as Z,E as J,L as K,N as U,d as V,e as fe,f as ge,l as P,m as N,p as W,r as H,u as O,v as G,z as q}from"./chunk-QQUVC3UU.js";import"./chunk-ELGVYL4R.js";import{U as A,V as L,X as j,Z as z,_ as $}from"./chunk-RMO4OYE5.js";import{$c as de,Bb as te,Bc as ae,Cb as M,Db as I,Eb as i,Fb as n,Ga as v,Gb as E,Kb as g,Mb as c,Nb as p,Wa as d,Xb as r,Yb as ee,Zb as y,_b as ie,ad as B,fb as F,fc as ne,ga as S,hc as oe,lb as w,mc as re,pc as le,qa as u,ra as _,sb as x,tb as Y,ub as k,zb as f}from"./chunk-QTVKNRSK.js";import{a as h,b as R}from"./chunk-MG3ERZGY.js";function ze(l,m){l&1&&(i(0,"mat-error"),r(1,"At least one recipient is required"),n())}function $e(l,m){l&1&&(i(0,"mat-error"),r(1,"Please enter valid email address(es)"),n())}var Be=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;function We(l){let m=(l.value||"").trim();if(!m)return{required:!0};let e=m.split(",").map(t=>t.trim()).filter(t=>!!t);if(e.length===0)return{required:!0};let o=e.filter(t=>!Be.test(t));return o.length>0?{invalidEmails:{value:o}}:null}var De=(()=>{class l{constructor(){this._dialogRef=S(ce),this._fb=S(K),this._data=S(ue,{optional:!0}),this.form=this._fb.group({recipients:["",[We]],subject:[this._data?.defaultSubject||"Sample Report: Template Preview",[]]})}onCancel(){this._dialogRef.close()}onSubmit(){let e=this.form.get("recipients");if(this.form.invalid||!e)return;let o=(e.value||"").split(",").map(s=>s.trim()).filter(s=>!!s),t=o.filter(s=>Be.test(s));if(t.length===0){e.setErrors(o.length===0?{required:!0}:{invalidEmails:{value:o}}),e.markAsTouched();return}let a={recipients:t,subject:this.form.get("subject")?.value?.trim()||void 0};this._dialogRef.close(a)}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275cmp=F({type:l,selectors:[["send-sample-modal"]],decls:35,vars:4,consts:[[1,"flex","flex-col","w-full","max-w-md"],[1,"px-6","pt-6","pb-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],[1,"w-12","h-12","rounded-xl","bg-gradient-to-br","from-indigo-500","to-purple-600","flex","items-center","justify-center","shadow-lg","shadow-indigo-500/25"],[1,"!w-6","!h-6","text-white","icon-size-6"],[1,"text-lg","font-bold","text-slate-900","dark:text-white"],[1,"text-sm","text-slate-500","dark:text-slate-400"],["mat-icon-button","",1,"!-mr-2",3,"click"],[1,"px-6","pb-6","space-y-4",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","recipients","placeholder","email1@example.com, email2@example.com","rows","3"],["matInput","","formControlName","subject","placeholder","Sample Report: Template Preview"],[1,"flex","gap-3","pt-2","justify-end","border-t","border-slate-200","dark:border-slate-700"],["mat-button","","type","button",1,"!text-slate-600",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"!rounded-xl","!bg-indigo-600","!text-white",3,"disabled"],[1,"!w-4","!h-4","mr-1"]],template:function(o,t){if(o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon",5),r(6,"send"),n()(),i(7,"div")(8,"h2",6),r(9,"Send Sample Report"),n(),i(10,"p",7),r(11," Enter recipient email(s) and optional subject "),n()()(),i(12,"button",8),c("click",function(){return t.onCancel()}),i(13,"mat-icon"),r(14,"close"),n()()()(),i(15,"form",9),c("ngSubmit",function(){return t.onSubmit()}),i(16,"mat-form-field",10)(17,"mat-label"),r(18,"Recipient email(s)"),n(),E(19,"textarea",11),i(20,"mat-hint"),r(21,"Separate multiple emails with commas"),n(),w(22,ze,2,0,"mat-error")(23,$e,2,0,"mat-error"),n(),i(24,"mat-form-field",10)(25,"mat-label"),r(26,"Subject (optional)"),n(),E(27,"input",12),n(),i(28,"div",13)(29,"button",14),c("click",function(){return t.onCancel()}),r(30," Cancel "),n(),i(31,"button",15)(32,"mat-icon",16),r(33,"send"),n(),r(34," Send Sample "),n()()()()),o&2){let a,s;d(15),x("formGroup",t.form),d(7),f((a=t.form.get("recipients"))!=null&&a.hasError("required")&&((a=t.form.get("recipients"))!=null&&a.touched)?22:-1),d(),f((s=t.form.get("recipients"))!=null&&s.hasError("invalidEmails")&&((s=t.form.get("recipients"))!=null&&s.touched)?23:-1),d(8),x("disabled",t.form.invalid||t.form.pending)}},dependencies:[B,U,q,W,O,G,Z,J,D,j,L,A,$,z,N,P,V,ge,fe,Q,X],styles:["[_nghost-%COMP%]{display:block}"]})}}return l})();var He=(l,m)=>({sections:l,primaryColor:m}),Oe=()=>["left","center","right"],Ge=(l,m)=>m.type,qe=(l,m)=>m.id;function Ze(l,m){l&1&&(i(0,"mat-icon",51),r(1,"refresh"),n(),r(2," Sending sample... "))}function Je(l,m){l&1&&(i(0,"mat-icon",52),r(1,"send"),n(),r(2," Send Sample "))}function Ke(l,m){l&1&&(i(0,"mat-icon",51),r(1,"refresh"),n(),r(2," Saving... "))}function Ue(l,m){l&1&&(i(0,"mat-icon",52),r(1,"save"),n(),r(2," Save Template "))}function Xe(l,m){if(l&1){let e=g();i(0,"button",53),c("click",function(){let t=u(e).$implicit,a=p();return _(a.addSection(t.type))}),i(1,"mat-icon",54),r(2),n(),r(3),n()}if(l&2){let e=m.$implicit;d(2),ee(e.icon),d(),y(" ",e.label," ")}}function Qe(l,m){l&1&&(i(0,"div",44)(1,"mat-icon",55),r(2,"add_box"),n(),i(3,"p",56),r(4,"Add sections from above"),n()())}function Ye(l,m){if(l&1&&r(0),l&2){let e=p().$implicit;y(" ",e.label," ")}}function et(l,m){if(l&1&&(r(0),re(1,"slice")),l&2){let e=p().$implicit;ie(" ",le(1,2,e.staticContent,0,30),"",e.staticContent.length>30?"...":""," ")}}function tt(l,m){if(l&1&&r(0),l&2){let e=p().$implicit;y(" ",e.dataPath," ")}}function it(l,m){if(l&1&&r(0),l&2){let e=p().$implicit;y(" Section #",e.order+1," ")}}function nt(l,m){if(l&1){let e=g();i(0,"div",57),c("click",function(){let t=u(e).$implicit,a=p();return _(a.selectSection(t))}),i(1,"div",58)(2,"mat-icon",59),r(3,"drag_indicator"),n()(),i(4,"div",60)(5,"mat-icon",61),r(6),n()(),i(7,"div",62)(8,"p",63),r(9),n(),i(10,"p",64),w(11,Ye,1,1)(12,et,2,6)(13,tt,1,1)(14,it,1,1),n()(),i(15,"div",65)(16,"button",66),c("click",function(t){let a=u(e).$implicit;return p().duplicateSection(a),_(t.stopPropagation())}),i(17,"mat-icon",67),r(18,"content_copy"),n()(),i(19,"button",68),c("click",function(t){let a=u(e).$implicit;return p().deleteSection(a.id),_(t.stopPropagation())}),i(20,"mat-icon",69),r(21,"delete"),n()()()()}if(l&2){let e,o,t,a,s,b=m.$implicit,C=p();k("ring-2",((e=C.currentSelectedSection())==null?null:e.id)===b.id)("ring-indigo-500",((o=C.currentSelectedSection())==null?null:o.id)===b.id)("bg-indigo-50",((t=C.currentSelectedSection())==null?null:t.id)===b.id),d(4),Y("background",((a=C.templateForm.get("primaryColor"))==null?null:a.value)+"15"),d(),Y("color",(s=C.templateForm.get("primaryColor"))==null?null:s.value),d(),ee(C.getSectionIcon(b.type)),d(3),y(" ",C.getSectionLabel(b.type)," "),d(2),f(b.label?11:b.staticContent?12:b.dataPath?13:14)}}function ot(l,m){if(l&1){let e=g();i(0,"div")(1,"label",74),r(2,"Title Text"),n(),i(3,"input",75),c("input",function(t){u(e);let a=p(),s=p();return _(s.updateSection(a.id,{staticContent:t.target.value,label:t.target.value}))}),n()()}if(l&2){let e=p();d(3),x("value",e.staticContent||"")}}function rt(l,m){if(l&1){let e=g();i(0,"div")(1,"label",74),r(2,"Content"),n(),i(3,"textarea",76),c("input",function(t){u(e);let a=p(),s=p();return _(s.updateSection(a.id,{staticContent:t.target.value}))}),n()()}if(l&2){let e=p();d(3),x("value",e.staticContent||"")}}function lt(l,m){if(l&1){let e=g();i(0,"div")(1,"label",74),r(2,"Label"),n(),i(3,"input",77),c("input",function(t){u(e);let a=p(),s=p();return _(s.updateSection(a.id,{label:t.target.value}))}),n()(),i(4,"div")(5,"label",74),r(6,"Data Path"),n(),i(7,"input",78),c("input",function(t){u(e);let a=p(),s=p();return _(s.updateSection(a.id,{dataPath:t.target.value}))}),n(),i(8,"p",79),r(9," Dot-separated path to data (e.g. results.1.fullName) "),n()()}if(l&2){let e=p();d(3),x("value",e.label||""),d(4),x("value",e.dataPath||"")}}function at(l,m){if(l&1){let e=g();i(0,"div")(1,"label",74),r(2,"Table Title"),n(),i(3,"input",80),c("input",function(t){u(e);let a=p(),s=p();return _(s.updateSection(a.id,{label:t.target.value}))}),n()(),i(4,"div")(5,"label",74),r(6,"Data Path (object)"),n(),i(7,"input",81),c("input",function(t){u(e);let a=p(),s=p();return _(s.updateSection(a.id,{dataPath:t.target.value}))}),n(),i(8,"p",79),r(9," Path to an object whose keys become rows "),n()()}if(l&2){let e=p();d(3),x("value",e.label||""),d(4),x("value",e.dataPath||"")}}function dt(l,m){if(l&1){let e=g();i(0,"div")(1,"label",74),r(2,"Image URL"),n(),i(3,"input",82),c("input",function(t){u(e);let a=p(),s=p();return _(s.updateSection(a.id,{staticContent:t.target.value}))}),n()(),i(4,"div")(5,"label",74),r(6,"Alt Text"),n(),i(7,"input",83),c("input",function(t){u(e);let a=p(),s=p();return _(s.updateSection(a.id,{label:t.target.value}))}),n()()}if(l&2){let e=p();d(3),x("value",e.staticContent||""),d(4),x("value",e.label||"")}}function st(l,m){if(l&1){let e=g();i(0,"div")(1,"label",74),r(2,"Height (px)"),n(),i(3,"input",84),c("input",function(t){u(e);let a=p(2);return _(a.updateSectionStyle("padding",t.target.value))}),n()()}if(l&2){let e=p();d(3),x("value",(e.style==null?null:e.style.padding)||16)}}function pt(l,m){if(l&1){let e=g();i(0,"div")(1,"label",74),r(2,"Color"),n(),i(3,"input",85),c("input",function(t){u(e);let a=p(2);return _(a.updateStyleColor(t.target.value))}),n()()}if(l&2){let e=p();d(3),x("value",(e.style==null?null:e.style.color)||"#E5E7EB")}}function mt(l,m){if(l&1){let e=g();i(0,"button",91),c("click",function(){let t=u(e).$implicit,a=p(3);return _(a.updateTextAlign(t))}),i(1,"mat-icon",61),r(2),n()()}if(l&2){let e=m.$implicit,o=p(2);k("bg-indigo-50",(o.style==null?null:o.style.textAlign)===e)("border-indigo-300",(o.style==null?null:o.style.textAlign)===e),d(2),y("format_align_",e,"")}}function ct(l,m){if(l&1){let e=g();i(0,"div",73)(1,"h4",86),r(2,"Style"),n(),i(3,"div")(4,"label",87),r(5,"Text Align"),n(),i(6,"div",88),M(7,mt,3,5,"button",89,te),n()(),i(9,"div")(10,"label",87),r(11,"Font Size"),n(),i(12,"input",90),c("input",function(t){u(e);let a=p(2);return _(a.updateFontSize(+t.target.value))}),n()(),i(13,"div")(14,"label",87),r(15,"Font Weight"),n(),i(16,"div",88)(17,"button",91),c("click",function(){u(e);let t=p(2);return _(t.updateFontWeight("normal"))}),r(18,"Normal"),n(),i(19,"button",92),c("click",function(){u(e);let t=p(2);return _(t.updateFontWeight("bold"))}),r(20,"Bold"),n()()(),i(21,"div",4)(22,"label",41),r(23,"Text Color"),n(),i(24,"input",93),c("input",function(t){u(e);let a=p(2);return _(a.updateStyleColor(t.target.value))}),n()()()}if(l&2){let e=p();d(7),I(ne(10,Oe)),d(5),x("value",(e.style==null?null:e.style.fontSize)||14),d(5),k("bg-indigo-50",(e.style==null?null:e.style.fontWeight)!=="bold")("border-indigo-300",(e.style==null?null:e.style.fontWeight)!=="bold"),d(2),k("bg-indigo-50",(e.style==null?null:e.style.fontWeight)==="bold")("border-indigo-300",(e.style==null?null:e.style.fontWeight)==="bold"),d(5),x("value",(e.style==null?null:e.style.color)||"#111827")}}function ut(l,m){if(l&1){let e=g();i(0,"div",14)(1,"div",70)(2,"h3",40),r(3),n(),i(4,"button",71),c("click",function(){u(e);let t=p();return _(t.selectedSection.set(null))}),i(5,"mat-icon",54),r(6,"close"),n()()(),i(7,"div",72),w(8,ot,4,1,"div")(9,rt,4,1,"div")(10,lt,10,2)(11,at,10,2)(12,dt,8,2)(13,st,4,1,"div")(14,pt,4,1,"div")(15,ct,25,11,"div",73),n()()}if(l&2){let e=m,o=p();d(3),y(" Edit ",o.getSectionLabel(e.type)," "),d(5),f(e.type==="header"?8:-1),d(),f(e.type==="text"?9:-1),d(),f(e.type==="field"?10:-1),d(),f(e.type==="table"?11:-1),d(),f(e.type==="image"?12:-1),d(),f(e.type==="spacer"?13:-1),d(),f(e.type==="divider"?14:-1),d(),f(e.type==="header"||e.type==="text"||e.type==="field"?15:-1)}}var Zt=(()=>{class l{constructor(){this._route=S(se),this._router=S(pe),this._fb=S(K),this._snack=S(he),this._reportService=S(Me),this._dialog=S(_e),this.configId=v(null),this.templateId=v(null),this.template=v(null),this.isLoading=v(!1),this.isSaving=v(!1),this.isSendingSample=v(!1),this.sections=v([]),this.selectedSection=v(null),this.currentSelectedSection=ae(()=>{let e=this.selectedSection();return e?this.sections().find(o=>o.id===e.id)??null:null}),this.sectionTypes=[{type:"header",label:"Header",icon:"title"},{type:"text",label:"Text Block",icon:"notes"},{type:"field",label:"Data Field",icon:"data_object"},{type:"table",label:"Table",icon:"table_chart"},{type:"image",label:"Image",icon:"image"},{type:"divider",label:"Divider",icon:"horizontal_rule"},{type:"spacer",label:"Spacer",icon:"space_bar"}],this.previewData=v({batchName:"Background Check - Batch #47",rowIndex:0,inputData:{documentNumber:"1032386359",documentType:"CC",fullName:"JOHN DOE SMITH"},results:{1:{fullName:"JOHN DOE SMITH",firstName:"JOHN",lastName:"DOE SMITH",documentNumber:"1032386359",documentType:"CC",birthDate:"1990-05-15",gender:"Male",nationality:"Colombian",email:"john.doe@example.com",phone:"+57 300 123 4567",address:"Calle 100 #15-20, Bogota"},2:{isValid:!0,score:.95,status:"VERIFIED",verifiedAt:"2026-02-10T14:30:00Z"}}}),this.onPreviewSectionClick=e=>{this.selectSection(e)},this.templateForm=this._fb.group({name:["",[H.required,H.maxLength(150)]],description:["",H.maxLength(500)],primaryColor:["#4F46E5"],pageSize:["A4"],orientation:["portrait"],pdfEngine:["puppeteer"],legend:[""]})}ngOnInit(){this._applyPreviewDataFromRouterState(),this._route.params.subscribe(e=>{this.configId.set(e.configId),this.templateId.set(e.templateId),this.templateId()?this._loadTemplate():this._initDefaultSections()})}_applyPreviewDataFromRouterState(){let o=this._router.getCurrentNavigation()?.extras?.state?.previewData;if(o&&(o.inputData||o.results)){let t={batchName:o.batchName??"Batch",rowIndex:o.rowIndex??0,inputData:o.inputData??{},results:o.results??{}};this.previewData.set(t)}}_loadTemplate(){let e=this.templateId();e&&(this.isLoading.set(!0),this._reportService.getTemplate(e).subscribe({next:o=>{this.template.set(o),this.sections.set(o.sections||[]),this.templateForm.patchValue({name:o.name,description:o.description,primaryColor:o.primaryColor||"#4F46E5",pageSize:o.pageSize||"A4",orientation:o.orientation||"portrait",pdfEngine:o.pdfEngine||"puppeteer",legend:o.legend||""}),this.isLoading.set(!1)},error:o=>{console.error("Failed to load template:",o),this.isLoading.set(!1),this._snack.open("Failed to load template","Close",{duration:3e3})}}))}_initDefaultSections(){this.sections.set([{id:this._generateId(),type:"header",order:0,label:"Verification Report",staticContent:"Verification Report",style:{fontSize:22,fontWeight:"bold",textAlign:"center"}},{id:this._generateId(),type:"divider",order:1,style:{color:"#4F46E5"}},{id:this._generateId(),type:"field",order:2,label:"Document Number",dataPath:"results.1.documentNumber"},{id:this._generateId(),type:"field",order:3,label:"Full Name",dataPath:"results.1.fullName"}])}onDrop(e){let o=[...this.sections()];Ee(o,e.previousIndex,e.currentIndex),o.forEach((t,a)=>t.order=a),this.sections.set(o)}addSection(e){let o={header:{staticContent:"Section Title",style:{fontSize:18,fontWeight:"bold",textAlign:"left"}},text:{staticContent:"Enter your text here...",style:{fontSize:12}},field:{label:"New Field",dataPath:""},table:{label:"Data Table",dataPath:"results.1"},image:{staticContent:"",style:{textAlign:"center"}},divider:{style:{color:this.templateForm.get("primaryColor")?.value||"#4F46E5"}},spacer:{style:{padding:"16"}}},t=h({id:this._generateId(),type:e,order:this.sections().length},o[e]);this.sections.update(a=>[...a,t]),this.selectSection(t)}selectSection(e){this.selectedSection.set(h({},e))}updateSection(e,o){this.sections.update(a=>a.map(s=>s.id===e?h(h({},s),o):s));let t=this.selectedSection();t?.id===e&&this.selectedSection.set(h(h({},t),o))}deleteSection(e){this.sections.update(o=>{let t=o.filter(a=>a.id!==e);return t.forEach((a,s)=>a.order=s),t}),this.selectedSection()?.id===e&&this.selectedSection.set(null)}duplicateSection(e){let o=R(h({},e),{id:this._generateId(),order:this.sections().length,label:e.label?e.label+" (copy)":void 0});this.sections.update(t=>[...t,o])}updateSectionStyle(e,o){let t=this.currentSelectedSection();t&&this.updateSection(t.id,{style:R(h({},t.style),{[e]:o})})}updateTextAlign(e){this.updateSectionStyle("textAlign",e)}updateFontSize(e){this.updateSectionStyle("fontSize",e)}updateFontWeight(e){this.updateSectionStyle("fontWeight",e)}updateStyleColor(e){this.updateSectionStyle("color",e)}updateBgColor(e){this.updateSectionStyle("backgroundColor",e)}save(){if(this.templateForm.invalid){this._snack.open("Please fill in all required fields","Close",{duration:3e3});return}this.isSaving.set(!0);let e=R(h({},this.templateForm.value),{sections:this.sections(),batchConfiguration:this.configId()||void 0}),o=this.templateId();o?this._reportService.updateTemplate(o,e).subscribe({next:()=>{this._snack.open("Template saved!","Close",{duration:3e3}),this.isSaving.set(!1)},error:t=>{console.error("Save failed:",t),this._snack.open("Failed to save template","Close",{duration:3e3}),this.isSaving.set(!1)}}):this._reportService.createTemplate(e).subscribe({next:t=>{this._snack.open("Template created!","Close",{duration:3e3}),this.isSaving.set(!1),this._router.navigate(["/smart-batch",this.configId(),"report-builder",t._id])},error:t=>{console.error("Create failed:",t),this._snack.open("Failed to create template","Close",{duration:3e3}),this.isSaving.set(!1)}})}sendSample(){let e=this.templateId();if(!e){this._snack.open("Save the template first before sending a sample","Close",{duration:3500});return}let o=`Sample Report: ${this.templateForm.get("name")?.value||"Template Preview"}`;this._dialog.open(De,{panelClass:"send-sample-dialog",maxWidth:"480px",width:"95vw",disableClose:!1,autoFocus:!0,data:{defaultSubject:o}}).afterClosed().subscribe(a=>{a?.recipients?.length&&(this.isSendingSample.set(!0),this._reportService.sendTemplateSample(e,{recipients:a.recipients,subject:a.subject,language:"en",sampleData:this.previewData()}).subscribe({next:s=>{s.success?this._snack.open("Sample PDF sent successfully","Close",{duration:3500}):this._snack.open(s.error||"Failed to send sample PDF","Close",{duration:4e3}),this.isSendingSample.set(!1)},error:s=>{console.error("Send sample failed:",s),this._snack.open("Failed to send sample PDF","Close",{duration:4e3}),this.isSendingSample.set(!1)}}))})}goBack(){let e=this.configId();e?this._router.navigate(["/smart-batch",e]):this._router.navigate(["/smart-batch"])}getSectionIcon(e){return this.sectionTypes.find(o=>o.type===e)?.icon||"help"}getSectionLabel(e){return this.sectionTypes.find(o=>o.type===e)?.label||e}_generateId(){return"section_"+Math.random().toString(36).substring(2,11)}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275cmp=F({type:l,selectors:[["report-builder"]],decls:92,vars:20,consts:[[1,"min-h-screen","w-full","bg-gray-50"],[1,"bg-white","border-b","border-gray-200","sticky","top-0","z-20"],[1,"max-w-[1600px]","mx-auto","px-4","sm:px-6","lg:px-8","py-3"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],["mat-icon-button","","matTooltip","Back",3,"click"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-xs","text-gray-500"],["mat-stroked-button","",1,"!rounded-xl",3,"click","disabled","matTooltip"],[1,"inline-flex","items-center","gap-2"],["mat-flat-button","",1,"!rounded-xl","!bg-indigo-600","!text-white",3,"click","disabled"],[1,"max-w-[1600px]","mx-auto","px-4","sm:px-6","lg:px-8","py-6"],[1,"flex","gap-6","items-start"],[1,"w-full","lg:w-[440px]","shrink-0","space-y-4"],[1,"bg-white","rounded-2xl","border","border-gray-200","p-5"],[1,"text-sm","font-semibold","text-gray-900","mb-4"],[1,"space-y-4",3,"formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","name","placeholder","My Report Template"],[1,"grid","grid-cols-3","gap-3"],["appearance","outline"],["formControlName","pageSize"],["value","A4"],["value","Letter"],["value","Legal"],["formControlName","orientation"],["value","portrait"],["value","landscape"],["formControlName","pdfEngine"],["value","puppeteer"],["value","pdfkit"],[1,"flex","items-center","gap-4"],[1,"text-sm","text-gray-600"],["type","color","formControlName","primaryColor",1,"w-9","h-9","rounded-lg","border","border-gray-200","cursor-pointer"],[1,"bg-white","rounded-2xl","border","border-gray-200","p-4"],[1,"text-sm","font-semibold","text-gray-900","mb-3"],[1,"flex","flex-wrap","gap-2"],[1,"inline-flex","items-center","gap-1.5","px-3","py-2","rounded-lg","border","border-gray-200","hover:border-indigo-300","hover:bg-indigo-50","transition-colors","text-sm","text-gray-700"],[1,"bg-white","rounded-2xl","border","border-gray-200"],[1,"px-5","py-3","border-b","border-gray-100","flex","items-center","justify-between"],[1,"text-sm","font-semibold","text-gray-900"],[1,"text-xs","text-gray-400"],[1,"text-xs","font-medium","text-gray-400"],["cdkDropList","",1,"p-3","min-h-[200px]",3,"cdkDropListDropped"],[1,"flex","flex-col","items-center","justify-center","h-40","text-gray-300"],["cdkDrag","",1,"flex","items-center","gap-2","bg-white","border","rounded-lg","px-3","py-2.5","mb-2","cursor-pointer","hover:border-indigo-300","transition-colors","group",3,"ring-2","ring-indigo-500","bg-indigo-50"],[1,"flex-1","min-w-0"],[1,"sticky","top-20"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","font-semibold","text-gray-500"],[3,"template","previewData","primaryColor","orientation","clickable","selectedSectionId","sectionClick"],[1,"animate-spin","!text-lg"],[1,"!text-lg"],[1,"inline-flex","items-center","gap-1.5","px-3","py-2","rounded-lg","border","border-gray-200","hover:border-indigo-300","hover:bg-indigo-50","transition-colors","text-sm","text-gray-700",3,"click"],[1,"!text-base","text-gray-400"],[1,"!text-4xl","!w-10","!h-10","mb-2"],[1,"text-sm"],["cdkDrag","",1,"flex","items-center","gap-2","bg-white","border","rounded-lg","px-3","py-2.5","mb-2","cursor-pointer","hover:border-indigo-300","transition-colors","group",3,"click"],["cdkDragHandle","",1,"shrink-0","w-6","h-6","rounded","flex","items-center","justify-center","cursor-grab","text-gray-300","hover:text-gray-500"],[1,"!text-sm"],[1,"shrink-0","w-7","h-7","rounded-md","flex","items-center","justify-center"],[1,"!text-base"],[1,"min-w-0","flex-1"],[1,"text-sm","font-medium","text-gray-800","truncate"],[1,"text-xs","text-gray-400","truncate"],[1,"shrink-0","flex","items-center","gap-0.5","opacity-0","group-hover:opacity-100","transition-opacity"],["mat-icon-button","","matTooltip","Duplicate",1,"!w-7","!h-7",3,"click"],[1,"!text-sm","text-gray-400"],["mat-icon-button","","matTooltip","Delete",1,"!w-7","!h-7",3,"click"],[1,"!text-sm","text-red-400"],[1,"flex","items-center","justify-between","mb-4"],["mat-icon-button","",1,"!w-7","!h-7",3,"click"],[1,"space-y-4"],[1,"pt-3","border-t","border-gray-100","space-y-3"],[1,"text-xs","font-medium","text-gray-500","mb-1","block"],["type","text","placeholder","Report Title",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm",3,"input","value"],["rows","4","placeholder","Enter text content...",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm",3,"input","value"],["type","text","placeholder","Field label",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm",3,"input","value"],["type","text","placeholder","results.1.fullName",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm","font-mono",3,"input","value"],[1,"text-xs","text-gray-400","mt-1"],["type","text","placeholder","Table label",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm",3,"input","value"],["type","text","placeholder","results.1",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm","font-mono",3,"input","value"],["type","text","placeholder","https://example.com/logo.png",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm","font-mono",3,"input","value"],["type","text","placeholder","Company Logo",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm",3,"input","value"],["type","number","min","4","max","200",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm",3,"input","value"],["type","color",1,"w-9","h-9","rounded-lg","border","border-gray-200","cursor-pointer",3,"input","value"],[1,"text-xs","font-medium","text-gray-500"],[1,"text-xs","text-gray-400","mb-1","block"],[1,"flex","gap-1"],[1,"flex-1","py-2","rounded-lg","border","text-sm","transition-colors",3,"bg-indigo-50","border-indigo-300"],["type","number","min","8","max","72",1,"w-full","px-3","py-2","border","border-gray-200","rounded-lg","text-sm",3,"input","value"],[1,"flex-1","py-2","rounded-lg","border","text-sm","transition-colors",3,"click"],[1,"flex-1","py-2","rounded-lg","border","text-sm","font-bold","transition-colors",3,"click"],["type","color",1,"w-8","h-8","rounded","border","border-gray-200","cursor-pointer",3,"input","value"]],template:function(o,t){if(o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),c("click",function(){return t.goBack()}),i(6,"mat-icon"),r(7,"arrow_back"),n()(),i(8,"div")(9,"h1",6),r(10),n(),i(11,"p",7),r(12,"Design your report layout with drag & drop"),n()()(),i(13,"div",4)(14,"button",8),c("click",function(){return t.sendSample()}),i(15,"span",9),w(16,Ze,3,0)(17,Je,3,0),n()(),i(18,"button",10),c("click",function(){return t.save()}),i(19,"span",9),w(20,Ke,3,0)(21,Ue,3,0),n()()()()()(),i(22,"div",11)(23,"div",12)(24,"div",13)(25,"div",14)(26,"h3",15),r(27,"Template Settings"),n(),i(28,"form",16)(29,"mat-form-field",17)(30,"mat-label"),r(31,"Template Name"),n(),E(32,"input",18),n(),i(33,"div",19)(34,"mat-form-field",20)(35,"mat-label"),r(36,"Page Size"),n(),i(37,"mat-select",21)(38,"mat-option",22),r(39,"A4"),n(),i(40,"mat-option",23),r(41,"Letter"),n(),i(42,"mat-option",24),r(43,"Legal"),n()()(),i(44,"mat-form-field",20)(45,"mat-label"),r(46,"Orientation"),n(),i(47,"mat-select",25)(48,"mat-option",26),r(49,"Portrait"),n(),i(50,"mat-option",27),r(51,"Landscape"),n()()(),i(52,"mat-form-field",20)(53,"mat-label"),r(54,"PDF Engine"),n(),i(55,"mat-select",28)(56,"mat-option",29),r(57,"Puppeteer"),n(),i(58,"mat-option",30),r(59,"PDFKit"),n()()()(),i(60,"div",31)(61,"label",32),r(62,"Primary Color:"),n(),E(63,"input",33),n()()(),i(64,"div",34)(65,"h3",35),r(66,"Add Sections"),n(),i(67,"div",36),M(68,Xe,4,2,"button",37,Ge),n()(),i(70,"div",38)(71,"div",39)(72,"div")(73,"h3",40),r(74,"Report Layout"),n(),i(75,"p",41),r(76,"Drag to reorder sections"),n()(),i(77,"span",42),r(78),n()(),i(79,"div",43),c("cdkDropListDropped",function(s){return t.onDrop(s)}),w(80,Qe,5,0,"div",44),M(81,nt,22,13,"div",45,qe),n()(),w(83,ut,16,9,"div",14),n(),i(84,"div",46)(85,"div",47)(86,"div",48)(87,"h3",49),r(88,"Preview"),n(),i(89,"span",41),r(90,"Live preview with sample data"),n()(),E(91,"report-preview",50),n()()()()()),o&2){let a,s,b,C,T;d(10),y(" ",t.templateId()?"Edit Report Template":"New Report Template"," "),d(4),x("disabled",!t.templateId()||t.isSendingSample())("matTooltip",t.templateId()?"":"Save template first to enable sample sending"),d(2),f(t.isSendingSample()?16:17),d(2),x("disabled",t.isSaving()),d(2),f(t.isSaving()?20:21),d(8),x("formGroup",t.templateForm),d(40),I(t.sectionTypes),d(10),y("",t.sections().length," sections"),d(2),f(t.sections().length===0?80:-1),d(),I(t.sections()),d(2),f((a=t.currentSelectedSection())?83:-1,a),d(8),x("template",oe(17,He,t.sections(),(s=t.templateForm.get("primaryColor"))==null?null:s.value))("previewData",t.previewData())("primaryColor",((b=t.templateForm.get("primaryColor"))==null?null:b.value)||"#4F46E5")("orientation",((C=t.templateForm.get("orientation"))==null?null:C.value)||"portrait")("clickable",!0)("selectedSectionId",(T=(T=t.currentSelectedSection())==null?null:T.id)!==null&&T!==void 0?T:null)("sectionClick",t.onPreviewSectionClick)}},dependencies:[B,de,me,U,q,W,O,G,Z,J,Fe,Re,ke,Te,j,L,A,D,$,z,N,P,V,Q,X,we,ye,xe,Se,be,ve,Ie],encapsulation:2,data:{animation:[Ce]}})}}return l})();export{Zt as ReportBuilderComponent};
